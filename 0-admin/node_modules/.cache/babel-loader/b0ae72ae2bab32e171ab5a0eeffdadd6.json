{"remainingRequest":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/babel-loader/lib/index.js!/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/plugins/audio/playAudio.js","dependencies":[{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/plugins/audio/playAudio.js","mtime":1698845798685},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/babel.config.js","mtime":1698845798561},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMveWluZy9Eb3dubG9hZHMvVGVsZWdyYW0gRGVza3RvcC9cdTY1QjBcdTVFRkFcdTY1ODdcdTRFRjZcdTU5MzkgKDIpL2VjaG8yLjAtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL3lpbmcvRG93bmxvYWRzL1RlbGVncmFtIERlc2t0b3AvXHU2NUIwXHU1RUZBXHU2NTg3XHU0RUY2XHU1OTM5ICgyKS9lY2hvMi4wLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIpKTsKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy95aW5nL0Rvd25sb2Fkcy9UZWxlZ3JhbSBEZXNrdG9wL1x1NjVCMFx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOSAoMikvZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIpKTsKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy95aW5nL0Rvd25sb2Fkcy9UZWxlZ3JhbSBEZXNrdG9wL1x1NjVCMFx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOSAoMikvZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIpKTsKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy95aW5nL0Rvd25sb2Fkcy9UZWxlZ3JhbSBEZXNrdG9wL1x1NjVCMFx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOSAoMikvZWNobzIuMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIpKTsKdmFyIF9pbmRleCA9IHJlcXVpcmUoIkAvdXRpbHMvaW5kZXgiKTsKdmFyIFBsYXlBdWRpbyA9IGV4cG9ydHMuZGVmYXVsdCA9IC8qI19fUFVSRV9fKi8oMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KSgKLyoqDQogKiDliJ3lp4vljJYNCiAqLwpmdW5jdGlvbiBQbGF5QXVkaW8oX3BhcmFtcykgewogIHZhciBfdGhpcyA9IHRoaXM7CiAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgUGxheUF1ZGlvKTsKICAvKioNCiAgICog6Z+z6aKR5a6e5L6LDQogICAqLwogICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJhdWRpbyIsIG51bGwpOwogIC8qKg0KICAgKiDlvZPliY3mkq3mlL7lrp7kvosNCiAgICovCiAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgImN1cnJlbnRQbGF5QXVkaW8iLCBudWxsKTsKICAvKioNCiAgICog5piv5ZCm5Zyo5pKt5pS+5LitDQogICAqLwogICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJpc1BsYXkiLCBmYWxzZSk7CiAgLyoqDQogICAqIOaSreaUvuWIl+ihqA0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAicGxheUxpc3QiLCBbXSk7CiAgLyoqDQogICAqIOaSreaUvuaOiOadgw0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAicGxheVBlcm1pc3Npb24iLCBmdW5jdGlvbiAoKSB7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIF90aGlzLnBsYXlQZXJtaXNzaW9uKTsKICAgIC8vIOaSreaUvumfs+mikQogICAgX3RoaXMuYXVkaW8ucGxheSgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygicGxheVBlcm1pc3Npb24iLCBlcnJvcik7CiAgICAgIC8vIOS4jeaUr+aMgeiHquWKqOaSreaUvgogICAgICBfdGhpcy5nZXRVc2VyTWVkaWFQZXJtaXNzaW9uKCk7CiAgICB9KTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5hdWRpby5wYXVzZSgpOwogICAgICBjb25zb2xlLmluZm8oIuiOt+WPluWujOaIkCIsIF90aGlzLnBsYXlMaXN0Lmxlbmd0aCk7CiAgICAgIGlmIChfdGhpcy5wbGF5TGlzdC5sZW5ndGgpIHsKICAgICAgICAvLyDojrflj5bmjojmnYPlrozmiJDvvIzlrZjlnKjluKbmkq3mlL7liJfooagg56uL5Y2z5pKt5pS+CiAgICAgICAgX3RoaXMuY3VycmVudFBsYXlBdWRpbyA9IF90aGlzLnBsYXlMaXN0WzBdOwogICAgICAgIF90aGlzLnBsYXkoX3RoaXMuY3VycmVudFBsYXlBdWRpbywgdHJ1ZSk7CiAgICAgIH0KICAgIH0sIDEwMCk7CiAgfSk7CiAgLyoqDQogICAqIOiOt+WPluWqkuS9k+iuvuWkh+adg+mZkA0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiZ2V0VXNlck1lZGlhUGVybWlzc2lvbiIsIGZ1bmN0aW9uICgpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgYXVkaW86IHRydWUKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAvLyBjb25zb2xlLmVycm9yKCLojrflj5blqpLkvZPorr7lpIfmnYPpmZDvvJoiLCBzdHJlYW0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIC8vIOeUqOaIt+aLkue7neaIlua1j+iniOWZqOS4jeaUr+aMge+8jOaCqOWPr+S7peWcqOi/memHjOWkhOeQhumUmeivrwogICAgICAvLyBjb25zb2xlLmVycm9yKCLnlKjmiLfmi5Lnu53miJbmtY/op4jlmajkuI3mlK/mjIHvvJoiLCBlcnJvcik7CiAgICB9KTsKICB9KTsKICAvKioNCiAgICog5pKt5pS+DQogICAqLwogICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJwbGF5IiwgZnVuY3Rpb24gKCkgewogICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICBzcmM6ICIiLAogICAgICBjb3VudDogMSwKICAgICAgZm9yY2U6IGZhbHNlLAogICAgICBsb29wOiBmYWxzZSwKICAgICAgY3VycmVudFRpbWU6IDAsCiAgICAgIHZvbHVtZTogMC41CiAgICB9OwogICAgdmFyIHBsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgaWYgKCEoMCwgX2luZGV4LmdldElzTm90aWNlKSgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnNvbGUubG9nKCLpn7PpopHmkq3mlL4iLCBwbGF5KTsKICAgIGlmIChwbGF5KSB7CiAgICAgIGlmIChfdGhpcy5hdWRpby5zcmMgIT0gcGFyYW1zLnNyYykgewogICAgICAgIF90aGlzLmF1ZGlvLnNyYyA9IHBhcmFtcy5zcmM7CiAgICAgIH0KICAgICAgX3RoaXMuYXVkaW8ubG9vcCA9IHBhcmFtcy5sb29wIHx8IGZhbHNlOwogICAgICBfdGhpcy5hdWRpby5jdXJyZW50VGltZSA9IHBhcmFtcy5jdXJyZW50VGltZSB8fCAwOwogICAgICBfdGhpcy5hdWRpby52b2x1bWUgPSBwYXJhbXMudm9sdW1lIHx8IDAuNTsKICAgICAgX3RoaXMuYXVkaW8ucGxheSgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJwbGF5IiwgZXJyb3IpOwogICAgICAgIF90aGlzLmdldFVzZXJNZWRpYVBlcm1pc3Npb24oKTsKICAgICAgfSk7CiAgICAgIF90aGlzLmlzUGxheSA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBwYXJhbXMuY291bnQgPSBwYXJhbXMuY291bnQgfHwgMTsKICAgICAgcGFyYW1zLmZvcmNlID0gcGFyYW1zLmZvcmNlIHx8IGZhbHNlOwogICAgICBpZiAocGFyYW1zLnNyYykgewogICAgICAgIGlmIChwYXJhbXMuZm9yY2UpIHsKICAgICAgICAgIC8vIOW8uuWItuaSreaUvgogICAgICAgICAgX3RoaXMucmVzZXRBdWRpbygpOwogICAgICAgIH0KICAgICAgICBfdGhpcy5wbGF5TGlzdC5wdXNoKHBhcmFtcyk7CiAgICAgICAgaWYgKCFfdGhpcy5pc1BsYXkpIHsKICAgICAgICAgIC8vIOacquWcqOaSreaUvuaXtueri+WNs+aSreaUvgogICAgICAgICAgX3RoaXMuY3VycmVudFBsYXlBdWRpbyA9IF90aGlzLnBsYXlMaXN0WzBdOwogICAgICAgICAgX3RoaXMucGxheShfdGhpcy5jdXJyZW50UGxheUF1ZGlvLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KTsKICAvKioNCiAgICog5pKt5pS+5LiL5LiA5LiqKOWMheWQq+asoeaVsCkNCiAgICovCiAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgIm5leHQiLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZmxhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7CiAgICBpZiAoX3RoaXMucGxheUxpc3QubGVuZ3RoKSB7CiAgICAgIF90aGlzLmF1ZGlvLnBhdXNlKCk7CiAgICAgIF90aGlzLmF1ZGlvRW5kZWQoZmxhZyk7CiAgICB9CiAgfSk7CiAgLyoqDQogICAqIOmHjee9ruaSreaUvuWZqA0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAicmVzZXRBdWRpbyIsIGZ1bmN0aW9uICgpIHsKICAgIF90aGlzLmN1cnJlbnRQbGF5QXVkaW8gPSBudWxsOwogICAgX3RoaXMuaXNQbGF5ID0gZmFsc2U7CiAgICBfdGhpcy5wbGF5TGlzdC5sZW5ndGggPSAwOwogICAgX3RoaXMuYXVkaW8ucGF1c2UoKTsKICAgIF90aGlzLmF1ZGlvLmN1cnJlbnRUaW1lID0gMDsKICAgIF90aGlzLmF1ZGlvLnNyYyA9ICIiOwogICAgX3RoaXMuYXVkaW8ubG9vcCA9IGZhbHNlOwogICAgX3RoaXMuYXVkaW8uc3JjID0gMDsKICAgIF90aGlzLmF1ZGlvLnZvbHVtZSA9IDA7CiAgfSk7CiAgLyoqDQogICAqIOmfs+mikeWKoOi9veWujOaIkA0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiYXVkaW9Mb2FkZWRtZXRhZGF0YSIsIGZ1bmN0aW9uICgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCLpn7PpopHliqDovb3lrozmiJAiKTsKICB9KTsKICAvKioNCiAgICog6Z+z6aKR5Yqg6L295aSx6LSlDQogICAqLwogICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJhdWRpb0Vycm9yIiwgZnVuY3Rpb24gKCkgewogICAgLy8gY29uc29sZS5sb2coIumfs+mikeWKoOi9veWksei0pSIpOwogICAgX3RoaXMuYXVkaW9FbmRlZCgpOwogIH0pOwogIC8qKg0KICAgKiDpn7PpopHmkq3mlL7kuK0NCiAgICovCiAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgImF1ZGlvUGxheSIsIGZ1bmN0aW9uICgpIHsKICAgIF90aGlzLmlzUGxheSA9IHRydWU7CiAgICAvLyBjb25zb2xlLmxvZygi6Z+z6aKR5pKt5pS+5LitIik7CiAgfSk7CiAgLyoqDQogICAqIOmfs+mikeaaguWBnA0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAiYXVkaW9QYXVzZSIsIGZ1bmN0aW9uICgpIHsKICAgIF90aGlzLmlzUGxheSA9IGZhbHNlOwogICAgLy8gY29uc29sZS5sb2coIumfs+mikeaaguWBnCIpOwogIH0pOwogIC8qKg0KICAgKiDpn7PpopHmkq3mlL7nu5PmnZ8NCiAgICovCiAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgImF1ZGlvRW5kZWQiLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3RoaXMkY3VycmVudFBsYXlBdWRpOwogICAgdmFyIGZsYWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogICAgLy8gY29uc29sZS5sb2coIumfs+mikeaSreaUvue7k+adnyIpOwogICAgaWYgKCgwLCBfdHlwZW9mMi5kZWZhdWx0KShmbGFnKSA9PSAib2JqZWN0IikgewogICAgICBmbGFnID0gZmFsc2U7CiAgICB9CiAgICBfdGhpcy5pc1BsYXkgPSBmYWxzZTsKICAgIGlmICgoKF90aGlzJGN1cnJlbnRQbGF5QXVkaSA9IF90aGlzLmN1cnJlbnRQbGF5QXVkaW8pID09PSBudWxsIHx8IF90aGlzJGN1cnJlbnRQbGF5QXVkaSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY3VycmVudFBsYXlBdWRpLmNvdW50KSA+IDAgJiYgIV90aGlzLmN1cnJlbnRQbGF5QXVkaW8ubG9vcCkgewogICAgICBfdGhpcy5jdXJyZW50UGxheUF1ZGlvLmNvdW50LS07CiAgICB9CiAgICBpZiAoX3RoaXMucGxheUxpc3QubGVuZ3RoKSB7CiAgICAgIHZhciBfdGhpcyRjdXJyZW50UGxheUF1ZGkyOwogICAgICBpZiAoISgoX3RoaXMkY3VycmVudFBsYXlBdWRpMiA9IF90aGlzLmN1cnJlbnRQbGF5QXVkaW8pICE9PSBudWxsICYmIF90aGlzJGN1cnJlbnRQbGF5QXVkaTIgIT09IHZvaWQgMCAmJiBfdGhpcyRjdXJyZW50UGxheUF1ZGkyLmNvdW50KSB8fCBmbGFnKSB7CiAgICAgICAgX3RoaXMucGxheUxpc3Quc2hpZnQoKTsKICAgICAgfQogICAgICBfdGhpcy5jdXJyZW50UGxheUF1ZGlvID0gX3RoaXMucGxheUxpc3RbMF0gfHwgbnVsbDsKICAgICAgaWYgKF90aGlzLmN1cnJlbnRQbGF5QXVkaW8pIHsKICAgICAgICBfdGhpcy5wbGF5KF90aGlzLmN1cnJlbnRQbGF5QXVkaW8sIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLmF1ZGlvLnNyYyA9ICIiOwogICAgICB9CiAgICB9CiAgfSk7CiAgLyoqDQogICAqIOmUgOavgQ0KICAgKi8KICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAicmVtb3ZlIiwgZnVuY3Rpb24gKCkgewogICAgX3RoaXMucmVzZXRBdWRpbygpOwogICAgX3RoaXMuYXVkaW8gPSBudWxsOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJlZXAiKS5yZW1vdmUoKTsKICB9KTsKICBpZiAoIXRoaXMuYXVkaW8pIHsKICAgIHRoaXMucGxheUxpc3QgPSAoX3BhcmFtcyA9PT0gbnVsbCB8fCBfcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGFyYW1zLnBsYXlMaXN0KSB8fCBbXTsKICAgIHRoaXMuYXVkaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXVkaW9CZWVwIikgfHwgbnVsbDsKICAgIGlmICghdGhpcy5hdWRpbykgewogICAgICB0aGlzLmF1ZGlvID0gbmV3IEF1ZGlvKCk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuYXVkaW8pOwogICAgfQogICAgdGhpcy5hdWRpby5pZCA9ICJhdWRpb0JlZXAiOwogICAgdGhpcy5hdWRpby5tdXRlZCA9IGZhbHNlOwogICAgdGhpcy5hdWRpby5jdXJyZW50VGltZSA9IDA7CiAgICB0aGlzLmF1ZGlvLnZvbHVtZSA9IDA7CiAgICAvLyDmt7vliqDkuovku7bnm5HlkKzlmagKICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigicGxheSIsIHRoaXMuYXVkaW9QbGF5KTsKICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigicGF1c2UiLCB0aGlzLmF1ZGlvUGF1c2UpOwogICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKCJlbmRlZCIsIHRoaXMuYXVkaW9FbmRlZCk7CiAgICB0aGlzLmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoImxvYWRlZG1ldGFkYXRhIiwgdGhpcy5hdWRpb0xvYWRlZG1ldGFkYXRhKTsKICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCB0aGlzLmF1ZGlvRXJyb3IpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCB0aGlzLnBsYXlQZXJtaXNzaW9uKTsKICAgIGRvY3VtZW50LmJvZHkuY2xpY2soKTsKICB9Cn0pOw=="},{"version":3,"names":["_index","require","PlayAudio","exports","default","_createClass2","params","_this","_classCallCheck2","_defineProperty2","document","removeEventListener","playPermission","audio","play","catch","error","console","log","getUserMediaPermission","setTimeout","pause","info","playList","length","currentPlayAudio","navigator","mediaDevices","getUserMedia","then","stream","arguments","undefined","src","count","force","loop","currentTime","volume","getIsNotice","isPlay","resetAudio","push","flag","audioEnded","_this$currentPlayAudi","_typeof2","_this$currentPlayAudi2","shift","getElementById","remove","Audio","body","append","id","muted","addEventListener","audioPlay","audioPause","audioLoadedmetadata","audioError","click"],"sources":["/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/plugins/audio/playAudio.js"],"sourcesContent":["import { getIsNotice } from \"@/utils/index\";\r\n\r\nexport default class PlayAudio {\r\n  /**\r\n   * 音频实例\r\n   */\r\n  audio = null;\r\n  /**\r\n   * 当前播放实例\r\n   */\r\n  currentPlayAudio = null;\r\n  /**\r\n   * 是否在播放中\r\n   */\r\n  isPlay = false;\r\n  /**\r\n   * 播放列表\r\n   */\r\n  playList = [];\r\n  /**\r\n   * 初始化\r\n   */\r\n  constructor(params) {\r\n    if (!this.audio) {\r\n      this.playList = params?.playList || [];\r\n      this.audio = document.getElementById(\"audioBeep\") || null;\r\n      if (!this.audio) {\r\n        this.audio = new Audio();\r\n        document.body.append(this.audio);\r\n      }\r\n      this.audio.id = \"audioBeep\";\r\n      this.audio.muted = false;\r\n      this.audio.currentTime = 0;\r\n      this.audio.volume = 0;\r\n      // 添加事件监听器\r\n      this.audio.addEventListener(\"play\", this.audioPlay);\r\n      this.audio.addEventListener(\"pause\", this.audioPause);\r\n      this.audio.addEventListener(\"ended\", this.audioEnded);\r\n      this.audio.addEventListener(\"loadedmetadata\", this.audioLoadedmetadata);\r\n      this.audio.addEventListener(\"error\", this.audioError);\r\n\r\n      document.addEventListener(\"click\", this.playPermission);\r\n      document.body.click();\r\n    }\r\n  }\r\n  /**\r\n   * 播放授权\r\n   */\r\n  playPermission = () => {\r\n    document.removeEventListener(\"click\", this.playPermission);\r\n    // 播放音频\r\n    this.audio.play().catch((error) => {\r\n      console.log(\"playPermission\", error);\r\n      // 不支持自动播放\r\n      this.getUserMediaPermission();\r\n    });\r\n    setTimeout(() => {\r\n      this.audio.pause();\r\n      console.info(\"获取完成\", this.playList.length);\r\n      if (this.playList.length) {\r\n        // 获取授权完成，存在带播放列表 立即播放\r\n        this.currentPlayAudio = this.playList[0];\r\n        this.play(this.currentPlayAudio, true);\r\n      }\r\n    }, 100);\r\n  };\r\n  /**\r\n   * 获取媒体设备权限\r\n   */\r\n  getUserMediaPermission = () => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ audio: true })\r\n      .then(function (stream) {\r\n        // console.error(\"获取媒体设备权限：\", stream);\r\n      })\r\n      .catch(function (error) {\r\n        // 用户拒绝或浏览器不支持，您可以在这里处理错误\r\n        // console.error(\"用户拒绝或浏览器不支持：\", error);\r\n      });\r\n  };\r\n  /**\r\n   * 播放\r\n   */\r\n  play = (\r\n    params = {\r\n      src: \"\",\r\n      count: 1,\r\n      force: false,\r\n      loop: false,\r\n      currentTime: 0,\r\n      volume: 0.5,\r\n    },\r\n    play = false\r\n  ) => {\r\n    if (!getIsNotice()) {\r\n      return;\r\n    }\r\n    console.log(\"音频播放\", play);\r\n    if (play) {\r\n      if (this.audio.src != params.src) {\r\n        this.audio.src = params.src;\r\n      }\r\n      this.audio.loop = params.loop || false;\r\n      this.audio.currentTime = params.currentTime || 0;\r\n      this.audio.volume = params.volume || 0.5;\r\n      this.audio.play().catch((error) => {\r\n        // console.log(\"play\", error);\r\n        this.getUserMediaPermission();\r\n      });\r\n      this.isPlay = true;\r\n    } else {\r\n      params.count = params.count || 1;\r\n      params.force = params.force || false;\r\n      if (params.src) {\r\n        if (params.force) {\r\n          // 强制播放\r\n          this.resetAudio();\r\n        }\r\n        this.playList.push(params);\r\n        if (!this.isPlay) {\r\n          // 未在播放时立即播放\r\n          this.currentPlayAudio = this.playList[0];\r\n          this.play(this.currentPlayAudio, true);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * 播放下一个(包含次数)\r\n   */\r\n  next = (flag = false) => {\r\n    if (this.playList.length) {\r\n      this.audio.pause();\r\n      this.audioEnded(flag);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 重置播放器\r\n   */\r\n  resetAudio = () => {\r\n    this.currentPlayAudio = null;\r\n    this.isPlay = false;\r\n    this.playList.length = 0;\r\n    this.audio.pause();\r\n\r\n    this.audio.currentTime = 0;\r\n    this.audio.src = \"\";\r\n    this.audio.loop = false;\r\n    this.audio.src = 0;\r\n    this.audio.volume = 0;\r\n  };\r\n\r\n  /**\r\n   * 音频加载完成\r\n   */\r\n  audioLoadedmetadata = () => {\r\n    // console.log(\"音频加载完成\");\r\n  };\r\n  /**\r\n   * 音频加载失败\r\n   */\r\n  audioError = () => {\r\n    // console.log(\"音频加载失败\");\r\n    this.audioEnded();\r\n  };\r\n\r\n  /**\r\n   * 音频播放中\r\n   */\r\n  audioPlay = () => {\r\n    this.isPlay = true;\r\n    // console.log(\"音频播放中\");\r\n  };\r\n  /**\r\n   * 音频暂停\r\n   */\r\n  audioPause = () => {\r\n    this.isPlay = false;\r\n    // console.log(\"音频暂停\");\r\n  };\r\n  /**\r\n   * 音频播放结束\r\n   */\r\n  audioEnded = (flag = false) => {\r\n    // console.log(\"音频播放结束\");\r\n    if (typeof flag == \"object\") {\r\n      flag = false;\r\n    }\r\n    this.isPlay = false;\r\n    if (this.currentPlayAudio?.count > 0 && !this.currentPlayAudio.loop) {\r\n      this.currentPlayAudio.count--;\r\n    }\r\n\r\n    if (this.playList.length) {\r\n      if (!this.currentPlayAudio?.count || flag) {\r\n        this.playList.shift();\r\n      }\r\n      this.currentPlayAudio = this.playList[0] || null;\r\n      if (this.currentPlayAudio) {\r\n        this.play(this.currentPlayAudio, true);\r\n      } else {\r\n        this.audio.src = \"\";\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * 销毁\r\n   */\r\n  remove = () => {\r\n    this.resetAudio();\r\n    this.audio = null;\r\n    document.getElementById(\"beep\").remove();\r\n  };\r\n}\r\n"],"mappings":"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"}]}