{"remainingRequest":"/Users/atk/Desktop/交易所9.27/0-admin/node_modules/babel-loader/lib/index.js!/Users/atk/Desktop/交易所9.27/0-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/atk/Desktop/交易所9.27/0-admin/src/plugins/download.js","dependencies":[{"path":"/Users/atk/Desktop/交易所9.27/0-admin/src/plugins/download.js","mtime":1698845798000},{"path":"/Users/atk/Desktop/交易所9.27/0-admin/babel.config.js","mtime":1698845798000},{"path":"/Users/atk/Desktop/交易所9.27/0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/atk/Desktop/交易所9.27/0-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/atk/Desktop/交易所9.27/0-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvYXRrL0Rlc2t0b3AvXHU0RUE0XHU2NjEzXHU2MjQwOS4yNy8wLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKdmFyIF9yZWdlbmVyYXRvclJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvYXRrL0Rlc2t0b3AvXHU0RUE0XHU2NjEzXHU2MjQwOS4yNy8wLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3JlZ2VuZXJhdG9yUnVudGltZS5qcyIpKTsKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2F0ay9EZXNrdG9wL1x1NEVBNFx1NjYxM1x1NjI0MDkuMjcvMC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIikpOwp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKdmFyIF9lbGVtZW50VWkgPSByZXF1aXJlKCJlbGVtZW50LXVpIik7CnZhciBfZmlsZVNhdmVyID0gcmVxdWlyZSgiZmlsZS1zYXZlciIpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKdmFyIF9lcnJvckNvZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvdXRpbHMvZXJyb3JDb2RlIikpOwp2YXIgX3J1b3lpID0gcmVxdWlyZSgiQC91dGlscy9ydW95aSIpOwp2YXIgYmFzZVVSTCA9IF9fY29uZmlnLl9CQVNFX0FQSTsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6IGZ1bmN0aW9uIG5hbWUoX25hbWUpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgaXNEZWxldGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICB2YXIgdXJsID0gYmFzZVVSTCArICIvY29tbW9uL2Rvd25sb2FkP2ZpbGVOYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQoX25hbWUpICsgIiZkZWxldGU9IiArIGlzRGVsZXRlOwogICAgKDAsIF9heGlvcy5kZWZhdWx0KSh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgaXNCbG9iID0gKDAsIF9ydW95aS5ibG9iVmFsaWRhdGUpKHJlcy5kYXRhKTsKICAgICAgaWYgKGlzQmxvYikgewogICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSk7CiAgICAgICAgX3RoaXMuc2F2ZUFzKGJsb2IsIGRlY29kZVVSSUNvbXBvbmVudChyZXMuaGVhZGVyc1snZG93bmxvYWQtZmlsZW5hbWUnXSkpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLnByaW50RXJyTXNnKHJlcy5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKICByZXNvdXJjZTogZnVuY3Rpb24gcmVzb3VyY2UoX3Jlc291cmNlKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgIHZhciB1cmwgPSBiYXNlVVJMICsgIi9jb21tb24vZG93bmxvYWQvcmVzb3VyY2U/cmVzb3VyY2U9IiArIGVuY29kZVVSSUNvbXBvbmVudChfcmVzb3VyY2UpOwogICAgKDAsIF9heGlvcy5kZWZhdWx0KSh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgaXNCbG9iID0gKDAsIF9ydW95aS5ibG9iVmFsaWRhdGUpKHJlcy5kYXRhKTsKICAgICAgaWYgKGlzQmxvYikgewogICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSk7CiAgICAgICAgX3RoaXMyLnNhdmVBcyhibG9iLCBkZWNvZGVVUklDb21wb25lbnQocmVzLmhlYWRlcnNbJ2Rvd25sb2FkLWZpbGVuYW1lJ10pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpczIucHJpbnRFcnJNc2cocmVzLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIHppcDogZnVuY3Rpb24gemlwKHVybCwgbmFtZSkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICB2YXIgdXJsID0gYmFzZVVSTCArIHVybDsKICAgICgwLCBfYXhpb3MuZGVmYXVsdCkoewogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICB1cmw6IHVybCwKICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGlzQmxvYiA9ICgwLCBfcnVveWkuYmxvYlZhbGlkYXRlKShyZXMuZGF0YSk7CiAgICAgIGlmIChpc0Jsb2IpIHsKICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi96aXAnCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLnNhdmVBcyhibG9iLCBuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpczMucHJpbnRFcnJNc2cocmVzLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIHNhdmVBczogZnVuY3Rpb24gc2F2ZUFzKHRleHQsIG5hbWUsIG9wdHMpIHsKICAgICgwLCBfZmlsZVNhdmVyLnNhdmVBcykodGV4dCwgbmFtZSwgb3B0cyk7CiAgfSwKICBwcmludEVyck1zZzogZnVuY3Rpb24gcHJpbnRFcnJNc2coZGF0YSkgewogICAgcmV0dXJuICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXNUZXh0LCByc3BPYmosIGVyck1zZzsKICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGRhdGEudGV4dCgpOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXNUZXh0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcnNwT2JqID0gSlNPTi5wYXJzZShyZXNUZXh0KTsKICAgICAgICAgICAgZXJyTXNnID0gX2Vycm9yQ29kZS5kZWZhdWx0W3JzcE9iai5jb2RlXSB8fCByc3BPYmoubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOwogICAgICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2UuZXJyb3IoZXJyTXNnKTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"names":["_axios","_interopRequireDefault","require","_elementUi","_fileSaver","_auth","_errorCode","_ruoyi","baseURL","__config","_BASE_API","_default","exports","default","name","_this","isDelete","arguments","length","undefined","url","encodeURIComponent","axios","method","responseType","headers","getToken","then","res","isBlob","blobValidate","data","blob","Blob","saveAs","decodeURIComponent","printErrMsg","resource","_this2","zip","_this3","type","text","opts","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","resText","rspObj","errMsg","wrap","_callee$","_context","prev","next","sent","JSON","parse","errorCode","code","msg","Message","error","stop"],"sources":["/Users/atk/Desktop/交易所9.27/0-admin/src/plugins/download.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport { saveAs } from 'file-saver'\r\nimport { getToken } from '@/utils/auth'\r\nimport errorCode from '@/utils/errorCode'\r\nimport { blobValidate } from \"@/utils/ruoyi\";\r\n\r\nconst baseURL = __config._BASE_API\r\n\r\nexport default {\r\n  name(name, isDelete = true) {\r\n    var url = baseURL + \"/common/download?fileName=\" + encodeURIComponent(name) + \"&delete=\" + isDelete\r\n    axios({\r\n      method: 'get',\r\n      url: url,\r\n      responseType: 'blob',\r\n      headers: { 'Authorization': 'Bearer ' + getToken() }\r\n    }).then((res) => {\r\n      const isBlob = blobValidate(res.data);\r\n      if (isBlob) {\r\n        const blob = new Blob([res.data])\r\n        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))\r\n      } else {\r\n        this.printErrMsg(res.data);\r\n      }\r\n    })\r\n  },\r\n  resource(resource) {\r\n    var url = baseURL + \"/common/download/resource?resource=\" + encodeURIComponent(resource);\r\n    axios({\r\n      method: 'get',\r\n      url: url,\r\n      responseType: 'blob',\r\n      headers: { 'Authorization': 'Bearer ' + getToken() }\r\n    }).then((res) => {\r\n      const isBlob = blobValidate(res.data);\r\n      if (isBlob) {\r\n        const blob = new Blob([res.data])\r\n        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))\r\n      } else {\r\n        this.printErrMsg(res.data);\r\n      }\r\n    })\r\n  },\r\n  zip(url, name) {\r\n    var url = baseURL + url\r\n    axios({\r\n      method: 'get',\r\n      url: url,\r\n      responseType: 'blob',\r\n      headers: { 'Authorization': 'Bearer ' + getToken() }\r\n    }).then((res) => {\r\n      const isBlob = blobValidate(res.data);\r\n      if (isBlob) {\r\n        const blob = new Blob([res.data], { type: 'application/zip' })\r\n        this.saveAs(blob, name)\r\n      } else {\r\n        this.printErrMsg(res.data);\r\n      }\r\n    })\r\n  },\r\n  saveAs(text, name, opts) {\r\n    saveAs(text, name, opts);\r\n  },\r\n  async printErrMsg(data) {\r\n    const resText = await data.text();\r\n    const rspObj = JSON.parse(resText);\r\n    const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\r\n    Message.error(errMsg);\r\n  }\r\n}\r\n\r\n"],"mappings":"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"}]}