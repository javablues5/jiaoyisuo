{"remainingRequest":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/babel-loader/lib/index.js!/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/store/modules/user.js","mtime":1698845798692},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/babel.config.js","mtime":1698845798561},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwp2YXIgX2xvZ2luID0gcmVxdWlyZSgiQC9hcGkvbG9naW4iKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICB0b2tlbjogKDAsIF9hdXRoLmdldFRva2VuKSgpLAogICAgbmFtZTogIiIsCiAgICBhdmF0YXI6ICIiLAogICAgcm9sZXM6IFtdLAogICAgcGVybWlzc2lvbnM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICAgIH0sCiAgICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogICAgfSwKICAgIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogICAgfSwKICAgIFNFVF9QRVJNSVNTSU9OUzogZnVuY3Rpb24gU0VUX1BFUk1JU1NJT05TKHN0YXRlLCBwZXJtaXNzaW9ucykgewogICAgICBzdGF0ZS5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8g55m75b2VCiAgICBMb2dpbjogZnVuY3Rpb24gTG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZS50cmltKCk7CiAgICAgIHZhciBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICB2YXIgY29kZSA9IHVzZXJJbmZvLmNvZGU7CiAgICAgIHZhciB1dWlkID0gdXNlckluZm8udXVpZDsKICAgICAgdmFyIGF1dGhDb2RlID0gdXNlckluZm8uYXV0aENvZGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgKDAsIF9sb2dpbi5sb2dpbikodXNlcm5hbWUsIHBhc3N3b3JkLCBjb2RlLCB1dWlkLCBhdXRoQ29kZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAoMCwgX2F1dGguc2V0VG9rZW4pKHJlcy50b2tlbik7CiAgICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsIHJlcy50b2tlbik7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bnlKjmiLfkv6Hmga8KICAgIEdldEluZm86IGZ1bmN0aW9uIEdldEluZm8oX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICgwLCBfbG9naW4uZ2V0SW5mbykoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciB1c2VyID0gcmVzLnVzZXI7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1c2VyKQogICAgICAgICAgLy8gY29uc3QgYXZhdGFyID0gX19jb25maWcuX0JBU0VfQVBJICsgdXNlci5hdmF0YXI7CiAgICAgICAgICB2YXIgYXZhdGFyID0gdXNlci5hdmF0YXI7CiAgICAgICAgICBpZiAocmVzLnJvbGVzICYmIHJlcy5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgcmVzLnJvbGVzKTsKICAgICAgICAgICAgY29tbWl0KCJTRVRfUEVSTUlTU0lPTlMiLCByZXMucGVybWlzc2lvbnMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCBbIlJPTEVfREVGQVVMVCJdKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbW1pdCgiU0VUX05BTUUiLCB1c2VyLnVzZXJOYW1lKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX0FWQVRBUiIsIGF2YXRhcik7CiAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpgIDlh7rns7vnu58KICAgIExvZ091dDogZnVuY3Rpb24gTG9nT3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAoMCwgX2xvZ2luLmxvZ291dCkoc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCAiIik7CiAgICAgICAgICBjb21taXQoIlNFVF9ST0xFUyIsIFtdKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX1BFUk1JU1NJT05TIiwgW10pOwogICAgICAgICAgKDAsIF9hdXRoLnJlbW92ZVRva2VuKSgpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YmN56uvIOeZu+WHugogICAgRmVkTG9nT3V0OiBmdW5jdGlvbiBGZWRMb2dPdXQoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCAiIik7CiAgICAgICAgKDAsIF9hdXRoLnJlbW92ZVRva2VuKSgpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB1c2VyOw=="},{"version":3,"names":["_login","require","_auth","user","state","token","getToken","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","Login","_ref","userInfo","commit","username","trim","password","code","uuid","authCode","Promise","resolve","reject","login","then","res","setToken","catch","error","GetInfo","_ref2","getInfo","length","userName","LogOut","_ref3","logout","removeToken","FedLogOut","_ref4","_default","exports","default"],"sources":["/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from \"@/api/login\";\r\nimport { getToken, setToken, removeToken } from \"@/utils/auth\";\r\n\r\nconst user = {\r\n  state: {\r\n    token: getToken(),\r\n    name: \"\",\r\n    avatar: \"\",\r\n    roles: [],\r\n    permissions: [],\r\n  },\r\n\r\n  mutations: {\r\n    SET_TOKEN: (state, token) => {\r\n      state.token = token;\r\n    },\r\n    SET_NAME: (state, name) => {\r\n      state.name = name;\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar;\r\n    },\r\n    SET_ROLES: (state, roles) => {\r\n      state.roles = roles;\r\n    },\r\n    SET_PERMISSIONS: (state, permissions) => {\r\n      state.permissions = permissions;\r\n    },\r\n  },\r\n\r\n  actions: {\r\n    // 登录\r\n    Login({ commit }, userInfo) {\r\n      const username = userInfo.username.trim();\r\n      const password = userInfo.password;\r\n      const code = userInfo.code;\r\n      const uuid = userInfo.uuid;\r\n      const authCode = userInfo.authCode;\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password, code, uuid, authCode)\r\n          .then((res) => {\r\n            setToken(res.token);\r\n            commit(\"SET_TOKEN\", res.token);\r\n            resolve();\r\n          })\r\n          .catch((error) => {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    // 获取用户信息\r\n    GetInfo({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        getInfo()\r\n          .then((res) => {\r\n            const user = res.user;\r\n            // console.log(user)\r\n            // const avatar = __config._BASE_API + user.avatar;\r\n            const avatar = user.avatar;\r\n            if (res.roles && res.roles.length > 0) {\r\n              // 验证返回的roles是否是一个非空数组\r\n              commit(\"SET_ROLES\", res.roles);\r\n              commit(\"SET_PERMISSIONS\", res.permissions);\r\n            } else {\r\n              commit(\"SET_ROLES\", [\"ROLE_DEFAULT\"]);\r\n            }\r\n            commit(\"SET_NAME\", user.userName);\r\n            commit(\"SET_AVATAR\", avatar);\r\n            resolve(res);\r\n          })\r\n          .catch((error) => {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    // 退出系统\r\n    LogOut({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        logout(state.token)\r\n          .then(() => {\r\n            commit(\"SET_TOKEN\", \"\");\r\n            commit(\"SET_ROLES\", []);\r\n            commit(\"SET_PERMISSIONS\", []);\r\n            removeToken();\r\n            resolve();\r\n          })\r\n          .catch((error) => {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    // 前端 登出\r\n    FedLogOut({ commit }) {\r\n      return new Promise((resolve) => {\r\n        commit(\"SET_TOKEN\", \"\");\r\n        removeToken();\r\n        resolve();\r\n      });\r\n    },\r\n  },\r\n};\r\n\r\nexport default user;\r\n"],"mappings":"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"}]}