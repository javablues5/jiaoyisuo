{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\src\\views\\pledge\\ming\\pledgeNum.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\src\\views\\pledge\\ming\\pledgeNum.vue","mtime":1698845798000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\babel.config.js","mtime":1698845798000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKdmFyIF9taW5nID0gcmVxdWlyZSgiQC9hcGkvYnVzc2luZXNzL21pbmcuanMiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdG90YWw6IDAsCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgYXBwVXNlcklkOiAiIgogICAgICB9LAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgbWluZ0xpc3Q6IFtdLAogICAgICB1c2VyT3B0aW9uczogW10sCiAgICAgIHByb2R1Y3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvZHVjdElkLAogICAgICBvcGVuUGxlZGdlOiBmYWxzZSwKICAgICAgdXNlck1zZzoge30sCiAgICAgIHRpdGxlUGxlZGdlOiAiIiwKICAgICAgcGxlZGdlbWFpbklkOiAiIiwKICAgICAgZm9ybVBsZWRnZTogewogICAgICAgIGFwcFVzZXJJZDogIiIsCiAgICAgICAgcGxlZGdlTnVtOiAwCiAgICAgIH0sCiAgICAgIHJ1bGVzUGxlZGdlOiB7CiAgICAgICAgYXBwVXNlcklkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup55So5oi3IiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgcGxlZGdlTnVtOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6ZmQ6LSt5qyh5pWw5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHNob3dEaXNhYmxlZDogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVRdWVyeTogZnVuY3Rpb24gaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIGhhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLm9wZW5QbGVkZ2UgPSB0cnVlOwogICAgICB0aGlzLnRpdGxlUGxlZGdlID0gIumZkOi0reiuvue9riI7CiAgICAgIHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSAiIjsKICAgICAgdGhpcy5mb3JtUGxlZGdlLnBsZWRnZU51bSA9ICIiOwogICAgICB0aGlzLnNob3dEaXNhYmxlZCA9IGZhbHNlOwogICAgICAoMCwgX21pbmcubGlzdFVzZXJBbGwpKHRoaXMucHJvZHVjdElkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy51c2VyT3B0aW9ucyA9IHJlcy5yb3dzOwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXRGb3JtMjogZnVuY3Rpb24gc3VibWl0Rm9ybTIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWyJmb3JtUGxlZGdlIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgcGFyYW1zID0ge307CgogICAgICAgICAgLy8g5paw5aKeCiAgICAgICAgICBpZiAoIV90aGlzMi5zaG93RGlzYWJsZWQpIHsKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgIGFwcFVzZXJJZDogX3RoaXMyLmZvcm1QbGVkZ2UuYXBwVXNlcklkLAogICAgICAgICAgICAgIHBsZWRnZU51bTogX3RoaXMyLmZvcm1QbGVkZ2UucGxlZGdlTnVtLAogICAgICAgICAgICAgIHByb2R1Y3RJZDogX3RoaXMyLnByb2R1Y3RJZAogICAgICAgICAgICB9OwogICAgICAgICAgICAoMCwgX21pbmcuYWRkUGxlZGdlKShwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAiMjAwIikgewogICAgICAgICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dTdWNjZXNzKCLorr7nva7miJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMi5vcGVuUGxlZGdlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczIuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSAiIjsKICAgICAgICAgICAgICAgIF90aGlzMi5mb3JtUGxlZGdlLnBsZWRnZU51bSA9IDA7CiAgICAgICAgICAgICAgICBfdGhpczIuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkv67mlLkKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgIGFwcFVzZXJJZDogX3RoaXMyLmZvcm1QbGVkZ2UuYXBwVXNlcklkLAogICAgICAgICAgICAgIHBsZWRnZU51bTogX3RoaXMyLmZvcm1QbGVkZ2UucGxlZGdlTnVtLAogICAgICAgICAgICAgIHByb2R1Y3RJZDogX3RoaXMyLnByb2R1Y3RJZCwKICAgICAgICAgICAgICBpZDogX3RoaXMyLnBsZWRnZW1haW5JZAogICAgICAgICAgICB9OwogICAgICAgICAgICAoMCwgX21pbmcudXBkYXRlUGxlZGdlKShwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAiMjAwIikgewogICAgICAgICAgICAgICAgX3RoaXMyLiRtb2RhbC5tc2dTdWNjZXNzKCLorr7nva7miJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMi5vcGVuUGxlZGdlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczIuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSAiIjsKICAgICAgICAgICAgICAgIF90aGlzMi5mb3JtUGxlZGdlLnBsZWRnZU51bSA9IDA7CiAgICAgICAgICAgICAgICBfdGhpczIuZ2V0TGlzdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWwyOiBmdW5jdGlvbiBjYW5jZWwyKCkgewogICAgICB0aGlzLm9wZW5QbGVkZ2UgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSgpIHt9LAogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMucXVlcnlQYXJhbXNbInByb2R1Y3RJZCJdID0gdGhpcy5wcm9kdWN0SWQ7CiAgICAgICgwLCBfbWluZy5wbGVkZ2VMaXN0KSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gIjIwMCIpIHsKICAgICAgICAgIF90aGlzMy5taW5nTGlzdCA9IHJlcy5yb3dzOwogICAgICAgICAgX3RoaXMzLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaXRlbSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgKDAsIF9taW5nLmRlbFBsZWRnZSkoaXRlbS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09ICIyMDAiKSB7CiAgICAgICAgICBfdGhpczQuZ2V0TGlzdCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBkYXRlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGUoaXRlbSkgewogICAgICB0aGlzLm9wZW5QbGVkZ2UgPSB0cnVlOwogICAgICAvLyB0aGlzLmZvcm1QbGVkZ2U9aXRlbQogICAgICB0aGlzLmZvcm1QbGVkZ2UuYXBwVXNlcklkID0gaXRlbS5hcHBVc2VySWQ7CiAgICAgIHRoaXMuZm9ybVBsZWRnZS5wbGVkZ2VOdW0gPSBpdGVtLnBsZWRnZU51bTsKICAgICAgdGhpcy51c2VyTXNnID0gImlkOiIuY29uY2F0KGl0ZW0udGFwcFVzZXIuYXBwVXNlcklkLCAiIFx1NzY3Qlx1NUY1NVx1NTQwRFx1RkYxQSIpLmNvbmNhdChpdGVtLnRhcHBVc2VyLmxvZ2luTmFtZSk7CiAgICAgIHRoaXMuc2hvd0Rpc2FibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5wbGVkZ2VtYWluSWQgPSBpdGVtLmlkOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5mb3JtUGxlZGdlLmFwcFVzZXJJZCA9IG51bGw7CiAgICAgIHRoaXMuZm9ybVBsZWRnZS5wbGVkZ2VOdW0gPSBudWxsOwogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybVBsZWRnZSIpOwogICAgfQogIH0KfTs="},{"version":3,"names":["_ming","require","data","loading","total","queryParams","pageNum","pageSize","appUserId","showSearch","mingList","userOptions","productId","$route","query","openPledge","userMsg","titlePledge","pledgemainId","formPledge","pledgeNum","rulesPledge","required","message","trigger","showDisabled","created","getList","methods","handleQuery","resetQuery","resetForm","handleAdd","_this","listUserAll","then","res","rows","submitForm2","_this2","$refs","validate","valid","params","addPledge","code","$modal","msgSuccess","id","updatePledge","cancel2","handleSelectionChange","_this3","pledgeList","handleDelete","item","_this4","delPledge","handleUpdate","concat","tappUser","loginName","close"],"sources":["src/views/pledge/ming/pledgeNum.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <SearchFormBox>\r\n      <el-form\r\n        :model=\"queryParams\"\r\n        ref=\"queryForm\"\r\n        size=\"small\"\r\n        :inline=\"true\"\r\n        v-show=\"showSearch\"\r\n        label-width=\"68px\"\r\n      >\r\n        <el-form-item label=\"用户ID\" prop=\"appUserId\">\r\n          <el-input\r\n            v-model=\"queryParams.appUserId\"\r\n            clearable\r\n            @keyup.enter.native=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"handleQuery\"\r\n            >搜索</el-button\r\n          >\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\"\r\n            >重置</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </SearchFormBox>\r\n    <TableContentBox>\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n        <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"primary\"\r\n            plain\r\n            icon=\"el-icon-plus\"\r\n            size=\"mini\"\r\n            @click=\"handleAdd\"\r\n            v-hasPermi=\"[\r\n              'bussiness:productUser:add',\r\n              'bussiness:user:getListByPledge',\r\n            ]\"\r\n            >新增</el-button\r\n          >\r\n        </el-col>\r\n        <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"success\"\r\n            plain\r\n            size=\"mini\"\r\n            @click=\"$router.push(`/pledge/ming`)\"\r\n            >返回</el-button\r\n          >\r\n        </el-col>\r\n        <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\">\r\n        </right-toolbar>\r\n      </el-row>\r\n      <el-table\r\n        height=\"calc(100vh - 400px)\"\r\n        border\r\n        v-loading=\"loading\"\r\n        :data=\"mingList\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n        <el-table-column type=\"index\" width=\"55\" align=\"center\" />\r\n        <el-table-column label=\"ID\" align=\"center\" width=\"80\" prop=\"id\" />\r\n        <el-table-column\r\n          label=\"用户ID\"\r\n          align=\"center\"\r\n          width=\"80\"\r\n          prop=\"appUserId\"\r\n        />\r\n        <el-table-column\r\n          label=\"登录名\"\r\n          align=\"center\"\r\n          prop=\"tappUser.loginName\"\r\n        />\r\n        <el-table-column label=\"测试用户\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              plain\r\n              v-if=\"scope.row.tappUser.isTest == 0\"\r\n              >否</el-tag\r\n            >\r\n            <el-tag\r\n              type=\"info\"\r\n              size=\"mini\"\r\n              plain\r\n              v-else-if=\"scope.row.tappUser.isTest == 1\"\r\n              >是</el-tag\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"限购产品ID\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"productId\"\r\n        />\r\n        <el-table-column\r\n          label=\"限购产品标题\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"title\"\r\n        />\r\n        <el-table-column\r\n          label=\"限购次数\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"pledgeNum\"\r\n        />\r\n        <el-table-column\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n          align=\"center\"\r\n          width=\"220\"\r\n          class-name=\"small-padding fixed-width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"btns\">\r\n              <el-button\r\n                plain\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"handleUpdate(scope.row)\"\r\n                v-hasPermi=\"['bussiness:productUser:edit']\"\r\n                >修改</el-button\r\n              >\r\n              <el-button\r\n                plain\r\n                size=\"small\"\r\n                type=\"danger\"\r\n                @click=\"handleDelete(scope.row)\"\r\n                v-hasPermi=\"['bussiness:productUser:remove']\"\r\n                >删除</el-button\r\n              >\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <pagination\r\n        v-show=\"total > 0\"\r\n        :total=\"total\"\r\n        :page.sync=\"queryParams.pageNum\"\r\n        :limit.sync=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </TableContentBox>\r\n    <!-- 限购设置 -->\r\n    <el-dialog\r\n      :title=\"titlePledge\"\r\n      :visible.sync=\"openPledge\"\r\n      width=\"800px\"\r\n      append-to-body\r\n      @close=\"close\"\r\n    >\r\n      <el-form\r\n        ref=\"formPledge\"\r\n        :model=\"formPledge\"\r\n        :rules=\"rulesPledge\"\r\n        label-width=\"120px\"\r\n        style=\"min-height: 200px\"\r\n      >\r\n        <el-form-item label=\"限购次数\" prop=\"pledgeNum\">\r\n          <el-input v-model=\"formPledge.pledgeNum\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"用户\" prop=\"id\" v-if=\"showDisabled\">\r\n          <el-input v-model=\"userMsg\" disabled />\r\n        </el-form-item>\r\n        <el-form-item label=\"用户\" prop=\"appUserId\" v-else>\r\n          <el-select\r\n            :default-first-option=\"false\"\r\n            v-model=\"formPledge.appUserId\"\r\n            placeholder=\"请选择用户或搜索用户id/名称\"\r\n            style=\"width: 100%\"\r\n            filterable\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"item in userOptions\"\r\n              :key=\"item.userId\"\r\n              :label=\"`id:${item.userId}   登录名：${item.loginName}`\"\r\n              :value=\"item.userId\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm2\">确 定</el-button>\r\n        <el-button @click=\"cancel2\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  pledgeList,\r\n  listUserAll,\r\n  addPledge,\r\n  updatePledge,\r\n  delPledge,\r\n} from \"@/api/bussiness/ming.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      total: 0,\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        appUserId: \"\",\r\n      },\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      mingList: [],\r\n      userOptions: [],\r\n      productId: this.$route.query.productId,\r\n\r\n      openPledge: false,\r\n      userMsg: {},\r\n      titlePledge: \"\",\r\n      pledgemainId: \"\",\r\n      formPledge: {\r\n        appUserId: \"\",\r\n        pledgeNum: 0,\r\n      },\r\n      rulesPledge: {\r\n        appUserId: [\r\n          { required: true, message: \"请选择用户\", trigger: \"change\" },\r\n        ],\r\n        pledgeNum: [\r\n          { required: true, message: \"限购次数不能为空\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      showDisabled: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    handleAdd() {\r\n      this.openPledge = true;\r\n      this.titlePledge = \"限购设置\";\r\n      this.formPledge.appUserId = \"\";\r\n      this.formPledge.pledgeNum = \"\";\r\n      this.showDisabled = false;\r\n      listUserAll(this.productId).then((res) => {\r\n        this.userOptions = res.rows;\r\n      });\r\n    },\r\n    submitForm2() {\r\n      this.$refs[\"formPledge\"].validate((valid) => {\r\n        if (valid) {\r\n          let params = {};\r\n\r\n          // 新增\r\n          if (!this.showDisabled) {\r\n            params = {\r\n              appUserId: this.formPledge.appUserId,\r\n              pledgeNum: this.formPledge.pledgeNum,\r\n              productId: this.productId,\r\n            };\r\n            addPledge(params).then((res) => {\r\n              if (res.code == \"200\") {\r\n                this.$modal.msgSuccess(\"设置成功\");\r\n                this.openPledge = false;\r\n                this.formPledge.appUserId = \"\";\r\n                this.formPledge.pledgeNum = 0;\r\n                this.getList();\r\n              }\r\n            });\r\n          } else {\r\n            // 修改\r\n            params = {\r\n              appUserId: this.formPledge.appUserId,\r\n              pledgeNum: this.formPledge.pledgeNum,\r\n              productId: this.productId,\r\n              id: this.pledgemainId,\r\n            };\r\n            updatePledge(params).then((res) => {\r\n              if (res.code == \"200\") {\r\n                this.$modal.msgSuccess(\"设置成功\");\r\n                this.openPledge = false;\r\n                this.formPledge.appUserId = \"\";\r\n                this.formPledge.pledgeNum = 0;\r\n                this.getList();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    cancel2() {\r\n      this.openPledge = false;\r\n    },\r\n    handleSelectionChange() {},\r\n    getList() {\r\n      this.queryParams[\"productId\"] = this.productId;\r\n      pledgeList(this.queryParams).then((res) => {\r\n        if (res.code == \"200\") {\r\n          this.mingList = res.rows;\r\n          this.total = res.total;\r\n        }\r\n      });\r\n    },\r\n    handleDelete(item) {\r\n      delPledge(item.id).then((res) => {\r\n        if (res.code == \"200\") {\r\n          this.getList();\r\n        }\r\n      });\r\n    },\r\n    handleUpdate(item) {\r\n      this.openPledge = true;\r\n      // this.formPledge=item\r\n      this.formPledge.appUserId = item.appUserId;\r\n      this.formPledge.pledgeNum = item.pledgeNum;\r\n      this.userMsg = `id:${item.tappUser.appUserId} 登录名：${item.tappUser.loginName}`;\r\n      this.showDisabled = true;\r\n      this.pledgemainId = item.id;\r\n    },\r\n    close() {\r\n      this.formPledge.appUserId = null;\r\n      this.formPledge.pledgeNum = null;\r\n      this.resetForm(\"formPledge\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":"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"}]}