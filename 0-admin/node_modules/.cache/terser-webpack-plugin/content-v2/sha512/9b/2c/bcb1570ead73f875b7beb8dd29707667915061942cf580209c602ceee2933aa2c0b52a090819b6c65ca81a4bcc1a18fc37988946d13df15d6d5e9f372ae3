{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-234b15f7\"],{8100:function(e,t,r){\"use strict\";r.d(t,\"f\",(function(){return n})),r.d(t,\"e\",(function(){return a})),r.d(t,\"a\",(function(){return i})),r.d(t,\"i\",(function(){return l})),r.d(t,\"c\",(function(){return o})),r.d(t,\"h\",(function(){return d})),r.d(t,\"g\",(function(){return u})),r.d(t,\"b\",(function(){return c})),r.d(t,\"j\",(function(){return p})),r.d(t,\"d\",(function(){return m}));var s=r(\"b775\");function n(e){return Object(s.a)({url:\"/bussiness/ming/list\",method:\"get\",params:e})}function a(e){return Object(s.a)({url:\"/bussiness/ming/\"+e,method:\"get\"})}function i(e){return Object(s.a)({url:\"/bussiness/ming\",method:\"post\",data:e})}function l(e){return Object(s.a)({url:\"/bussiness/ming\",method:\"put\",data:e})}function o(e){return Object(s.a)({url:\"/bussiness/ming/\"+e,method:\"delete\"})}function d(e){return Object(s.a)({url:\"/bussiness/productUser/list\",method:\"get\",params:e})}function u(e){return Object(s.a)({url:\"/bussiness/user/getListByPledge?productId=\".concat(e),method:\"get\"})}function c(e){return Object(s.a)({url:\"/bussiness/productUser\",method:\"post\",data:e})}function p(e){return Object(s.a)({url:\"/bussiness/productUser\",method:\"put\",data:e})}function m(e){return Object(s.a)({url:\"/bussiness/productUser/\"+e,method:\"delete\"})}},dcf2:function(e,t,r){\"use strict\";r.r(t),r(\"99af\");var s=r(\"8100\"),n={data:function(){return{loading:!1,total:0,queryParams:{pageNum:1,pageSize:10,appUserId:\"\"},showSearch:!0,mingList:[],userOptions:[],productId:this.$route.query.productId,openPledge:!1,userMsg:{},titlePledge:\"\",pledgemainId:\"\",formPledge:{appUserId:\"\",pledgeNum:0},rulesPledge:{appUserId:[{required:!0,message:\"请选择用户\",trigger:\"change\"}],pledgeNum:[{required:!0,message:\"限购次数不能为空\",trigger:\"blur\"}]},showDisabled:!1}},created:function(){this.getList()},methods:{handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm(\"queryForm\"),this.handleQuery()},handleAdd:function(){var e=this;this.openPledge=!0,this.titlePledge=\"限购设置\",this.formPledge.appUserId=\"\",this.formPledge.pledgeNum=\"\",this.showDisabled=!1,Object(s.g)(this.productId).then((function(t){e.userOptions=t.rows}))},submitForm2:function(){var e=this;this.$refs.formPledge.validate((function(t){t&&(t={},e.showDisabled?(t={appUserId:e.formPledge.appUserId,pledgeNum:e.formPledge.pledgeNum,productId:e.productId,id:e.pledgemainId},Object(s.j)(t).then((function(t){\"200\"==t.code&&(e.$modal.msgSuccess(\"设置成功\"),e.openPledge=!1,e.formPledge.appUserId=\"\",e.formPledge.pledgeNum=0,e.getList())}))):(t={appUserId:e.formPledge.appUserId,pledgeNum:e.formPledge.pledgeNum,productId:e.productId},Object(s.b)(t).then((function(t){\"200\"==t.code&&(e.$modal.msgSuccess(\"设置成功\"),e.openPledge=!1,e.formPledge.appUserId=\"\",e.formPledge.pledgeNum=0,e.getList())}))))}))},cancel2:function(){this.openPledge=!1},handleSelectionChange:function(){},getList:function(){var e=this;this.queryParams.productId=this.productId,Object(s.h)(this.queryParams).then((function(t){\"200\"==t.code&&(e.mingList=t.rows,e.total=t.total)}))},handleDelete:function(e){var t=this;Object(s.d)(e.id).then((function(e){\"200\"==e.code&&t.getList()}))},handleUpdate:function(e){this.openPledge=!0,this.formPledge.appUserId=e.appUserId,this.formPledge.pledgeNum=e.pledgeNum,this.userMsg=\"id:\".concat(e.tappUser.appUserId,\" 登录名：\").concat(e.tappUser.loginName),this.showDisabled=!0,this.pledgemainId=e.id},close:function(){this.formPledge.appUserId=null,this.formPledge.pledgeNum=null,this.resetForm(\"formPledge\")}}};r=r(\"2877\"),r=Object(r.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"app-container\"},[r(\"SearchFormBox\",[r(\"el-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showSearch,expression:\"showSearch\"}],ref:\"queryForm\",attrs:{model:e.queryParams,size:\"small\",inline:!0,\"label-width\":\"68px\"}},[r(\"el-form-item\",{attrs:{label:\"用户ID\",prop:\"appUserId\"}},[r(\"el-input\",{attrs:{clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleQuery(t)}},model:{value:e.queryParams.appUserId,callback:function(t){e.$set(e.queryParams,\"appUserId\",t)},expression:\"queryParams.appUserId\"}})],1),r(\"el-form-item\",[r(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:e.handleQuery}},[e._v(\"搜索\")]),r(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetQuery}},[e._v(\"重置\")])],1)],1)],1),r(\"TableContentBox\",[r(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[r(\"el-col\",{attrs:{span:1.5}},[r(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"bussiness:productUser:add\",\"bussiness:user:getListByPledge\"],expression:\"[\\n            'bussiness:productUser:add',\\n            'bussiness:user:getListByPledge',\\n          ]\"}],attrs:{type:\"primary\",plain:\"\",icon:\"el-icon-plus\",size:\"mini\"},on:{click:e.handleAdd}},[e._v(\"新增\")])],1),r(\"el-col\",{attrs:{span:1.5}},[r(\"el-button\",{attrs:{type:\"success\",plain:\"\",size:\"mini\"},on:{click:function(t){return e.$router.push(\"/pledge/ming\")}}},[e._v(\"返回\")])],1),r(\"right-toolbar\",{attrs:{showSearch:e.showSearch},on:{\"update:showSearch\":function(t){e.showSearch=t},\"update:show-search\":function(t){e.showSearch=t},queryTable:e.getList}})],1),r(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{height:\"calc(100vh - 400px)\",border:\"\",data:e.mingList},on:{\"selection-change\":e.handleSelectionChange}},[r(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),r(\"el-table-column\",{attrs:{type:\"index\",width:\"55\",align:\"center\"}}),r(\"el-table-column\",{attrs:{label:\"ID\",align:\"center\",width:\"80\",prop:\"id\"}}),r(\"el-table-column\",{attrs:{label:\"用户ID\",align:\"center\",width:\"80\",prop:\"appUserId\"}}),r(\"el-table-column\",{attrs:{label:\"登录名\",align:\"center\",prop:\"tappUser.loginName\"}}),r(\"el-table-column\",{attrs:{label:\"测试用户\",width:\"100\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[0==t.row.tappUser.isTest?r(\"el-tag\",{attrs:{type:\"primary\",size:\"mini\",plain:\"\"}},[e._v(\"否\")]):1==t.row.tappUser.isTest?r(\"el-tag\",{attrs:{type:\"info\",size:\"mini\",plain:\"\"}},[e._v(\"是\")]):e._e()]}}])}),r(\"el-table-column\",{attrs:{label:\"限购产品ID\",width:\"100\",align:\"center\",prop:\"productId\"}}),r(\"el-table-column\",{attrs:{label:\"限购产品标题\",width:\"100\",align:\"center\",prop:\"title\"}}),r(\"el-table-column\",{attrs:{label:\"限购次数\",width:\"100\",align:\"center\",prop:\"pledgeNum\"}}),r(\"el-table-column\",{attrs:{fixed:\"right\",label:\"操作\",align:\"center\",width:\"220\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"div\",{staticClass:\"btns\"},[r(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"bussiness:productUser:edit\"],expression:\"['bussiness:productUser:edit']\"}],attrs:{plain:\"\",size:\"small\",type:\"primary\"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v(\"修改\")]),r(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"bussiness:productUser:remove\"],expression:\"['bussiness:productUser:remove']\"}],attrs:{plain:\"\",size:\"small\",type:\"danger\"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v(\"删除\")])],1)]}}])})],1),r(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:0<e.total,expression:\"total > 0\"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{\"update:page\":function(t){return e.$set(e.queryParams,\"pageNum\",t)},\"update:limit\":function(t){return e.$set(e.queryParams,\"pageSize\",t)},pagination:e.getList}})],1),r(\"el-dialog\",{attrs:{title:e.titlePledge,visible:e.openPledge,width:\"800px\",\"append-to-body\":\"\"},on:{\"update:visible\":function(t){e.openPledge=t},close:e.close}},[r(\"el-form\",{ref:\"formPledge\",staticStyle:{\"min-height\":\"200px\"},attrs:{model:e.formPledge,rules:e.rulesPledge,\"label-width\":\"120px\"}},[r(\"el-form-item\",{attrs:{label:\"限购次数\",prop:\"pledgeNum\"}},[r(\"el-input\",{model:{value:e.formPledge.pledgeNum,callback:function(t){e.$set(e.formPledge,\"pledgeNum\",t)},expression:\"formPledge.pledgeNum\"}})],1),e.showDisabled?r(\"el-form-item\",{attrs:{label:\"用户\",prop:\"id\"}},[r(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.userMsg,callback:function(t){e.userMsg=t},expression:\"userMsg\"}})],1):r(\"el-form-item\",{attrs:{label:\"用户\",prop:\"appUserId\"}},[r(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{\"default-first-option\":!1,placeholder:\"请选择用户或搜索用户id/名称\",filterable:\"\",clearable:\"\"},model:{value:e.formPledge.appUserId,callback:function(t){e.$set(e.formPledge,\"appUserId\",t)},expression:\"formPledge.appUserId\"}},e._l(e.userOptions,(function(e){return r(\"el-option\",{key:e.userId,attrs:{label:\"id:\"+e.userId+\"   登录名：\"+e.loginName,value:e.userId}})})),1)],1)],1),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm2}},[e._v(\"确 定\")]),r(\"el-button\",{on:{click:e.cancel2}},[e._v(\"取 消\")])],1)],1)],1)}),[],!1,null,\"0adebe58\",null);t.default=r.exports}}]);","extractedComments":[]}