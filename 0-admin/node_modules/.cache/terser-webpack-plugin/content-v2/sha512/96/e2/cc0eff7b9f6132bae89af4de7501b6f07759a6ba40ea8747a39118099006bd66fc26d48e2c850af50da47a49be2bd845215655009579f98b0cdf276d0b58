{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-2d0c46a7\"],{\"3b79\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"5530\"),r=(n(\"caad\"),n(\"d9e2\"),n(\"d81d\"),n(\"b775\")),l={name:\"\",dicts:[\"def_status\"],data:function(){var e=this;return{coin:\"\",loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,configList:[],title:\"\",open:!1,queryParams:{id:null,pageNum:1,pageSize:10,secondId:null,period:null,maxAmount:null,minAmount:null,status:null,searchValue:null},form:{},rules:{period:[{required:!0,message:\"请输入周期\",trigger:\"blur\"},{validator:function(t,n,a){![\"coolcoinex\",\"dev\"].includes(e.VUE_APP_ENV)||3600<=n&&n%3600==0||n<3600?a():a(new Error(\"请输入3600的倍数\"))},trigger:\"blur\"}],minAmount:[{required:!0,message:\"请输入最小金额\",trigger:\"blur\"}],maxAmount:[{required:!0,message:\"请输入最大金额\",trigger:\"blur\"}]}}},created:function(){this.queryParams.secondId=this.$route.query.id,this.coin=this.$route.query.coin,this.getList()},mounted:function(){},methods:{getList:function(){var e,t=this;this.loading=!0,e=this.queryParams,Object(r.a)({url:\"/bussiness/period/list\",method:\"get\",params:e}).then((function(e){t.configList=e.rows,t.total=e.total,t.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,secondId:null,period:null,maxAmount:null,minAmount:null,status:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,searchValue:null,flag:null},this.resetForm(\"form\")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm(\"queryForm\"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.form={id:null,secondId:null,period:null,maxAmount:null,minAmount:null,status:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,searchValue:null,flag:!0},this.open=!0,this.title=\"添加周期配置\"},handleUpdate:function(e){var t=this;this.reset(),e=e.id||this.ids;e=e,Object(r.a)({url:\"/bussiness/period/\"+e,method:\"get\"}).then((function(e){t.form=e.data,t.open=!0,t.title=\"修改周期配置\"}))},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.secondId=e.$route.query.id,null!=e.form.id?(t=e.form,Object(r.a)({url:\"/bussiness/period\",method:\"put\",data:t}).then((function(t){e.$modal.msgSuccess(\"修改成功\"),e.open=!1,e.getList()}))):(t={flag:e.form.flag,maxAmount:e.form.maxAmount,minAmount:e.form.minAmount,odds:e.form.odds,period:e.form.period,secondId:e.$route.query.id},t=t,Object(r.a)({url:\"/bussiness/period\",method:\"post\",data:t}).then((function(t){e.$modal.msgSuccess(\"新增成功\"),e.open=!1,e.getList()}))))}))},handleDelete:function(e){var t=this,n=e.id||this.ids;this.$modal.confirm('是否确认删除秒合约币种周期配置编号为\"'+n+'\"的数据项？').then((function(){return e=n,Object(r.a)({url:\"/bussiness/period/\"+e,method:\"delete\"});var e})).then((function(){t.getList(),t.$modal.msgSuccess(\"删除成功\")})).catch((function(){}))},handleExport:function(){this.download(\"system/config/export\",Object(a.a)({},this.queryParams),\"config_\".concat((new Date).getTime(),\".xlsx\"))}}};n=n(\"2877\"),n=Object(n.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"SearchFormBox\",[n(\"el-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showSearch,expression:\"showSearch\"}],ref:\"queryForm\",attrs:{model:e.queryParams,size:\"small\",inline:!0,\"label-width\":\"68px\"}},[n(\"el-form-item\",{attrs:{label:\"周期 (秒)\",prop:\"period\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入周期\",clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleQuery(t)}},model:{value:e.queryParams.period,callback:function(t){e.$set(e.queryParams,\"period\",t)},expression:\"queryParams.period\"}})],1),n(\"el-form-item\",{attrs:{label:\"最大金额\",prop:\"maxAmount\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入最大金额\",clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleQuery(t)}},model:{value:e.queryParams.maxAmount,callback:function(t){e.$set(e.queryParams,\"maxAmount\",t)},expression:\"queryParams.maxAmount\"}})],1),n(\"el-form-item\",{attrs:{label:\"最小金额\",prop:\"minAmount\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入最小金额\",clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleQuery(t)}},model:{value:e.queryParams.minAmount,callback:function(t){e.$set(e.queryParams,\"minAmount\",t)},expression:\"queryParams.minAmount\"}})],1),n(\"el-form-item\",[n(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:e.handleQuery}},[e._v(\"搜索\")]),n(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetQuery}},[e._v(\"重置\")])],1)],1)],1),n(\"TableContentBox\",[n(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[n(\"el-col\",{attrs:{span:1.5}},[n(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"period:config:add\"],expression:\"['period:config:add']\"}],attrs:{type:\"primary\",plain:\"\",icon:\"el-icon-plus\",size:\"mini\"},on:{click:e.handleAdd}},[e._v(\"新增\")])],1),n(\"el-col\",{attrs:{span:1.5}},[n(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"period:config:remove\"],expression:\"['period:config:remove']\"}],attrs:{type:\"danger\",plain:\"\",icon:\"el-icon-delete\",size:\"mini\",disabled:e.multiple},on:{click:e.handleDelete}},[e._v(\"删除\")])],1),n(\"right-toolbar\",{attrs:{showSearch:e.showSearch},on:{\"update:showSearch\":function(t){e.showSearch=t},\"update:show-search\":function(t){e.showSearch=t},queryTable:e.getList}})],1),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{height:\"calc(100vh - 360px)\",border:\"\",data:e.configList},on:{\"selection-change\":e.handleSelectionChange}},[n(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),n(\"el-table-column\",{attrs:{label:\"币种\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"p\",[e._v(e._s(e.coin))])]}}])}),n(\"el-table-column\",{attrs:{label:\"周期 (秒)\",align:\"center\",prop:\"period\"}}),n(\"el-table-column\",{attrs:{label:\"最大金额\",align:\"center\",prop:\"maxAmount\"}}),n(\"el-table-column\",{attrs:{label:\"最小金额\",align:\"center\",prop:\"minAmount\"}}),n(\"el-table-column\",{attrs:{label:\"赔率\",align:\"center\",prop:\"odds\"}}),n(\"el-table-column\",{attrs:{label:\"状态\",align:\"center\",prop:\"flag\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[0==t.row.flag?n(\"el-tag\",{attrs:{type:\"info\",size:\"mini\",plain:\"\"}},[e._v(\" 本金按比例输 \")]):1==t.row.flag?n(\"el-tag\",{attrs:{type:\"warning\",size:\"mini\",plain:\"\"}},[e._v(\" 本金全输 \")]):e._e()]}}])}),n(\"el-table-column\",{attrs:{label:\"备注\",align:\"center\",prop:\"remark\"}}),n(\"el-table-column\",{attrs:{fixed:\"right\",label:\"操作\",align:\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"period:config:edit\"],expression:\"['period:config:edit']\"}],attrs:{size:\"small\",type:\"pramiary\",plain:\"\"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v(\"修改\")]),n(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"period:config:remove\"],expression:\"['period:config:remove']\"}],attrs:{size:\"small\",type:\"danger\",plain:\"\"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v(\"删除\")])]}}])})],1),n(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:0<e.total,expression:\"total > 0\"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{\"update:page\":function(t){return e.$set(e.queryParams,\"pageNum\",t)},\"update:limit\":function(t){return e.$set(e.queryParams,\"pageSize\",t)},pagination:e.getList}})],1),n(\"el-dialog\",{attrs:{title:e.title,visible:e.open,width:\"500px\",\"append-to-body\":\"\"},on:{\"update:visible\":function(t){e.open=t}}},[n(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"120px\"}},[n(\"el-form-item\",{attrs:{label:\"周期 (秒)\",prop:\"period\"}},[n(\"el-input\",{attrs:{type:\"number\",placeholder:\"请输入时间周期  单位：秒\"},model:{value:e.form.period,callback:function(t){e.$set(e.form,\"period\",t)},expression:\"form.period\"}})],1),n(\"el-form-item\",{attrs:{label:\"最小金额\",prop:\"minAmount\"}},[n(\"el-input\",{attrs:{type:\"number\",placeholder:\"请输入最小金额\"},model:{value:e.form.minAmount,callback:function(t){e.$set(e.form,\"minAmount\",t)},expression:\"form.minAmount\"}})],1),n(\"el-form-item\",{attrs:{label:\"最大金额\",prop:\"maxAmount\"}},[n(\"el-input\",{attrs:{type:\"number\",placeholder:\"请输入最大金额\"},model:{value:e.form.maxAmount,callback:function(t){e.$set(e.form,\"maxAmount\",t)},expression:\"form.maxAmount\"}})],1),n(\"el-form-item\",{attrs:{label:\"赔率\",prop:\"odds\"}},[n(\"el-input\",{attrs:{type:\"number\",placeholder:\"请输入赔率\"},model:{value:e.form.odds,callback:function(t){e.$set(e.form,\"odds\",t)},expression:\"form.odds\"}})],1),n(\"el-form-item\",{attrs:{label:\"赔偿方式\",prop:\"flag\"}},[n(\"el-radio-group\",{model:{value:e.form.flag,callback:function(t){e.$set(e.form,\"flag\",t)},expression:\"form.flag\"}},[n(\"el-radio\",{attrs:{label:!0}},[e._v(\"本金全输\")]),n(\"el-radio\",{attrs:{label:!1}},[e._v(\"本金按比例输\")])],1)],1)],1),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(\"确 定\")]),n(\"el-button\",{on:{click:e.cancel}},[e._v(\"取 消\")])],1)],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}