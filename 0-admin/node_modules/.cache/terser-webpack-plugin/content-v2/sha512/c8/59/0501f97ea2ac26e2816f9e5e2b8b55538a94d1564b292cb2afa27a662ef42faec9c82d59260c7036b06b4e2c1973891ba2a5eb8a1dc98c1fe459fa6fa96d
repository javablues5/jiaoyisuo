{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-f0896ff6\"],{c045:function(t,e,a){},e7cd:function(t,e,a){\"use strict\";a(\"c045\")},f21d:function(t,e,a){\"use strict\";a.r(e);var s=a(\"5530\"),n=(a(\"a9e3\"),a(\"d81d\"),a(\"b775\")),r={name:\"CompensationDetail\",props:{batchId:{type:Number,required:!0}},data:function(){return{loading:!0,ids:[],multiple:!0,total:0,detailList:[],statistics:{},queryParams:{pageNum:1,pageSize:10,userId:null,orderNo:null,status:null}}},created:function(){this.getList(),this.getStatistics()},methods:{getList:function(){var t,e,a=this;this.loading=!0,t=this.batchId,e=this.queryParams,Object(n.a)({url:\"/bussiness/compensation/detail/batch/\"+t,method:\"get\",params:e}).then((function(t){a.detailList=t.rows,a.total=t.total,a.loading=!1}))},getStatistics:function(){var t,e=this;t=this.batchId,Object(n.a)({url:\"/bussiness/compensation/detail/statistics/\"+t,method:\"get\"}).then((function(t){e.statistics=t.data}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm(\"queryForm\"),this.handleQuery()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.multiple=!t.length},handleRetry:function(){var t=this,e=this.ids;this.$modal.confirm(\"确认重试选中的补偿记录？\").then((function(){return t=e,Object(n.a)({url:\"/bussiness/compensation/detail/retry\",method:\"post\",data:t});var t})).then((function(){t.getList(),t.getStatistics(),t.$modal.msgSuccess(\"重试补偿成功\")})).catch((function(){}))},handleExport:function(){this.download(\"bussiness/compensation/detail/export\",Object(s.a)({batchId:this.batchId},this.queryParams),\"compensation_detail_\".concat((new Date).getTime(),\".xlsx\"))}}};a(\"e7cd\"),a=a(\"2877\"),a=Object(a.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:20}},[a(\"el-col\",{attrs:{span:6}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"span\",[t._v(\"总数\")])]),a(\"div\",{staticClass:\"statistic-number\"},[t._v(t._s(t.statistics.total||0))])])],1),a(\"el-col\",{attrs:{span:6}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"span\",[t._v(\"待补偿\")])]),a(\"div\",{staticClass:\"statistic-number text-warning\"},[t._v(t._s(t.statistics.pending||0))])])],1),a(\"el-col\",{attrs:{span:6}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"span\",[t._v(\"已补偿\")])]),a(\"div\",{staticClass:\"statistic-number text-success\"},[t._v(t._s(t.statistics.success||0))])])],1),a(\"el-col\",{attrs:{span:6}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"span\",[t._v(\"补偿失败\")])]),a(\"div\",{staticClass:\"statistic-number text-danger\"},[t._v(t._s(t.statistics.failed||0))])])],1)],1),a(\"el-form\",{ref:\"queryForm\",attrs:{model:t.queryParams,size:\"small\",inline:!0,\"label-width\":\"68px\"}},[a(\"el-form-item\",{attrs:{label:\"用户ID\",prop:\"userId\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入用户ID\",clearable:\"\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleQuery(e)}},model:{value:t.queryParams.userId,callback:function(e){t.$set(t.queryParams,\"userId\",e)},expression:\"queryParams.userId\"}})],1),a(\"el-form-item\",{attrs:{label:\"订单号\",prop:\"orderNo\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入订单号\",clearable:\"\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleQuery(e)}},model:{value:t.queryParams.orderNo,callback:function(e){t.$set(t.queryParams,\"orderNo\",e)},expression:\"queryParams.orderNo\"}})],1),a(\"el-form-item\",{attrs:{label:\"状态\",prop:\"status\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择状态\",clearable:\"\"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,\"status\",e)},expression:\"queryParams.status\"}},[a(\"el-option\",{attrs:{label:\"待补偿\",value:\"0\"}}),a(\"el-option\",{attrs:{label:\"已补偿\",value:\"1\"}}),a(\"el-option\",{attrs:{label:\"补偿失败\",value:\"2\"}})],1)],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:t.handleQuery}},[t._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:t.resetQuery}},[t._v(\"重置\")])],1)],1),a(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"bussiness:compensation:detail:retry\"],expression:\"['bussiness:compensation:detail:retry']\"}],attrs:{type:\"warning\",plain:\"\",icon:\"el-icon-refresh\",size:\"mini\",disabled:t.multiple},on:{click:t.handleRetry}},[t._v(\"重试补偿\")])],1),a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{directives:[{name:\"hasPermi\",rawName:\"v-hasPermi\",value:[\"bussiness:compensation:detail:export\"],expression:\"['bussiness:compensation:detail:export']\"}],attrs:{type:\"warning\",plain:\"\",icon:\"el-icon-download\",size:\"mini\"},on:{click:t.handleExport}},[t._v(\"导出\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{data:t.detailList},on:{\"selection-change\":t.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),a(\"el-table-column\",{attrs:{label:\"订单ID\",align:\"center\",prop:\"orderId\"}}),a(\"el-table-column\",{attrs:{label:\"订单号\",align:\"center\",prop:\"orderNo\",\"show-overflow-tooltip\":\"\"}}),a(\"el-table-column\",{attrs:{label:\"用户ID\",align:\"center\",prop:\"userId\"}}),a(\"el-table-column\",{attrs:{label:\"用户名\",align:\"center\",prop:\"loginName\"}}),a(\"el-table-column\",{attrs:{label:\"交易对\",align:\"center\",prop:\"symbol\"}}),a(\"el-table-column\",{attrs:{label:\"投注金额\",align:\"center\",prop:\"betAmount\"}}),a(\"el-table-column\",{attrs:{label:\"补偿金额\",align:\"center\",prop:\"compensationAmount\"}}),a(\"el-table-column\",{attrs:{label:\"补偿比例\",align:\"center\",prop:\"compensationRate\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._v(\" \"+t._s((100*e.row.compensationRate).toFixed(2))+\"% \")]}}])}),a(\"el-table-column\",{attrs:{label:\"状态\",align:\"center\",prop:\"status\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[0===e.row.status?a(\"el-tag\",{attrs:{type:\"warning\"}},[t._v(\"待补偿\")]):1===e.row.status?a(\"el-tag\",{attrs:{type:\"success\"}},[t._v(\"已补偿\")]):2===e.row.status?a(\"el-tag\",{attrs:{type:\"danger\"}},[t._v(\"补偿失败\")]):t._e()]}}])}),a(\"el-table-column\",{attrs:{label:\"补偿时间\",align:\"center\",prop:\"compensationTime\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[e.row.compensationTime?a(\"span\",[t._v(t._s(t.parseTime(e.row.compensationTime,\"{y}-{m}-{d} {h}:{i}:{s}\")))]):a(\"span\",[t._v(\"-\")])]}}])}),a(\"el-table-column\",{attrs:{label:\"错误信息\",align:\"center\",prop:\"errorMsg\",\"show-overflow-tooltip\":\"\"}})],1),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:0<t.total,expression:\"total>0\"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{\"update:page\":function(e){return t.$set(t.queryParams,\"pageNum\",e)},\"update:limit\":function(e){return t.$set(t.queryParams,\"pageSize\",e)},pagination:t.getList}})],1)}),[],!1,null,\"955af0d4\",null);e.default=a.exports}}]);","extractedComments":[]}