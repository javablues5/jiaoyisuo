{"remainingRequest":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/src/views/bussiness/trade-robot/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/src/views/bussiness/trade-robot/index.vue","mtime":1698845798713},{"path":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/javanew/echo2.0-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVGltZUZvcm1hdGVyIGZyb20gInRpbWUtZm9ybWF0ZXIiOw0KaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICJlY2hhcnRzIjsNCmltcG9ydCB7DQogIGdlbmVyYXRlVGltZUxpc3QsDQogIGdldEtMaW5lWVJhbmRvbUxpc3QsDQogIGRpc3RyaWJ1dGVNaW51dGVzLA0KICBnZXRNb2NrS0xpbmVPcHRpb24sDQp9IGZyb20gIi4vdXRpbCI7DQppbXBvcnQgeyBfdG9GaXhlZCwgX2RpdiwgX211bCB9IGZyb20gIi4vZGVjaW1hbCI7DQppbXBvcnQgew0KICBnZXRTeW1ib2xMaXN0QXBpLA0KICBzYXZlVHJhZGVSb2JvdEFwaSwNCiAgZ2V0RGV0YWlsQXBpLA0KICB1cGRhdGVEZXRhaWxBcGksDQp9IGZyb20gIkAvYXBpL2J1c3NpbmVzcy90cmFkZS1yb2JvdC5qcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJUcmFkZVJvYm90IiwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZXRhaWw6IG51bGwsDQogICAgICAvLyDljoblj7JpZA0KICAgICAgaWQ6IG51bGwsDQogICAgICAvLyDnsbvlnosgcHJpdmlldyB1cGRhdGUNCiAgICAgIHR5cGU6IG51bGwsDQogICAgICAvLyDmjqfnm5jnrZbnlaXliJfooagNCiAgICAgIG1vZGVsTGlzdDogWw0KICAgICAgICB7IHZhbHVlOiAwLCBsYWJlbDogIui3n+maj+Wei+i2i+WKvyIgfSwNCiAgICAgICAgLy8geyB2YWx1ZTogMSwgbGFiZWw6ICLoh6rlrprkuYnotovlir8iIH0sDQogICAgICAgIHsgdmFsdWU6IDIsIGxhYmVsOiAi56eS5p2A5Z6L6LaL5Yq/IiB9LA0KICAgICAgXSwNCiAgICAgIC8vIOW4geenjeWIl+ihqA0KICAgICAgc3ltYm9sTGlzdDogW10sDQogICAgICAvLyDooajljZUNCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBzeW1ib2w6IHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLluIHnp43kuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgIH0sDQogICAgICAvLyDmgLvliIbpkp/mlbANCiAgICAgIHRvdGFsTWludXRlczogMCwNCiAgICAgIC8vIOWfuuehgOeykuW6pg0KICAgICAgZ3JhbnVsYXJpdHk6IDE1LA0KICAgICAgLy8gWOi9tOaXtumXtA0KICAgICAgeFRpbWVTY2FsZUxpc3Q6IFtdLA0KICAgICAgLy8gWei9tOiuoeeul+avlOS+iw0KICAgICAgeVJhbmRvbUxpc3Q6IFtdLA0KICAgICAgLy8g5Zu+6KGo5a6e5L6LDQogICAgICBsaW5lQ2hhcnQ6IG51bGwsDQogICAgICAvLyDlm77ooajlrp7kvosNCiAgICAgIEtMaW5lQ2hhcnQ6IG51bGwsDQogICAgICAvKioNCiAgICAgICAqIGvnur/pooTlpITnkIbmlbDmja4NCiAgICAgICAqLw0KICAgICAga2xpbmVZUmFuZG9tTGlzdDogW10sDQogICAgICAvKioNCiAgICAgICAqIGvnur/mlbDmja4NCiAgICAgICAqLw0KICAgICAga2xpbmVNb2NrWURhdGE6IFtdLA0KDQogICAgICBwaWNrZXJPcHRpb25zOiB7DQogICAgICAgIC8v6K6+572u56aB55So54q25oCB77yM5Y+C5pWw5Li65b2T5YmN5pel5pyfDQogICAgICAgIGRpc2FibGVkRGF0ZSh0aW1lKSB7DQogICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpIDwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMDsgLy8gIC0gODY0MDAwMDDmmK/lkKbljIXmi6zlvZPlpKkNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvKioNCiAgICAgKiDnrZbnlaXkv6Hmga8NCiAgICAgKi8NCiAgICBtb2RlbEluZm8oKSB7DQogICAgICByZXR1cm4gdGhpcy5tb2RlbExpc3QuZmluZCgNCiAgICAgICAgKGVsZW0pID0+IGVsZW0udmFsdWUgPT0gKHRoaXMuZm9ybT8ubW9kZWwgfHwgMCkNCiAgICAgICk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDmjqfliLbnspLluqbliJfooagNCiAgICAgKi8NCiAgICBncmFudWxhcml0eUxpc3QoKSB7DQogICAgICBsZXQgdGVtcExpc3QgPSBbDQogICAgICAgIHsgdmFsdWU6IDE1LCBsYWJlbDogIjE15YiG6ZKfIiB9LA0KICAgICAgICB7IHZhbHVlOiAzMCwgbGFiZWw6ICIzMOWIhumSnyIgfSwNCiAgICAgICAgeyB2YWx1ZTogNjAsIGxhYmVsOiAiMeWwj+aXtiIgfSwNCiAgICAgICAgeyB2YWx1ZTogMTIwLCBsYWJlbDogIjLlsI/ml7YiIH0sDQogICAgICAgIHsgdmFsdWU6IDI0MCwgbGFiZWw6ICI05bCP5pe2IiB9LA0KICAgICAgXTsNCg0KICAgICAgaWYgKHRoaXMuZm9ybS5tb2RlbCA9PSAyKSB7DQogICAgICAgIC8vIOenkuadgOWei+i2i+WKvw0KICAgICAgICB0ZW1wTGlzdCA9IFsNCiAgICAgICAgICB7IHZhbHVlOiAxLCBsYWJlbDogIjHliIbpkp8iIH0sDQogICAgICAgICAgeyB2YWx1ZTogNSwgbGFiZWw6ICI15YiG6ZKfIiB9LA0KICAgICAgICAgIHsgdmFsdWU6IDEwLCBsYWJlbDogIjEw5YiG6ZKfIiB9LA0KICAgICAgICAgIHsgdmFsdWU6IDE1LCBsYWJlbDogIjE15YiG6ZKfIiB9LA0KICAgICAgICBdOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRlbXBMaXN0Ow0KICAgIH0sDQogICAgLyoqDQogICAgICog5piv5ZCm5Li66aKE6KeIDQogICAgICovDQogICAgaXNQcml2aWV3KCkgew0KICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PSAicHJpdmlldyI7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDmmK/lkKbkuLrkv67mlLkNCiAgICAgKi8NCiAgICBpc1VwZGF0ZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnR5cGUgPT0gInVwZGF0ZSI7DQogICAgfSwNCiAgfSwNCiAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICBhd2FpdCB0aGlzLmdldFN5bWJvbExpc3QoKTsNCiAgICB0aGlzLmlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQgfHwgbnVsbDsNCiAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlIHx8IG51bGw7DQogICAgaWYgKHRoaXMuaWQpIHsNCiAgICAgIHRoaXMuZ2V0RGV0YWlsKCk7DQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLnJlc2l6ZSk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqDQogICAgICog6I635Y+W5pWw5o2u6K+m5oOFDQogICAgICovDQogICAgYXN5bmMgZ2V0RGV0YWlsKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0RGV0YWlsQXBpKHRoaXMuaWQpOw0KICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICBsZXQgdGVtcERhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgdGhpcy5kZXRhaWwgPSB0ZW1wRGF0YTsNCiAgICAgICAgaWYgKCF0aGlzLnN5bWJvbExpc3Quc29tZSgoZWxlbSkgPT4gZWxlbS5zeW1ib2wgPT0gdGVtcERhdGEuc3ltYm9sKSkgew0KICAgICAgICAgIHRlbXBEYXRhLnN5bWJvbCA9ICIiOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgICBkZWNsaW5lOiB0ZW1wRGF0YS5kZWNsaW5lLA0KICAgICAgICAgIGluY3JlYXNlOiB0ZW1wRGF0YS5pbmNyZWFzZSwNCiAgICAgICAgICBncmFudWxhcml0eTogdGVtcERhdGEuZ3JhbnVsYXJpdHksDQogICAgICAgICAgbW9kZWw6IHRlbXBEYXRhLm1vZGVsLA0KICAgICAgICAgIGNvblByaWNlOiB0ZW1wRGF0YS5jb25QcmljZSwNCiAgICAgICAgICBwcmljZVBlbmNlbnQ6IHRlbXBEYXRhLnByaWNlUGVuY2VudCwNCiAgICAgICAgICBzeW1ib2w6IHRlbXBEYXRhLnN5bWJvbCwNCiAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSh0ZW1wRGF0YS5iZWdpblRpbWUpLA0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLmtsaW5lTW9ja1lEYXRhID0gdGVtcERhdGEuYm90SW5mb0xpc3QubWFwKChlbGVtKSA9PiB7DQogICAgICAgICAgdGhpcy5rbGluZVlSYW5kb21MaXN0W2VsZW0ueF0gPSBlbGVtLnk7DQogICAgICAgICAgcmV0dXJuIFtlbGVtLm9wZW4sIGVsZW0uY2xvc2UsIGVsZW0uaGlnaCwgZWxlbS5sb3ddOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5ncmFudWxhcml0eSA9IHRoaXMuZ3JhbnVsYXJpdHlMaXN0WzBdLnZhbHVlOw0KDQogICAgICAgIGlmICh0ZW1wRGF0YS5tb2RlbCA9PSAyKSB7DQogICAgICAgICAgdGhpcy50b3RhbE1pbnV0ZXMgPSA2MDsNCiAgICAgICAgICB0aGlzLnhUaW1lU2NhbGVMaXN0ID0gZ2VuZXJhdGVUaW1lTGlzdCgNCiAgICAgICAgICAgIHRoaXMuZm9ybS50aW1lLA0KICAgICAgICAgICAgdGhpcy5ncmFudWxhcml0eSwNCiAgICAgICAgICAgIHRoaXMudG90YWxNaW51dGVzDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnlSYW5kb21MaXN0ID0gSlNPTi5wYXJzZSh0ZW1wRGF0YS5saW5lQ2hhcnREYXRhKTsNCiAgICAgICAgdGhpcy5kcmF3TGluZSgpOw0KICAgICAgICB0aGlzLmRyYXdLTGluZSgpOw0KICAgICAgICB0aGlzLktMaW5lUGVydmlldyh7DQogICAgICAgICAgc2VyaWVzOiBbeyBkYXRhOiB0aGlzLmtsaW5lTW9ja1lEYXRhIH1dLA0KICAgICAgICAgIHhBeGlzOiB0aGlzLnhUaW1lU2NhbGVMaXN0LA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOaPkOS6pA0KICAgICAqLw0KICAgIGFzeW5jIHN1Ym1pdCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLooajljZXmlbDmja4iLCB0aGlzLmZvcm0pOw0KICAgICAgY29uc29sZS5sb2coIkvnur/mlbDmja4gb3BlbiwgY2xvc2UsIGhpZ2gsIGxvdyIsIHRoaXMua2xpbmVNb2NrWURhdGEpOw0KICAgICAgY29uc29sZS5sb2coDQogICAgICAgICJL57q/5pWw5o2uIOaXtumXtCIsDQogICAgICAgIHRoaXMua2xpbmVZUmFuZG9tTGlzdCwNCiAgICAgICAgdGhpcy5mb3JtLnRpbWUuZ2V0VGltZSgpDQogICAgICApOw0KICAgICAgbGV0IHRlbXBCb3RJbmZvTGlzdCA9IFtdOw0KICAgICAgdGhpcy5mb3JtLnRpbWUuc2V0U2Vjb25kcygwKTsNCiAgICAgIHRoaXMuZm9ybS50aW1lLnNldE1pbGxpc2Vjb25kcygwKTsNCg0KICAgICAgbGV0IG5vd0RhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgbm93RGF0ZS5zZXRTZWNvbmRzKDApOw0KICAgICAgbm93RGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7DQoNCiAgICAgIGxldCB0aW1lID0gdGhpcy5mb3JtLnRpbWUuZ2V0VGltZSgpOw0KICAgICAgLy8gaWYgKA0KICAgICAgLy8gICBbMl0uaW5jbHVkZXModGhpcy5mb3JtLm1vZGVsKSAmJg0KICAgICAgLy8gICB0aW1lIDwgbm93RGF0ZS5nZXRUaW1lKCkgKyAxMjAgKiAxMDAwDQogICAgICAvLyApIHsNCiAgICAgIC8vICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+WwhuaOp+ebmOaXtumXtOiuvue9ruS4uiDlvZPliY3ml7bpl7QgKyDkuKTliIbpkp8iKTsNCiAgICAgIC8vICAgcmV0dXJuOw0KICAgICAgLy8gfQ0KICAgICAgaWYgKFsxLCAyXS5pbmNsdWRlcyh0aGlzLmZvcm0ubW9kZWwpKSB7DQogICAgICAgIHRlbXBCb3RJbmZvTGlzdCA9IE9iamVjdC5rZXlzKHRoaXMua2xpbmVZUmFuZG9tTGlzdCkubWFwKA0KICAgICAgICAgIChlbGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgeDogZWxlbSwNCiAgICAgICAgICAgICAgeTogYCR7dGhpcy5rbGluZVlSYW5kb21MaXN0W2luZGV4XX1gLA0KDQogICAgICAgICAgICAgIGRhdGVUaW1lOiB0aW1lICsgZWxlbSAqIHRoaXMuZm9ybS5ncmFudWxhcml0eSAqIDYwICogMTAwMCwNCiAgICAgICAgICAgICAgb3BlbjogdGhpcy5rbGluZU1vY2tZRGF0YVtpbmRleF1bMF0sDQogICAgICAgICAgICAgIGNsb3NlOiB0aGlzLmtsaW5lTW9ja1lEYXRhW2luZGV4XVsxXSwNCiAgICAgICAgICAgICAgaGlnaDogdGhpcy5rbGluZU1vY2tZRGF0YVtpbmRleF1bMl0sDQogICAgICAgICAgICAgIGxvdzogdGhpcy5rbGluZU1vY2tZRGF0YVtpbmRleF1bM10sDQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIC8vIOacgOWkp+i3jOW5hQ0KICAgICAgICBkZWNsaW5lOiB0aGlzLmZvcm0ucHJpY2VQZW5jZW50LA0KICAgICAgICAvLyDmnIDlpKfmtqjluYUNCiAgICAgICAgaW5jcmVhc2U6IHRoaXMuZm9ybS5wcmljZVBlbmNlbnQsDQogICAgICAgIC8vIOaOp+WItueykuW6pg0KICAgICAgICBncmFudWxhcml0eTogIiIsDQogICAgICAgIC8vIOaOp+ebmOetlueVpSAwIOi3n+maj+WeiyAxIOiHquWumuS5iSAyIOenkuadgOWeiw0KICAgICAgICBtb2RlbDogdGhpcy5mb3JtLm1vZGVsLA0KICAgICAgICAvLyDmta7liqjku7fmoLwgIG1vZGVs5Li6IDAg5pe25pyJ5pWIDQogICAgICAgIGNvblByaWNlOiB0aGlzLmZvcm0uY29uUHJpY2UsDQogICAgICAgIC8vIOa1ruWKqOavlOS+iw0KICAgICAgICBwcmljZVBlbmNlbnQ6IHRoaXMuZm9ybS5wcmljZVBlbmNlbnQsDQogICAgICAgIC8vIOS6pOaYk+WvuQ0KICAgICAgICBzeW1ib2w6IHRoaXMuZm9ybS5zeW1ib2wsDQogICAgICAgIC8vIOW8gOWni+aXtumXtA0KICAgICAgICBiZWdpblRpbWU6IHRpbWUsDQogICAgICAgIC8vIOe7k+adn+aXtumXtA0KICAgICAgICBlbmRUaW1lOiAiIiwNCiAgICAgICAgLy8g6LaL5Yq/5YiX6KGoDQogICAgICAgIGJvdEluZm9MaXN0OiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgY2xvc2U6IDAsDQogICAgICAgICAgICBkYXRlVGltZTogdGltZSwNCiAgICAgICAgICAgIGhpZ2g6IDAsDQogICAgICAgICAgICBsb3c6IDAsDQogICAgICAgICAgICBvcGVuOiAwLA0KICAgICAgICAgICAgeDogIjAiLA0KICAgICAgICAgICAgeTogIjAiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIC8vIOWbvuihqOWIu+W6puaVsOaNrg0KICAgICAgICBsaW5lQ2hhcnREYXRhOiAiW10iLA0KICAgICAgfTsNCiAgICAgIGlmIChbMSwgMl0uaW5jbHVkZXModGhpcy5mb3JtLm1vZGVsKSkgew0KICAgICAgICAvLyDmnIDlpKfot4zluYUNCiAgICAgICAgcGFyYW1zLmRlY2xpbmUgPSB0aGlzLmZvcm0uZGVjbGluZTsNCiAgICAgICAgLy8g5pyA5aSn5rao5bmFDQogICAgICAgIHBhcmFtcy5pbmNyZWFzZSA9IHRoaXMuZm9ybS5pbmNyZWFzZTsNCiAgICAgICAgLy8g5o6n5Yi257KS5bqmDQogICAgICAgIHBhcmFtcy5ncmFudWxhcml0eSA9IHRoaXMuZm9ybS5ncmFudWxhcml0eTsNCiAgICAgICAgLy8g5byA5aeL5pe26Ze0DQogICAgICAgIHBhcmFtcy5iZWdpblRpbWUgPSB0ZW1wQm90SW5mb0xpc3RbMF0uZGF0ZVRpbWU7DQogICAgICAgIC8vIOe7k+adn+aXtumXtA0KICAgICAgICBwYXJhbXMuZW5kVGltZSA9IHRlbXBCb3RJbmZvTGlzdFt0ZW1wQm90SW5mb0xpc3QubGVuZ3RoIC0gMV0uZGF0ZVRpbWU7DQogICAgICAgIC8vIOi2i+WKv+WIl+ihqA0KICAgICAgICBwYXJhbXMuYm90SW5mb0xpc3QgPSB0ZW1wQm90SW5mb0xpc3Q7DQogICAgICAgIC8vIOWbvuihqOWIu+W6puaVsOaNrg0KICAgICAgICBwYXJhbXMubGluZUNoYXJ0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMueVJhbmRvbUxpc3QpOw0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2cocGFyYW1zKTsNCiAgICAgIGlmICh0aGlzLmZvcm0uc3ltYm9sID09ICIiKSB7DQogICAgICAgIHRoaXMuJG1vZGFsLm1zZ0Vycm9yKCLkuqTmmJPlr7nkuI3og73kuLrnqboiKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaWQpIHsNCiAgICAgICAgLy8g5L+u5pS5DQogICAgICAgIHBhcmFtcy5pZCA9IHRoaXMuaWQ7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHVwZGF0ZURldGFpbEFwaShwYXJhbXMpOw0KICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsNCiAgICAgICAgICAvLyDmjqfnm5jnrZbnlaUgMCDot5/pmo/lnosgMSDoh6rlrprkuYkgMiDnp5LmnYDlnosNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLm1vZGVsID09IDApIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5jb25QcmljZSA9ICIiOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnJlc2V0KCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ0Vycm9yKHJlcy5tc2cpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzYXZlVHJhZGVSb2JvdEFwaShwYXJhbXMpOw0KICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsNCiAgICAgICAgICAvLyDmjqfnm5jnrZbnlaUgMCDot5/pmo/lnosgMSDoh6rlrprkuYkgMiDnp5LmnYDlnosNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLm1vZGVsID09IDApIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5jb25QcmljZSA9ICIiOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnJlc2V0KCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ0Vycm9yKHJlcy5tc2cpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDnm5HlkKznspLluqbmlLnlj5gNCiAgICAgKi8NCiAgICBvbk1vZGVsQ2hhbmdlKHZhbCkgew0KICAgICAgLy8gY29uc29sZS5sb2coIuebkeWQrOeykuW6puaUueWPmCIsIHZhbCk7DQogICAgICBpZiAoWzEsIDJdLmluY2x1ZGVzKHZhbCkpIHsNCiAgICAgICAgdGhpcy5ncmFudWxhcml0eSA9IHRoaXMuZ3JhbnVsYXJpdHlMaXN0WzBdLnZhbHVlOw0KICAgICAgICB0aGlzLmZvcm0uZ3JhbnVsYXJpdHkgPSB0aGlzLmdyYW51bGFyaXR5Ow0KICAgICAgICB0aGlzLnByaWNlUGVuY2VudCA9IDU7DQogICAgICB9DQoNCiAgICAgIGlmICh2YWwgPT0gMikgew0KICAgICAgICB0aGlzLnRvdGFsTWludXRlcyA9IDYwOw0KICAgICAgICB0aGlzLnhUaW1lU2NhbGVMaXN0ID0gZ2VuZXJhdGVUaW1lTGlzdCgNCiAgICAgICAgICB0aGlzLmZvcm0udGltZSwNCiAgICAgICAgICB0aGlzLmdyYW51bGFyaXR5LA0KICAgICAgICAgIHRoaXMudG90YWxNaW51dGVzDQogICAgICAgICk7DQogICAgICAgIHRoaXMuZHJhd0xpbmUoKTsNCiAgICAgICAgdGhpcy5kcmF3S0xpbmUoKTsNCiAgICAgICAgdGhpcy5LTGluZVBlcnZpZXcoKTsNCiAgICAgIH0gZWxzZSBpZiAodmFsID09IDEpIHsNCiAgICAgICAgdGhpcy50b3RhbE1pbnV0ZXMgPSAxICogMjQgKiA2MDsNCiAgICAgICAgdGhpcy54VGltZVNjYWxlTGlzdCA9IGdlbmVyYXRlVGltZUxpc3QoDQogICAgICAgICAgdGhpcy5mb3JtLnRpbWUsDQogICAgICAgICAgdGhpcy5ncmFudWxhcml0eQ0KICAgICAgICApOw0KICAgICAgICB0aGlzLmRyYXdMaW5lKCk7DQogICAgICAgIHRoaXMuZHJhd0tMaW5lKCk7DQogICAgICAgIHRoaXMuS0xpbmVQZXJ2aWV3KCk7DQogICAgICB9IGVsc2UgaWYgKHZhbCA9PSAwKSB7DQogICAgICAgIHRoaXMucmVzZXRGb3JtKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmZvcm0ubW9kZWwgPSB2YWw7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqDQogICAgICog5YWF5YC86KGo5Y2VDQogICAgICovDQogICAgcmVzZXRGb3JtKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgIC8vIOS6pOaYk+WvuQ0KICAgICAgICBzeW1ib2w6ICIiLA0KICAgICAgICAvLyDmqKHlvI8NCiAgICAgICAgbW9kZWw6IDIsDQogICAgICAgIC8vIOaooeaLn+aXtumXtA0KICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLA0KICAgICAgICAvLyDmnIDlpKfmtqjluYUNCiAgICAgICAgaW5jcmVhc2U6IDUsDQogICAgICAgIC8vIOacgOWkp+i3jOW5hQ0KICAgICAgICBkZWNsaW5lOiA1LA0KICAgICAgICAvLyDmjqfliLbnspLluqYNCiAgICAgICAgZ3JhbnVsYXJpdHk6IDE1LA0KICAgICAgICAvLyDmta7liqjku7fmoLwNCiAgICAgICAgY29uUHJpY2U6IDAsDQogICAgICAgIC8vIOS7t+agvOa1ruWKqOavlOS+iw0KICAgICAgICBwcmljZVBlbmNlbnQ6IDUsDQogICAgICB9Ow0KICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOmHjee9ruihqOWNlQ0KICAgICAqLw0KICAgIHJlc2V0KCkgew0KICAgICAgaWYgKHRoaXMubGluZUNoYXJ0KSB7DQogICAgICAgIHRoaXMubGluZUNoYXJ0LmRpc3Bvc2UoKTsNCiAgICAgICAgdGhpcy5saW5lQ2hhcnQgPSBudWxsOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuS0xpbmVDaGFydCkgew0KICAgICAgICB0aGlzLktMaW5lQ2hhcnQuZGlzcG9zZSgpOw0KICAgICAgICB0aGlzLktMaW5lQ2hhcnQgPSBudWxsOw0KICAgICAgfQ0KICAgICAgdGhpcy5yZXNldEZvcm0oKTsNCiAgICAgIHRoaXMuaWQgPSBudWxsOw0KICAgICAgdGhpcy50eXBlID0gbnVsbDsNCiAgICAgIHRoaXMuZGV0YWlsID0gbnVsbDsNCiAgICAgIC8vIOaAu+WIhumSn+aVsA0KICAgICAgdGhpcy50b3RhbE1pbnV0ZXMgPSAxICogMjQgKiA2MDsNCiAgICAgIC8vIOWfuuehgOeykuW6pg0KICAgICAgdGhpcy5ncmFudWxhcml0eSA9IDE1Ow0KICAgICAgLy8gWOi9tOaXtumXtA0KICAgICAgdGhpcy54VGltZVNjYWxlTGlzdCA9IFtdOw0KICAgICAgLy8gWei9tOiuoeeul+avlOS+iw0KICAgICAgdGhpcy55UmFuZG9tTGlzdCA9IFtdOw0KICAgICAgLy8gS+e6v+iuoeeul+absue6v+avlOS+iw0KICAgICAgdGhpcy5rbGluZVlSYW5kb21MaXN0ID0gW107DQogICAgICAvLyBL57q/5qih5ouf5pWw5o2uDQogICAgICB0aGlzLmtsaW5lTW9ja1lEYXRhID0gW107DQogICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodGhpcy5mb3JtLm1vZGVsKTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOmihOiniA0KICAgICAqLw0KICAgIEtMaW5lUGVydmlldyhvcHRpb24pIHsNCiAgICAgIGlmICghb3B0aW9uKSB7DQogICAgICAgIG9wdGlvbiA9IGdldE1vY2tLTGluZU9wdGlvbigNCiAgICAgICAgICB0aGlzLnhUaW1lU2NhbGVMaXN0LA0KICAgICAgICAgIHRoaXMua2xpbmVZUmFuZG9tTGlzdCwNCiAgICAgICAgICB0aGlzLmZvcm0ucHJpY2VQZW5jZW50DQogICAgICAgICk7DQogICAgICB9DQogICAgICBjb25zb2xlLmxvZyhvcHRpb24pOw0KICAgICAgdGhpcy5rbGluZU1vY2tZRGF0YSA9IG9wdGlvbi5zZXJpZXNbMF0uZGF0YSB8fCBbXTsNCiAgICAgIHRoaXMuS0xpbmVDaGFydCAmJiB0aGlzLktMaW5lQ2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDnu5jliLYgS0xpbmVDaGFydA0KICAgICAqLw0KICAgIGRyYXdLTGluZSgpIHsNCiAgICAgIGlmICghdGhpcy5LTGluZUNoYXJ0ICYmIHRoaXMuJHJlZnMuS0xpbmVDaGFydFJlZikgew0KICAgICAgICB0aGlzLktMaW5lQ2hhcnQgPSBlY2hhcnRzLmluaXQodGhpcy4kcmVmcy5LTGluZUNoYXJ0UmVmKTsNCiAgICAgIH0NCiAgICAgIGxldCBvcHRpb25zID0gew0KICAgICAgICBncmlkOiB7DQogICAgICAgICAgbGVmdDogMzAsDQogICAgICAgICAgcmlnaHQ6IDUwLA0KICAgICAgICAgIHRvcDogMTAsDQogICAgICAgICAgYm90dG9tOiAzMCwNCiAgICAgICAgfSwNCiAgICAgICAgeEF4aXM6IHsNCiAgICAgICAgICB0eXBlOiAiY2F0ZWdvcnkiLA0KICAgICAgICAgIG5hbWU6ICLml7bpl7QiLA0KICAgICAgICAgIGJvdW5kYXJ5R2FwOiBmYWxzZSwNCiAgICAgICAgICBheGlzTGFiZWw6IHsNCiAgICAgICAgICAgIGZvbnRTaXplOiA4LA0KICAgICAgICAgICAgZm9ybWF0dGVyOiAocGFyYW1zKSA9PiB7DQogICAgICAgICAgICAgIHJldHVybiBUaW1lRm9ybWF0ZXIoTnVtYmVyKHBhcmFtcykpLmZvcm1hdCgiSEg6bW0iKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICBkYXRhOiB0aGlzLnhUaW1lU2NhbGVMaXN0LA0KICAgICAgICB9LA0KICAgICAgICB5QXhpczogew0KICAgICAgICAgIC8vICAgbWluOiAwIC0gdGhpcy5mb3JtLmRlY2xpbmUsDQogICAgICAgICAgLy8gICBtYXg6IHRoaXMuZm9ybS5pbmNyZWFzZSwNCiAgICAgICAgICBuYW1lOiAi5Lu35qC8IiwNCiAgICAgICAgICB0eXBlOiAidmFsdWUiLA0KICAgICAgICAgIGF4aXNMaW5lOiB7IG9uWmVybzogZmFsc2UgfSwNCiAgICAgICAgICBheGlzTGFiZWw6IHsNCiAgICAgICAgICAgIGZvbnRTaXplOiA4LA0KICAgICAgICAgIH0sDQogICAgICAgICAgc3BsaXRMaW5lOiB7DQogICAgICAgICAgICBzaG93OiB0cnVlLA0KICAgICAgICAgICAgbGluZVN0eWxlOiB7DQogICAgICAgICAgICAgIGNvbG9yOiBbIiNDQ0MiXSwNCiAgICAgICAgICAgICAgd2lkdGg6IDEsDQogICAgICAgICAgICAgIHR5cGU6ICJkYXNoZWQiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICBzZXJpZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiY2FuZGxlc3RpY2siLA0KICAgICAgICAgICAgaXRlbVN0eWxlOiB7DQogICAgICAgICAgICAgIGNvbG9yOiAiIzRiYmQ4MyIsIC8vIOe7v+iJsu+8iOa2qO+8iQ0KICAgICAgICAgICAgICBjb2xvcjA6ICIjZDYyNTQ4IiwgLy8g57qi6Imy77yI6LeM77yJDQogICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAiIzRiYmQ4MyIsIC8vIOe7v+iJsu+8iOa2qO+8iQ0KICAgICAgICAgICAgICBib3JkZXJDb2xvcjA6ICIjZDYyNTQ4IiwgLy8g57qi6Imy77yI6LeM77yJDQogICAgICAgICAgICAgIGJvcmRlckNvbG9yRG9qaTogbnVsbCwNCiAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6ICIxIiwNCiAgICAgICAgICAgIH0sDQoNCiAgICAgICAgICAgIGRhdGE6IFtdLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9Ow0KICAgICAgdGhpcy5LTGluZUNoYXJ0ICYmIHRoaXMuS0xpbmVDaGFydC5zZXRPcHRpb24ob3B0aW9ucyk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDnu5jliLYgbGluZUNoYXJ0DQogICAgICovDQogICAgZHJhd0xpbmUoKSB7DQogICAgICBpZiAodGhpcy5saW5lQ2hhcnQpIHsNCiAgICAgICAgdGhpcy5saW5lQ2hhcnQuZGlzcG9zZSgpOw0KICAgICAgICB0aGlzLmxpbmVDaGFydCA9IG51bGw7DQogICAgICB9DQogICAgICBpZiAodGhpcy4kcmVmcy5saW5lQ2hhcnRSZWYpIHsNCiAgICAgICAgdGhpcy5saW5lQ2hhcnQgPSBlY2hhcnRzLmluaXQodGhpcy4kcmVmcy5saW5lQ2hhcnRSZWYpOw0KICAgICAgfQ0KICAgICAgLy8g5qC55o2u5o6n5Yi257KS5bqm6K6h566XWOi9tOaXtumXtOWIu+W6pg0KICAgICAgaWYgKCF0aGlzLnR5cGUgfHwgdGhpcy5kZXRhaWw/LmdyYW51bGFyaXR5ICE9IHRoaXMuZm9ybS5ncmFudWxhcml0eSkgew0KICAgICAgICAvLyDojrflj5blvZPliY3nspLluqZY5pWw57uEDQogICAgICAgIGxldCB4VGltZVNjYWxlTGlzdCA9IGRpc3RyaWJ1dGVNaW51dGVzKA0KICAgICAgICAgIHRoaXMudG90YWxNaW51dGVzLA0KICAgICAgICAgIHRoaXMuZm9ybS5ncmFudWxhcml0eQ0KICAgICAgICApOw0KICAgICAgICAvLyDliJ3lp4vljJbpu5jorqRZ5pWw57uEDQogICAgICAgIHRoaXMueVJhbmRvbUxpc3QgPSB4VGltZVNjYWxlTGlzdC5tYXAoKGVsZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgcmV0dXJuIFt4VGltZVNjYWxlTGlzdFtpbmRleF0gLyB0aGlzLmdyYW51bGFyaXR5LCAwXTsNCiAgICAgICAgfSk7DQogICAgICAgIC8vIOiOt+WPluaooeaLn0vnur/mlbDmja4NCiAgICAgICAgdGhpcy5rbGluZVlSYW5kb21MaXN0ID0gZ2V0S0xpbmVZUmFuZG9tTGlzdCgNCiAgICAgICAgICB0aGlzLnhUaW1lU2NhbGVMaXN0LA0KICAgICAgICAgIHRoaXMueVJhbmRvbUxpc3QNCiAgICAgICAgKS5zbGljZSgwLCB0aGlzLnhUaW1lU2NhbGVMaXN0Lmxlbmd0aCk7DQogICAgICB9DQogICAgICAvLyDorqHnrpdvcHRpb25zDQogICAgICBsZXQgb3B0aW9ucyA9IHsNCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiI2ZmZiIsDQogICAgICAgIGdyYXBoaWM6IG51bGwsDQogICAgICAgIHRpdGxlOiB7DQogICAgICAgICAgdGV4dDogIiIsDQogICAgICAgICAgc3VidGV4dDogIiIsDQogICAgICAgICAgeDogImNlbnRlciIsDQogICAgICAgIH0sDQogICAgICAgIGludGVydmFsOiAxLA0KICAgICAgICBncmlkOiB7DQogICAgICAgICAgbGVmdDogMzAsDQogICAgICAgICAgcmlnaHQ6IDUwLA0KICAgICAgICAgIHRvcDogMTAsDQogICAgICAgICAgYm90dG9tOiAzMCwNCiAgICAgICAgICBjb250YWluTGFiZWw6IGZhbHNlLCAvL2dyaWQg5Yy65Z+f5piv5ZCm5YyF5ZCr5Z2Q5qCH6L2055qE5Yi75bqm5qCH562+DQogICAgICAgIH0sDQogICAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgICB0cmlnZ2VyOiAiYXhpcyIsDQogICAgICAgICAgYXhpc1BvaW50ZXI6IHsNCiAgICAgICAgICAgIHR5cGU6ICJjcm9zcyIsDQogICAgICAgICAgICBsYWJlbDogew0KICAgICAgICAgICAgICBmb3JtYXR0ZXI6IChwYXJhbXMpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmF4aXNEaW1lbnNpb24gPT0gIngiKSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gVGltZUZvcm1hdGVyKE51bWJlcihwYXJhbXMudmFsdWUpKS5mb3JtYXQoDQogICAgICAgICAgICAgICAgICAgICJZWVlZLU1NLUREIEhIOm1tIg0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5heGlzRGltZW5zaW9uID09ICJ5Iikgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF90b0ZpeGVkKHBhcmFtcy52YWx1ZSwgNCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGxpbmVTdHlsZTogew0KICAgICAgICAgICAgICBjb2xvcjogIiMzQjkxRkYiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB4QXhpczogew0KICAgICAgICAgIHR5cGU6ICJjYXRlZ29yeSIsDQogICAgICAgICAgbmFtZTogIuaXtumXtCIsDQogICAgICAgICAgYm91bmRhcnlHYXA6IGZhbHNlLA0KICAgICAgICAgIGF4aXNMYWJlbDogew0KICAgICAgICAgICAgZm9udFNpemU6IDgsDQogICAgICAgICAgICBmb3JtYXR0ZXI6IChwYXJhbXMpID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIFRpbWVGb3JtYXRlcihOdW1iZXIocGFyYW1zKSkuZm9ybWF0KCJISDptbSIpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KDQogICAgICAgICAgc3BsaXRMaW5lOiB7DQogICAgICAgICAgICAvL+e9keagvOe6vw0KICAgICAgICAgICAgc2hvdzogdHJ1ZSwNCiAgICAgICAgICAgIGxpbmVTdHlsZTogew0KICAgICAgICAgICAgICBjb2xvcjogWyIjQ0NDIl0sDQogICAgICAgICAgICAgIHdpZHRoOiAxLA0KICAgICAgICAgICAgICB0eXBlOiAiZGFzaGVkIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICBkYXRhOiB0aGlzLnhUaW1lU2NhbGVMaXN0LA0KICAgICAgICB9LA0KICAgICAgICB5QXhpczogew0KICAgICAgICAgIG1pbjogMCAtIHRoaXMuZm9ybS5kZWNsaW5lLA0KICAgICAgICAgIG1heDogdGhpcy5mb3JtLmluY3JlYXNlLA0KICAgICAgICAgIG5hbWU6ICLku7fmoLwiLA0KICAgICAgICAgIHR5cGU6ICJ2YWx1ZSIsDQogICAgICAgICAgLy8gICBheGlzTGluZTogeyBvblplcm86IGZhbHNlIH0sDQogICAgICAgICAgYXhpc0xhYmVsOiB7DQogICAgICAgICAgICBmb250U2l6ZTogOCwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHNwbGl0TGluZTogew0KICAgICAgICAgICAgc2hvdzogdHJ1ZSwNCiAgICAgICAgICAgIGxpbmVTdHlsZTogew0KICAgICAgICAgICAgICBjb2xvcjogWyIjQ0NDIl0sDQogICAgICAgICAgICAgIHdpZHRoOiAxLA0KICAgICAgICAgICAgICB0eXBlOiAiZGFzaGVkIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCg0KICAgICAgICBzZXJpZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBkYXRhOiB0aGlzLnlSYW5kb21MaXN0LA0KICAgICAgICAgICAgdHlwZTogImxpbmUiLA0KICAgICAgICAgICAgc21vb3RoOiB0cnVlLA0KICAgICAgICAgICAgc3ltYm9sOiAiY2lyY2xlIiwNCiAgICAgICAgICAgIHNob3dTeW1ib2w6IHRydWUsDQogICAgICAgICAgICBzeW1ib2xTaXplOiAxMiwNCiAgICAgICAgICAgIGl0ZW1TdHlsZTogew0KICAgICAgICAgICAgICBjb2xvcjogIiMzQjkxRkYiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGxpbmVTdHlsZTogew0KICAgICAgICAgICAgICBjb2xvcjogIiMzQjkxRkYiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgfTsNCiAgICAgIHRoaXMubGluZUNoYXJ0ICYmIHRoaXMubGluZUNoYXJ0LnNldE9wdGlvbihvcHRpb25zKTsNCiAgICAgIGlmICghdGhpcy5pc1ByaXZpZXcpIHsNCiAgICAgICAgdGhpcy5zZXRMaW5lT3B0aW9uKCk7DQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDorr7nva7mi5bmi70NCiAgICAgKi8NCiAgICBzZXRMaW5lT3B0aW9uKCkgew0KICAgICAgdGhpcy5saW5lQ2hhcnQuc2V0T3B0aW9uKHsNCiAgICAgICAgZ3JhcGhpYzogZWNoYXJ0cy51dGlsLm1hcCh0aGlzLnlSYW5kb21MaXN0LCAoZGF0YUl0ZW0sIGRhdGFJbmRleCkgPT4gew0KICAgICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOyAvLyDlm6DkuLpvbmRyYWflh73mlbDlv4XpobvlnKjlm57osIPlhoXkvb/nlKh0aGlzLnBvc2l0aW9u6I635Y+W5a6e5pe25Z2Q5qCH77yM5q2k5aSE5b+F6aG755SodGhhdOabv+aNonRoaXMNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdHlwZTogImNpcmNsZSIsDQogICAgICAgICAgICBzaGFwZTogew0KICAgICAgICAgICAgICAvLyDlnIbngrnnmoTljYrlvoTjgIINCiAgICAgICAgICAgICAgcjogMTAsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgZmlsbDogIiMzQjkxRkYiLCAvLyDorr7nva7lnIbngrnnmoTloavlhYXoibLvvIzov5nph4zorr7nva7kuLrnuqLoibINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5saW5lQ2hhcnQuY29udmVydFRvUGl4ZWwoImdyaWQiLCBkYXRhSXRlbSksDQogICAgICAgICAgICBpbnZpc2libGU6IHRydWUsDQogICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsDQogICAgICAgICAgICB6OiAxMDAsDQogICAgICAgICAgICBvbmRyYWc6IGVjaGFydHMudXRpbC5jdXJyeShmdW5jdGlvbiAoZGF0YUluZGV4KSB7DQogICAgICAgICAgICAgIGxldCBvcmlnaW4gPSB0aGF0LmxpbmVDaGFydC5jb252ZXJ0VG9QaXhlbCgNCiAgICAgICAgICAgICAgICAiZ3JpZCIsDQogICAgICAgICAgICAgICAgdGhhdC55UmFuZG9tTGlzdFtkYXRhSW5kZXhdDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIHRoaXMucG9zaXRpb25bMF0gPSBvcmlnaW5bMF07IC8vIOaOp+WItuavj+S4queCueS9jeWPquiDveWcqHnovbTmlrnlkJHnp7vliqgNCiAgICAgICAgICAgICAgLy8gdGhpcy5wb3NpdGlvblsxXSA9IG9yaWdpblsxXSAvLyDmjqfliLbmr4/kuKrngrnkvY3lj6rog73lnKh46L205pa55ZCR56e75YqoDQogICAgICAgICAgICAgIC8vIOWunuaXtuiOt+WPluaLluWKqOeahOeCueS9jeS/oeaBr+W5tuagueaNruatpOS/oeaBr+mHjeaWsOeUu+Wbvg0KICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSB0aGF0LmxpbmVDaGFydC5jb252ZXJ0RnJvbVBpeGVsKA0KICAgICAgICAgICAgICAgICJncmlkIiwNCiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGlmICh0ZW1wRGF0YVsxXSA+IHRoYXQuZm9ybS5pbmNyZWFzZSkgew0KICAgICAgICAgICAgICAgIHRlbXBEYXRhWzFdID0gdGhhdC5mb3JtLmluY3JlYXNlOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlbXBEYXRhWzFdIDwgMCAtIHRoYXQuZm9ybS5kZWNsaW5lKSB7DQogICAgICAgICAgICAgICAgdGVtcERhdGFbMV0gPSAwIC0gdGhhdC5mb3JtLmRlY2xpbmU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhhdC55UmFuZG9tTGlzdFtkYXRhSW5kZXhdID0gdGVtcERhdGE7DQoNCiAgICAgICAgICAgICAgdGhhdC5saW5lQ2hhcnQuc2V0T3B0aW9uKHsNCiAgICAgICAgICAgICAgICBzZXJpZXM6IFsNCiAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhhdC55UmFuZG9tTGlzdCwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LCBkYXRhSW5kZXgpLA0KICAgICAgICAgICAgb25kcmFnZW5kOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHRoYXQua2xpbmVZUmFuZG9tTGlzdCA9IGdldEtMaW5lWVJhbmRvbUxpc3QoDQogICAgICAgICAgICAgICAgdGhhdC54VGltZVNjYWxlTGlzdCwNCiAgICAgICAgICAgICAgICB0aGF0LnlSYW5kb21MaXN0DQogICAgICAgICAgICAgICkuc2xpY2UoMCwgdGhhdC54VGltZVNjYWxlTGlzdC5sZW5ndGgpOw0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoYXQuS0xpbmVQZXJ2aWV3LCAzMDApOw0KICAgICAgICAgICAgICAvLyDmi5bmi73nu5PmnZ/ml7bvvIzlho3mrKHmo4Dmn6XkvY3nva7mmK/lkKbotoXlh7rojIPlm7TvvIzlpoLmnpzotoXlh7rliJnph43nva7kuLrlkIjms5XkvY3nva4NCiAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gdGhhdC5saW5lQ2hhcnQuY29udmVydFRvUGl4ZWwoDQogICAgICAgICAgICAgICAgImdyaWQiLA0KICAgICAgICAgICAgICAgIHRoYXQueVJhbmRvbUxpc3RbZGF0YUluZGV4XQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjb25zdCB0ZW1wRGF0YSA9IHRoYXQubGluZUNoYXJ0LmNvbnZlcnRGcm9tUGl4ZWwoDQogICAgICAgICAgICAgICAgImdyaWQiLA0KICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgaWYgKHRlbXBEYXRhWzFdID4gdGhhdC5mb3JtLmluY3JlYXNlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvblsxXSA9IG9yaWdpblsxXTsNCiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wRGF0YVsxXSA8IDAgLSB0aGF0LmZvcm0uZGVjbGluZSkgew0KICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25bMV0gPSBvcmlnaW5bMV07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfTsNCiAgICAgICAgfSksDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOebkeWQrOWkp+Wwjw0KICAgICAqLw0KICAgIHJlc2l6ZSgpIHsNCiAgICAgIHRoaXMubGluZUNoYXJ0ICYmIHRoaXMubGluZUNoYXJ0LnJlc2l6ZSgpOw0KICAgICAgdGhpcy5LTGluZUNoYXJ0ICYmIHRoaXMuS0xpbmVDaGFydC5yZXNpemUoKTsNCiAgICB9LA0KICAgIGFzeW5jIGdldFN5bWJvbExpc3QoKSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRTeW1ib2xMaXN0QXBpKHsNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwMDAsDQogICAgICB9KTsNCiAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5zeW1ib2xMaXN0ID0gcmVzLnJvd3M7DQogICAgICAgIHRoaXMuZm9ybS5zeW1ib2wgPSB0aGlzLnN5bWJvbExpc3RbMF0uc3ltYm9sOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/bussiness/trade-robot","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <SearchFormBox title=\"参数设置\">\r\n      <el-form\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        size=\"small\"\r\n        :inline=\"true\"\r\n        label-width=\"100px\"\r\n        :disabled=\"isPriview || isUpdate\"\r\n      >\r\n        <el-form-item label=\"交易对\" prop=\"symbol\">\r\n          <el-select\r\n            v-model=\"form.symbol\"\r\n            filterable\r\n            placeholder=\"请选择交易对\"\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"(item, index) in symbolList\"\r\n              :key=\"index\"\r\n              :label=\"item.showSymbol\"\r\n              :value=\"item.symbol\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"控盘策略\" prop=\"model\">\r\n          <el-radio-group v-model=\"form.model\" @change=\"onModelChange\">\r\n            <el-radio-button\r\n              v-for=\"item in modelList\"\r\n              :key=\"item.label\"\r\n              :label=\"item.value\"\r\n            >\r\n              {{ item.label }}\r\n            </el-radio-button>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"控盘时间\" prop=\"time\" v-if=\"form.model != 0\">\r\n          <el-date-picker\r\n            v-model=\"form.time\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择控盘时间\"\r\n            format=\"yyyy-MM-dd HH:mm\"\r\n            :picker-options=\"pickerOptions\"\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"最大涨幅\" prop=\"increase\" v-if=\"form.model != 0\">\r\n          <el-input\r\n            v-model=\"form.increase\"\r\n            type=\"number\"\r\n            :min=\"0.001\"\r\n            placeholder=\"请输入最大涨幅\"\r\n          >\r\n            <template v-slot:append>%</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"最大跌幅\" prop=\"decline\" v-if=\"form.model != 0\">\r\n          <el-input\r\n            v-model=\"form.decline\"\r\n            type=\"number\"\r\n            :min=\"0.001\"\r\n            placeholder=\"请输入最大跌幅\"\r\n          >\r\n            <template v-slot:append>%</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <template v-if=\"form.model != 0\">\r\n          <!-- <el-form-item label=\"控制粒度\" prop=\"granularity\">\r\n            <el-radio-group v-model=\"form.granularity\">\r\n              <el-radio-button\r\n                v-for=\"item in granularityList\"\r\n                :key=\"item.label\"\r\n                :label=\"item.value\"\r\n              >\r\n                {{ item.label }}\r\n              </el-radio-button>\r\n            </el-radio-group>\r\n          </el-form-item> -->\r\n          <el-form-item label=\"浮动比例\" prop=\"pricePencent\">\r\n            <el-input\r\n              v-model=\"form.pricePencent\"\r\n              type=\"number\"\r\n              :min=\"0.001\"\r\n              :max=\"100\"\r\n              placeholder=\"请输入价格浮动比例\"\r\n              @change=\"KLinePerview\"\r\n              style=\"width: 250px\"\r\n            >\r\n              <template v-slot:append>%</template>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"参考价格\"\r\n            prop=\"conPrice\"\r\n            v-if=\"isPriview || isUpdate\"\r\n          >\r\n            <el-input\r\n              v-model=\"form.conPrice\"\r\n              :disabled=\"form.conPrice > 0\"\r\n              type=\"number\"\r\n              :min=\"0.001\"\r\n              placeholder=\"请输入价格浮动比例\"\r\n            >\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-form-item>\r\n                <el-button\r\n                  type=\"warning\"\r\n                  icon=\"el-icon-edit\"\r\n                  size=\"mini\"\r\n                  plain\r\n                  @click=\"\r\n                    drawLine();\r\n                    KLinePerview();\r\n                  \"\r\n                  v-if=\"form.model != 0\"\r\n                >\r\n                  绘制\r\n                </el-button>\r\n                <!-- <el-button\r\n                  icon=\"el-icon-view\"\r\n                  size=\"mini\"\r\n                  @click=\"KLinePerview()\"\r\n                  v-if=\"form.model != 0\"\r\n                >\r\n                  预览\r\n                </el-button> -->\r\n\r\n                <el-button\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-check\"\r\n                  size=\"mini\"\r\n                  @click=\"submit\"\r\n                  :disabled=\"isPriview\"\r\n                >\r\n                  保存\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </template>\r\n      </el-form>\r\n    </SearchFormBox>\r\n\r\n    <div v-if=\"form.model == 0\">\r\n      <!-- 跟随型 -->\r\n      <TableContentBox :title=\"modelInfo.label\">\r\n        <el-form :disabled=\"isPriview\">\r\n          <el-row>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"浮动价格\" prop=\"conPrice\">\r\n                <el-tooltip\r\n                  effect=\"dark\"\r\n                  placement=\"bottom-start\"\r\n                  content=\"当前币种价格 + 浮动价格\"\r\n                >\r\n                  <i class=\"el-icon-info\" />\r\n                </el-tooltip>\r\n                <el-input\r\n                  v-model=\"form.conPrice\"\r\n                  :min=\"0\"\r\n                  type=\"number\"\r\n                  placeholder=\"请输入浮动价格\"\r\n                >\r\n                  <template v-slot:append>USDT</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <!-- <el-col :span=\"6\" :offset=\"2\">\r\n              <el-form-item label=\"浮动比例\" prop=\"pricePencent\">\r\n                <el-input\r\n                  v-model=\"form.pricePencent\"\r\n                  type=\"number\"\r\n                  placeholder=\"请输入价格浮动比例\"\r\n                >\r\n                  <template v-slot:append>%</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col> -->\r\n          </el-row>\r\n        </el-form>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          size=\"mini\"\r\n          @click=\"submit\"\r\n          :disabled=\"isPriview\"\r\n        >\r\n          保存\r\n        </el-button>\r\n      </TableContentBox>\r\n    </div>\r\n    <div v-else>\r\n      <!-- 线 图表 -->\r\n      <TableContentBox :title=\"modelInfo.label\">\r\n        <el-row>\r\n          <div class=\"line-chart\" ref=\"lineChartRef\"></div>\r\n        </el-row>\r\n      </TableContentBox>\r\n\r\n      <!-- K线 图表 -->\r\n      <TableContentBox title=\"趋势预览\" style=\"margin-top: 15px\">\r\n        <el-row>\r\n          <div class=\"kline-chart\" ref=\"KLineChartRef\"></div>\r\n        </el-row>\r\n      </TableContentBox>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TimeFormater from \"time-formater\";\r\nimport * as echarts from \"echarts\";\r\nimport {\r\n  generateTimeList,\r\n  getKLineYRandomList,\r\n  distributeMinutes,\r\n  getMockKLineOption,\r\n} from \"./util\";\r\nimport { _toFixed, _div, _mul } from \"./decimal\";\r\nimport {\r\n  getSymbolListApi,\r\n  saveTradeRobotApi,\r\n  getDetailApi,\r\n  updateDetailApi,\r\n} from \"@/api/bussiness/trade-robot.js\";\r\nexport default {\r\n  name: \"TradeRobot\",\r\n\r\n  data() {\r\n    return {\r\n      detail: null,\r\n      // 历史id\r\n      id: null,\r\n      // 类型 priview update\r\n      type: null,\r\n      // 控盘策略列表\r\n      modelList: [\r\n        { value: 0, label: \"跟随型趋势\" },\r\n        // { value: 1, label: \"自定义趋势\" },\r\n        { value: 2, label: \"秒杀型趋势\" },\r\n      ],\r\n      // 币种列表\r\n      symbolList: [],\r\n      // 表单\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        symbol: { required: true, message: \"币种不能为空\", trigger: \"blur\" },\r\n      },\r\n      // 总分钟数\r\n      totalMinutes: 0,\r\n      // 基础粒度\r\n      granularity: 15,\r\n      // X轴时间\r\n      xTimeScaleList: [],\r\n      // Y轴计算比例\r\n      yRandomList: [],\r\n      // 图表实例\r\n      lineChart: null,\r\n      // 图表实例\r\n      KLineChart: null,\r\n      /**\r\n       * k线预处理数据\r\n       */\r\n      klineYRandomList: [],\r\n      /**\r\n       * k线数据\r\n       */\r\n      klineMockYData: [],\r\n\r\n      pickerOptions: {\r\n        //设置禁用状态，参数为当前日期\r\n        disabledDate(time) {\r\n          return time.getTime() < new Date().getTime() - 86400000; //  - 86400000是否包括当天\r\n        },\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    /**\r\n     * 策略信息\r\n     */\r\n    modelInfo() {\r\n      return this.modelList.find(\r\n        (elem) => elem.value == (this.form?.model || 0)\r\n      );\r\n    },\r\n    /**\r\n     * 控制粒度列表\r\n     */\r\n    granularityList() {\r\n      let tempList = [\r\n        { value: 15, label: \"15分钟\" },\r\n        { value: 30, label: \"30分钟\" },\r\n        { value: 60, label: \"1小时\" },\r\n        { value: 120, label: \"2小时\" },\r\n        { value: 240, label: \"4小时\" },\r\n      ];\r\n\r\n      if (this.form.model == 2) {\r\n        // 秒杀型趋势\r\n        tempList = [\r\n          { value: 1, label: \"1分钟\" },\r\n          { value: 5, label: \"5分钟\" },\r\n          { value: 10, label: \"10分钟\" },\r\n          { value: 15, label: \"15分钟\" },\r\n        ];\r\n      }\r\n      return tempList;\r\n    },\r\n    /**\r\n     * 是否为预览\r\n     */\r\n    isPriview() {\r\n      return this.type == \"priview\";\r\n    },\r\n    /**\r\n     * 是否为修改\r\n     */\r\n    isUpdate() {\r\n      return this.type == \"update\";\r\n    },\r\n  },\r\n  async mounted() {\r\n    await this.getSymbolList();\r\n    this.id = this.$route.query.id || null;\r\n    this.type = this.$route.query.type || null;\r\n    if (this.id) {\r\n      this.getDetail();\r\n    } else {\r\n      this.reset();\r\n      window.addEventListener(\"resize\", this.resize);\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取数据详情\r\n     */\r\n    async getDetail() {\r\n      const res = await getDetailApi(this.id);\r\n      if (res.code == 200) {\r\n        console.log(res);\r\n        let tempData = res.data;\r\n        this.detail = tempData;\r\n        if (!this.symbolList.some((elem) => elem.symbol == tempData.symbol)) {\r\n          tempData.symbol = \"\";\r\n        }\r\n        this.form = {\r\n          decline: tempData.decline,\r\n          increase: tempData.increase,\r\n          granularity: tempData.granularity,\r\n          model: tempData.model,\r\n          conPrice: tempData.conPrice,\r\n          pricePencent: tempData.pricePencent,\r\n          symbol: tempData.symbol,\r\n          time: new Date(tempData.beginTime),\r\n        };\r\n        this.klineMockYData = tempData.botInfoList.map((elem) => {\r\n          this.klineYRandomList[elem.x] = elem.y;\r\n          return [elem.open, elem.close, elem.high, elem.low];\r\n        });\r\n        this.granularity = this.granularityList[0].value;\r\n\r\n        if (tempData.model == 2) {\r\n          this.totalMinutes = 60;\r\n          this.xTimeScaleList = generateTimeList(\r\n            this.form.time,\r\n            this.granularity,\r\n            this.totalMinutes\r\n          );\r\n        }\r\n        this.yRandomList = JSON.parse(tempData.lineChartData);\r\n        this.drawLine();\r\n        this.drawKLine();\r\n        this.KLinePerview({\r\n          series: [{ data: this.klineMockYData }],\r\n          xAxis: this.xTimeScaleList,\r\n        });\r\n      }\r\n    },\r\n    /**\r\n     * 提交\r\n     */\r\n    async submit() {\r\n      console.log(\"表单数据\", this.form);\r\n      console.log(\"K线数据 open, close, high, low\", this.klineMockYData);\r\n      console.log(\r\n        \"K线数据 时间\",\r\n        this.klineYRandomList,\r\n        this.form.time.getTime()\r\n      );\r\n      let tempBotInfoList = [];\r\n      this.form.time.setSeconds(0);\r\n      this.form.time.setMilliseconds(0);\r\n\r\n      let nowDate = new Date();\r\n      nowDate.setSeconds(0);\r\n      nowDate.setMilliseconds(0);\r\n\r\n      let time = this.form.time.getTime();\r\n      // if (\r\n      //   [2].includes(this.form.model) &&\r\n      //   time < nowDate.getTime() + 120 * 1000\r\n      // ) {\r\n      //   this.$modal.msgError(\"请将控盘时间设置为 当前时间 + 两分钟\");\r\n      //   return;\r\n      // }\r\n      if ([1, 2].includes(this.form.model)) {\r\n        tempBotInfoList = Object.keys(this.klineYRandomList).map(\r\n          (elem, index) => {\r\n            return {\r\n              x: elem,\r\n              y: `${this.klineYRandomList[index]}`,\r\n\r\n              dateTime: time + elem * this.form.granularity * 60 * 1000,\r\n              open: this.klineMockYData[index][0],\r\n              close: this.klineMockYData[index][1],\r\n              high: this.klineMockYData[index][2],\r\n              low: this.klineMockYData[index][3],\r\n            };\r\n          }\r\n        );\r\n      }\r\n      let params = {\r\n        // 最大跌幅\r\n        decline: this.form.pricePencent,\r\n        // 最大涨幅\r\n        increase: this.form.pricePencent,\r\n        // 控制粒度\r\n        granularity: \"\",\r\n        // 控盘策略 0 跟随型 1 自定义 2 秒杀型\r\n        model: this.form.model,\r\n        // 浮动价格  model为 0 时有效\r\n        conPrice: this.form.conPrice,\r\n        // 浮动比例\r\n        pricePencent: this.form.pricePencent,\r\n        // 交易对\r\n        symbol: this.form.symbol,\r\n        // 开始时间\r\n        beginTime: time,\r\n        // 结束时间\r\n        endTime: \"\",\r\n        // 趋势列表\r\n        botInfoList: [\r\n          {\r\n            close: 0,\r\n            dateTime: time,\r\n            high: 0,\r\n            low: 0,\r\n            open: 0,\r\n            x: \"0\",\r\n            y: \"0\",\r\n          },\r\n        ],\r\n        // 图表刻度数据\r\n        lineChartData: \"[]\",\r\n      };\r\n      if ([1, 2].includes(this.form.model)) {\r\n        // 最大跌幅\r\n        params.decline = this.form.decline;\r\n        // 最大涨幅\r\n        params.increase = this.form.increase;\r\n        // 控制粒度\r\n        params.granularity = this.form.granularity;\r\n        // 开始时间\r\n        params.beginTime = tempBotInfoList[0].dateTime;\r\n        // 结束时间\r\n        params.endTime = tempBotInfoList[tempBotInfoList.length - 1].dateTime;\r\n        // 趋势列表\r\n        params.botInfoList = tempBotInfoList;\r\n        // 图表刻度数据\r\n        params.lineChartData = JSON.stringify(this.yRandomList);\r\n      }\r\n      console.log(params);\r\n      if (this.form.symbol == \"\") {\r\n        this.$modal.msgError(\"交易对不能为空\");\r\n        return false;\r\n      }\r\n      if (this.id) {\r\n        // 修改\r\n        params.id = this.id;\r\n        const res = await updateDetailApi(params);\r\n        if (res.code == 200) {\r\n          this.$modal.msgSuccess(res.msg);\r\n          // 控盘策略 0 跟随型 1 自定义 2 秒杀型\r\n          if (this.form.model == 0) {\r\n            this.form.conPrice = \"\";\r\n          } else {\r\n            this.reset();\r\n          }\r\n        } else {\r\n          this.$modal.msgError(res.msg);\r\n        }\r\n      } else {\r\n        const res = await saveTradeRobotApi(params);\r\n        if (res.code == 200) {\r\n          this.$modal.msgSuccess(res.msg);\r\n          // 控盘策略 0 跟随型 1 自定义 2 秒杀型\r\n          if (this.form.model == 0) {\r\n            this.form.conPrice = \"\";\r\n          } else {\r\n            this.reset();\r\n          }\r\n        } else {\r\n          this.$modal.msgError(res.msg);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 监听粒度改变\r\n     */\r\n    onModelChange(val) {\r\n      // console.log(\"监听粒度改变\", val);\r\n      if ([1, 2].includes(val)) {\r\n        this.granularity = this.granularityList[0].value;\r\n        this.form.granularity = this.granularity;\r\n        this.pricePencent = 5;\r\n      }\r\n\r\n      if (val == 2) {\r\n        this.totalMinutes = 60;\r\n        this.xTimeScaleList = generateTimeList(\r\n          this.form.time,\r\n          this.granularity,\r\n          this.totalMinutes\r\n        );\r\n        this.drawLine();\r\n        this.drawKLine();\r\n        this.KLinePerview();\r\n      } else if (val == 1) {\r\n        this.totalMinutes = 1 * 24 * 60;\r\n        this.xTimeScaleList = generateTimeList(\r\n          this.form.time,\r\n          this.granularity\r\n        );\r\n        this.drawLine();\r\n        this.drawKLine();\r\n        this.KLinePerview();\r\n      } else if (val == 0) {\r\n        this.resetForm(() => {\r\n          this.form.model = val;\r\n        });\r\n      }\r\n    },\r\n    /**\r\n     * 充值表单\r\n     */\r\n    resetForm(callback) {\r\n      this.form = {\r\n        // 交易对\r\n        symbol: \"\",\r\n        // 模式\r\n        model: 2,\r\n        // 模拟时间\r\n        time: new Date(),\r\n        // 最大涨幅\r\n        increase: 5,\r\n        // 最大跌幅\r\n        decline: 5,\r\n        // 控制粒度\r\n        granularity: 15,\r\n        // 浮动价格\r\n        conPrice: 0,\r\n        // 价格浮动比例\r\n        pricePencent: 5,\r\n      };\r\n      callback && callback();\r\n    },\r\n    /**\r\n     * 重置表单\r\n     */\r\n    reset() {\r\n      if (this.lineChart) {\r\n        this.lineChart.dispose();\r\n        this.lineChart = null;\r\n      }\r\n      if (this.KLineChart) {\r\n        this.KLineChart.dispose();\r\n        this.KLineChart = null;\r\n      }\r\n      this.resetForm();\r\n      this.id = null;\r\n      this.type = null;\r\n      this.detail = null;\r\n      // 总分钟数\r\n      this.totalMinutes = 1 * 24 * 60;\r\n      // 基础粒度\r\n      this.granularity = 15;\r\n      // X轴时间\r\n      this.xTimeScaleList = [];\r\n      // Y轴计算比例\r\n      this.yRandomList = [];\r\n      // K线计算曲线比例\r\n      this.klineYRandomList = [];\r\n      // K线模拟数据\r\n      this.klineMockYData = [];\r\n      this.onModelChange(this.form.model);\r\n    },\r\n    /**\r\n     * 预览\r\n     */\r\n    KLinePerview(option) {\r\n      if (!option) {\r\n        option = getMockKLineOption(\r\n          this.xTimeScaleList,\r\n          this.klineYRandomList,\r\n          this.form.pricePencent\r\n        );\r\n      }\r\n      console.log(option);\r\n      this.klineMockYData = option.series[0].data || [];\r\n      this.KLineChart && this.KLineChart.setOption(option);\r\n    },\r\n    /**\r\n     * 绘制 KLineChart\r\n     */\r\n    drawKLine() {\r\n      if (!this.KLineChart && this.$refs.KLineChartRef) {\r\n        this.KLineChart = echarts.init(this.$refs.KLineChartRef);\r\n      }\r\n      let options = {\r\n        grid: {\r\n          left: 30,\r\n          right: 50,\r\n          top: 10,\r\n          bottom: 30,\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          name: \"时间\",\r\n          boundaryGap: false,\r\n          axisLabel: {\r\n            fontSize: 8,\r\n            formatter: (params) => {\r\n              return TimeFormater(Number(params)).format(\"HH:mm\");\r\n            },\r\n          },\r\n          data: this.xTimeScaleList,\r\n        },\r\n        yAxis: {\r\n          //   min: 0 - this.form.decline,\r\n          //   max: this.form.increase,\r\n          name: \"价格\",\r\n          type: \"value\",\r\n          axisLine: { onZero: false },\r\n          axisLabel: {\r\n            fontSize: 8,\r\n          },\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: [\"#CCC\"],\r\n              width: 1,\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            type: \"candlestick\",\r\n            itemStyle: {\r\n              color: \"#4bbd83\", // 绿色（涨）\r\n              color0: \"#d62548\", // 红色（跌）\r\n              borderColor: \"#4bbd83\", // 绿色（涨）\r\n              borderColor0: \"#d62548\", // 红色（跌）\r\n              borderColorDoji: null,\r\n              borderWidth: \"1\",\r\n            },\r\n\r\n            data: [],\r\n          },\r\n        ],\r\n      };\r\n      this.KLineChart && this.KLineChart.setOption(options);\r\n    },\r\n    /**\r\n     * 绘制 lineChart\r\n     */\r\n    drawLine() {\r\n      if (this.lineChart) {\r\n        this.lineChart.dispose();\r\n        this.lineChart = null;\r\n      }\r\n      if (this.$refs.lineChartRef) {\r\n        this.lineChart = echarts.init(this.$refs.lineChartRef);\r\n      }\r\n      // 根据控制粒度计算X轴时间刻度\r\n      if (!this.type || this.detail?.granularity != this.form.granularity) {\r\n        // 获取当前粒度X数组\r\n        let xTimeScaleList = distributeMinutes(\r\n          this.totalMinutes,\r\n          this.form.granularity\r\n        );\r\n        // 初始化默认Y数组\r\n        this.yRandomList = xTimeScaleList.map((elem, index) => {\r\n          return [xTimeScaleList[index] / this.granularity, 0];\r\n        });\r\n        // 获取模拟K线数据\r\n        this.klineYRandomList = getKLineYRandomList(\r\n          this.xTimeScaleList,\r\n          this.yRandomList\r\n        ).slice(0, this.xTimeScaleList.length);\r\n      }\r\n      // 计算options\r\n      let options = {\r\n        backgroundColor: \"#fff\",\r\n        graphic: null,\r\n        title: {\r\n          text: \"\",\r\n          subtext: \"\",\r\n          x: \"center\",\r\n        },\r\n        interval: 1,\r\n        grid: {\r\n          left: 30,\r\n          right: 50,\r\n          top: 10,\r\n          bottom: 30,\r\n          containLabel: false, //grid 区域是否包含坐标轴的刻度标签\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"cross\",\r\n            label: {\r\n              formatter: (params) => {\r\n                if (params.axisDimension == \"x\") {\r\n                  return TimeFormater(Number(params.value)).format(\r\n                    \"YYYY-MM-DD HH:mm\"\r\n                  );\r\n                } else if (params.axisDimension == \"y\") {\r\n                  return _toFixed(params.value, 4);\r\n                }\r\n              },\r\n            },\r\n            lineStyle: {\r\n              color: \"#3B91FF\",\r\n            },\r\n          },\r\n        },\r\n        xAxis: {\r\n          type: \"category\",\r\n          name: \"时间\",\r\n          boundaryGap: false,\r\n          axisLabel: {\r\n            fontSize: 8,\r\n            formatter: (params) => {\r\n              return TimeFormater(Number(params)).format(\"HH:mm\");\r\n            },\r\n          },\r\n\r\n          splitLine: {\r\n            //网格线\r\n            show: true,\r\n            lineStyle: {\r\n              color: [\"#CCC\"],\r\n              width: 1,\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          data: this.xTimeScaleList,\r\n        },\r\n        yAxis: {\r\n          min: 0 - this.form.decline,\r\n          max: this.form.increase,\r\n          name: \"价格\",\r\n          type: \"value\",\r\n          //   axisLine: { onZero: false },\r\n          axisLabel: {\r\n            fontSize: 8,\r\n          },\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: [\"#CCC\"],\r\n              width: 1,\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n        },\r\n\r\n        series: [\r\n          {\r\n            data: this.yRandomList,\r\n            type: \"line\",\r\n            smooth: true,\r\n            symbol: \"circle\",\r\n            showSymbol: true,\r\n            symbolSize: 12,\r\n            itemStyle: {\r\n              color: \"#3B91FF\",\r\n            },\r\n            lineStyle: {\r\n              color: \"#3B91FF\",\r\n            },\r\n          },\r\n        ],\r\n      };\r\n      this.lineChart && this.lineChart.setOption(options);\r\n      if (!this.isPriview) {\r\n        this.setLineOption();\r\n      }\r\n    },\r\n    /**\r\n     * 设置拖拽\r\n     */\r\n    setLineOption() {\r\n      this.lineChart.setOption({\r\n        graphic: echarts.util.map(this.yRandomList, (dataItem, dataIndex) => {\r\n          const that = this; // 因为ondrag函数必须在回调内使用this.position获取实时坐标，此处必须用that替换this\r\n          return {\r\n            type: \"circle\",\r\n            shape: {\r\n              // 圆点的半径。\r\n              r: 10,\r\n            },\r\n            style: {\r\n              fill: \"#3B91FF\", // 设置圆点的填充色，这里设置为红色\r\n            },\r\n            position: this.lineChart.convertToPixel(\"grid\", dataItem),\r\n            invisible: true,\r\n            draggable: true,\r\n            z: 100,\r\n            ondrag: echarts.util.curry(function (dataIndex) {\r\n              let origin = that.lineChart.convertToPixel(\r\n                \"grid\",\r\n                that.yRandomList[dataIndex]\r\n              );\r\n              this.position[0] = origin[0]; // 控制每个点位只能在y轴方向移动\r\n              // this.position[1] = origin[1] // 控制每个点位只能在x轴方向移动\r\n              // 实时获取拖动的点位信息并根据此信息重新画图\r\n              let tempData = that.lineChart.convertFromPixel(\r\n                \"grid\",\r\n                this.position\r\n              );\r\n              if (tempData[1] > that.form.increase) {\r\n                tempData[1] = that.form.increase;\r\n              } else if (tempData[1] < 0 - that.form.decline) {\r\n                tempData[1] = 0 - that.form.decline;\r\n              }\r\n              that.yRandomList[dataIndex] = tempData;\r\n\r\n              that.lineChart.setOption({\r\n                series: [\r\n                  {\r\n                    data: that.yRandomList,\r\n                  },\r\n                ],\r\n              });\r\n            }, dataIndex),\r\n            ondragend: function () {\r\n              that.klineYRandomList = getKLineYRandomList(\r\n                that.xTimeScaleList,\r\n                that.yRandomList\r\n              ).slice(0, that.xTimeScaleList.length);\r\n              setTimeout(that.KLinePerview, 300);\r\n              // 拖拽结束时，再次检查位置是否超出范围，如果超出则重置为合法位置\r\n              const origin = that.lineChart.convertToPixel(\r\n                \"grid\",\r\n                that.yRandomList[dataIndex]\r\n              );\r\n              const tempData = that.lineChart.convertFromPixel(\r\n                \"grid\",\r\n                this.position\r\n              );\r\n              if (tempData[1] > that.form.increase) {\r\n                this.position[1] = origin[1];\r\n              } else if (tempData[1] < 0 - that.form.decline) {\r\n                this.position[1] = origin[1];\r\n              }\r\n            },\r\n          };\r\n        }),\r\n      });\r\n    },\r\n    /**\r\n     * 监听大小\r\n     */\r\n    resize() {\r\n      this.lineChart && this.lineChart.resize();\r\n      this.KLineChart && this.KLineChart.resize();\r\n    },\r\n    async getSymbolList() {\r\n      const res = await getSymbolListApi({\r\n        pageNum: 1,\r\n        pageSize: 1000,\r\n      });\r\n      if (res.code == 200) {\r\n        this.symbolList = res.rows;\r\n        this.form.symbol = this.symbolList[0].symbol;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.line-chart,\r\n.kline-chart {\r\n  height: 800px;\r\n}\r\n</style>\r\n"]}]}