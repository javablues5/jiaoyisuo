{"remainingRequest":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/views/bussiness/info/index.vue?vue&type=style&index=0&id=8dcfee26&lang=scss&scoped=true","dependencies":[{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/src/views/bussiness/info/index.vue","mtime":1698845798709},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ying/Downloads/Telegram Desktop/新建文件夹 (2)/echo2.0-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmVsLXRhYmxlIHsNCiAgb3ZlcmZsb3c6IGF1dG87DQp9DQouZWwtdGFibGVfX2JvZHktd3JhcHBlciB7DQogIG92ZXJmbG93OiB2aXNpYmxlOw0KfQ0KLmVsLXRhYmxlOjphZnRlciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCi5idG5zIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC13cmFwOiB3cmFwOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTsNCiAgYnV0dG9uIHsNCiAgICBmbGV4OiAxOw0KICAgIG1hcmdpbjogNXB4Ow0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/bussiness/info","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <SearchFormBox>\r\n      <el-form\r\n        :model=\"queryParams\"\r\n        ref=\"queryForm\"\r\n        size=\"small\"\r\n        :inline=\"true\"\r\n        v-show=\"showSearch\"\r\n        label-width=\"68px\"\r\n      >\r\n        <el-form-item label=\"用户ID\" prop=\"userId\">\r\n          <el-input\r\n            v-model=\"queryParams.userId\"\r\n            placeholder=\"请输入用户ID\"\r\n            clearable\r\n            @keyup.enter.native=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\" prop=\"address\">\r\n          <el-input\r\n            v-model=\"queryParams.address\"\r\n            placeholder=\"请输入地址\"\r\n            clearable\r\n            @keyup.enter.native=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"地址类型\" prop=\"walletType\">\r\n          <el-select\r\n            v-model=\"queryParams.walletType\"\r\n            placeholder=\"请选择地址类型\"\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"dict in dict.type.t_address_type\"\r\n              :key=\"dict.value\"\r\n              :label=\"dict.label\"\r\n              :value=\"dict.value\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"small\"\r\n            @click=\"handleQuery\"\r\n            >搜索</el-button\r\n          >\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\"\r\n            >重置</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </SearchFormBox>\r\n    <TableContentBox>\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n        <right-toolbar\r\n          :showSearch.sync=\"showSearch\"\r\n          @queryTable=\"getList\"\r\n        ></right-toolbar>\r\n      </el-row>\r\n\r\n      <el-table\r\n        ref=\"table\"\r\n        height=\"calc(100vh - 360px)\"\r\n        border\r\n        v-loading=\"loading\"\r\n        :data=\"infoList\"\r\n      >\r\n        <el-table-column label=\"用户ID\" align=\"center\" prop=\"userId\" />\r\n        <el-table-column label=\"地址\" align=\"center\" prop=\"address\">\r\n          <template slot-scope=\"scope\">\r\n            <div v-if=\"scope.row.address\">\r\n              <el-link\r\n                :underline=\"false\"\r\n                v-clipboard=\"scope.row.address\"\r\n                v-clipboard:success=\"clipboardSuccess\"\r\n              >\r\n                {{\r\n                  scope.row.address &&\r\n                  `${scope.row.address.substr(\r\n                    0,\r\n                    4\r\n                  )}******${scope.row.address.substr(-4)}`\r\n                }}\r\n                <i class=\"el-icon-copy-document\"></i>\r\n              </el-link>\r\n            </div>\r\n            <div v-else>无地址</div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"地址类型\" align=\"center\" prop=\"walletType\">\r\n          <template slot-scope=\"scope\">\r\n            <dict-tag\r\n              :options=\"dict.type.t_address_type\"\r\n              :value=\"scope.row.walletType\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"授权USDT金额上限\"\r\n          align=\"center\"\r\n          prop=\"usdtAllowed\"\r\n        />\r\n        <el-table-column label=\"钱包U余额\" align=\"center\" prop=\"usdt\" />\r\n        <el-table-column label=\"钱包ETH余额\" align=\"center\" prop=\"eth\" />\r\n        <el-table-column label=\"钱包TRX余额\" align=\"center\" prop=\"trx\" />\r\n        <el-table-column label=\"监控额度\" align=\"center\" prop=\"usdtMonitor\" />\r\n        <el-table-column label=\"defi授权假分\" align=\"center\" prop=\"status\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.status == 'Y'\"> 是</span>\r\n            <span v-else-if=\"scope.row.status == 'N'\"> 否</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"操作\"\r\n          fixed=\"right\"\r\n          align=\"center\"\r\n          width=\"220\"\r\n          class-name=\"small-padding fixed-width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"btns\">\r\n              <el-button\r\n                size=\"small\"\r\n                plain\r\n                type=\"success\"\r\n                @click=\"refresh(scope.row)\"\r\n              >\r\n                刷新\r\n              </el-button>\r\n              <el-button\r\n                size=\"small\"\r\n                plain\r\n                type=\"warning\"\r\n                v-hasPermi=\"['bussiness:info:edit']\"\r\n                @click=\"collection(scope.row)\"\r\n              >\r\n                归集\r\n              </el-button>\r\n              <el-button\r\n                size=\"small\"\r\n                plain\r\n                type=\"danger\"\r\n                v-hasPermi=\"['bussiness:info:edit']\"\r\n                @click=\"handleUpdate(scope.row)\"\r\n              >\r\n                监控额度\r\n              </el-button>\r\n              <el-button\r\n                size=\"small\"\r\n                plain\r\n                type=\"primary\"\r\n                v-hasPermi=\"['bussiness:info:edit']\"\r\n                @click=\"UpdateDefi(scope.row)\"\r\n              >\r\n                defi授权假分\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <pagination\r\n        v-show=\"total\"\r\n        :total=\"total\"\r\n        :page.sync=\"queryParams.pageNum\"\r\n        :limit.sync=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </TableContentBox>\r\n\r\n    <!-- 添加或修改钱包地址授权详情对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"监控额度\" prop=\"usdtMonitor\">\r\n          <el-input\r\n            type=\"number\"\r\n            v-model=\"form.usdtMonitor\"\r\n            placeholder=\"请输入监控额度\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 添加或修改defi假分对话框 -->\r\n    <el-dialog\r\n      :title=\"defiTitle\"\r\n      :visible.sync=\"defiOpen\"\r\n      width=\"500px\"\r\n      append-to-body\r\n    >\r\n      <el-form\r\n        ref=\"defiForm\"\r\n        :model=\"defiForm\"\r\n        :rules=\"defiFormRules\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item label=\"钱包余额\" prop=\"usdt\">\r\n          <el-input type=\"number\" v-model=\"defiForm.usdt\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"授权\" prop=\"usdtAllowed\">\r\n          <el-input type=\"number\" v-model=\"defiForm.usdtAllowed\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"DEFI假分\" prop=\"status\">\r\n          <el-select\r\n            v-model=\"defiForm.status\"\r\n            style=\"width: 100%; margin-right: 10px\"\r\n          >\r\n            <el-option label=\"是\" value=\"Y\"></el-option>\r\n            <el-option label=\"否\" value=\"N\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitDefiForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  listInfo,\r\n  getInfo,\r\n  delInfo,\r\n  addInfo,\r\n  updateInfo,\r\n  refreshApi,\r\n  collectionApi,\r\n} from \"@/api/bussiness/info\";\r\n\r\nexport default {\r\n  name: \"Info\",\r\n  dicts: [\"t_address_type\"],\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 钱包地址授权详情表格数据\r\n      infoList: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      defiTitle: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否显示弹出层\r\n      defiOpen: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        userId: null,\r\n        address: null,\r\n        walletType: null,\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n        usdtMonitor: [\r\n          { required: true, message: \"监控额度不能为空\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      defiForm: {},\r\n      defiFormRules: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 复制代码成功 */\r\n    clipboardSuccess() {\r\n      this.$modal.msgSuccess(\"复制成功\");\r\n    },\r\n    /**\r\n     * 刷新钱包余额\r\n     */\r\n    async refresh(row) {\r\n      const res = await refreshApi({\r\n        userId: row.userId,\r\n        address: row.address,\r\n      });\r\n      if (res.code == 200) {\r\n        this.$modal.msgSuccess(res.msg);\r\n        this.getList();\r\n      } else {\r\n        this.$modal.msgError(res.msg);\r\n      }\r\n    },\r\n    /**\r\n     * 归集\r\n     */\r\n    async collection(row) {\r\n      const res = await collectionApi({\r\n        userId: row.userId,\r\n        address: row.address,\r\n      });\r\n      if (res.code == 200) {\r\n        this.$modal.msgSuccess(res.msg);\r\n        this.getList();\r\n      } else {\r\n        this.$modal.msgError(res.msg);\r\n      }\r\n    },\r\n\r\n    /** 查询钱包地址授权详情列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listInfo(this.queryParams).then((response) => {\r\n        this.infoList = response.rows;\r\n        this.total = response.total;\r\n        this.loading = false;\r\n      });\r\n      // this.$refs.table.doLayout();\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.defiOpen = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        userId: null,\r\n        address: null,\r\n        walletType: null,\r\n        usdtAllowed: null,\r\n        usdt: null,\r\n        eth: null,\r\n        btc: null,\r\n        allowedNotice: null,\r\n        usdtMonitor: null,\r\n        createBy: null,\r\n        createTime: null,\r\n        updateBy: null,\r\n        updateTime: null,\r\n        remark: null,\r\n        searchValue: null,\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const userId = row.userId || this.ids;\r\n      getInfo(userId).then((response) => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改监控额度\";\r\n      });\r\n    },\r\n    /**defi假分 */\r\n    UpdateDefi(row) {\r\n      this.reset();\r\n      const userId = row.userId || this.ids;\r\n      getInfo(userId).then((response) => {\r\n        this.defiForm = response.data;\r\n        this.defiOpen = true;\r\n        this.defiTitle = \"DEFI假分\";\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitDefiForm() {\r\n      this.$refs[\"defiForm\"].validate((valid) => {\r\n        if (valid) {\r\n          if (this.defiForm.userId != null) {\r\n            updateInfo(this.defiForm).then((response) => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.defiOpen = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          if (this.form.userId != null) {\r\n            updateInfo(this.form).then((response) => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          } else {\r\n            addInfo(this.form).then((response) => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-table {\r\n  overflow: auto;\r\n}\r\n.el-table__body-wrapper {\r\n  overflow: visible;\r\n}\r\n.el-table::after {\r\n  position: relative;\r\n}\r\n.btns {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-evenly;\r\n  button {\r\n    flex: 1;\r\n    margin: 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}