{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\src\\views\\pledge\\ming\\pledgeNum.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\src\\views\\pledge\\ming\\pledgeNum.vue","mtime":1698845798000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\交易所9.27\\0-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBwbGVkZ2VMaXN0LA0KICBsaXN0VXNlckFsbCwNCiAgYWRkUGxlZGdlLA0KICB1cGRhdGVQbGVkZ2UsDQogIGRlbFBsZWRnZSwNCn0gZnJvbSAiQC9hcGkvYnVzc2luZXNzL21pbmcuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICBhcHBVc2VySWQ6ICIiLA0KICAgICAgfSwNCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tg0KICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwNCiAgICAgIG1pbmdMaXN0OiBbXSwNCiAgICAgIHVzZXJPcHRpb25zOiBbXSwNCiAgICAgIHByb2R1Y3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvZHVjdElkLA0KDQogICAgICBvcGVuUGxlZGdlOiBmYWxzZSwNCiAgICAgIHVzZXJNc2c6IHt9LA0KICAgICAgdGl0bGVQbGVkZ2U6ICIiLA0KICAgICAgcGxlZGdlbWFpbklkOiAiIiwNCiAgICAgIGZvcm1QbGVkZ2U6IHsNCiAgICAgICAgYXBwVXNlcklkOiAiIiwNCiAgICAgICAgcGxlZGdlTnVtOiAwLA0KICAgICAgfSwNCiAgICAgIHJ1bGVzUGxlZGdlOiB7DQogICAgICAgIGFwcFVzZXJJZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nnlKjmiLciLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LA0KICAgICAgICBdLA0KICAgICAgICBwbGVkZ2VOdW06IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6ZmQ6LSt5qyh5pWw5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgICAgc2hvd0Rpc2FibGVkOiBmYWxzZSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOw0KICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOw0KICAgIH0sDQogICAgaGFuZGxlQWRkKCkgew0KICAgICAgdGhpcy5vcGVuUGxlZGdlID0gdHJ1ZTsNCiAgICAgIHRoaXMudGl0bGVQbGVkZ2UgPSAi6ZmQ6LSt6K6+572uIjsNCiAgICAgIHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSAiIjsNCiAgICAgIHRoaXMuZm9ybVBsZWRnZS5wbGVkZ2VOdW0gPSAiIjsNCiAgICAgIHRoaXMuc2hvd0Rpc2FibGVkID0gZmFsc2U7DQogICAgICBsaXN0VXNlckFsbCh0aGlzLnByb2R1Y3RJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMudXNlck9wdGlvbnMgPSByZXMucm93czsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc3VibWl0Rm9ybTIoKSB7DQogICAgICB0aGlzLiRyZWZzWyJmb3JtUGxlZGdlIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGxldCBwYXJhbXMgPSB7fTsNCg0KICAgICAgICAgIC8vIOaWsOWing0KICAgICAgICAgIGlmICghdGhpcy5zaG93RGlzYWJsZWQpIHsNCiAgICAgICAgICAgIHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgYXBwVXNlcklkOiB0aGlzLmZvcm1QbGVkZ2UuYXBwVXNlcklkLA0KICAgICAgICAgICAgICBwbGVkZ2VOdW06IHRoaXMuZm9ybVBsZWRnZS5wbGVkZ2VOdW0sDQogICAgICAgICAgICAgIHByb2R1Y3RJZDogdGhpcy5wcm9kdWN0SWQsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgYWRkUGxlZGdlKHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAiMjAwIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuiuvue9ruaIkOWKnyIpOw0KICAgICAgICAgICAgICAgIHRoaXMub3BlblBsZWRnZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1QbGVkZ2UucGxlZGdlTnVtID0gMDsNCiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIOS/ruaUuQ0KICAgICAgICAgICAgcGFyYW1zID0gew0KICAgICAgICAgICAgICBhcHBVc2VySWQ6IHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQsDQogICAgICAgICAgICAgIHBsZWRnZU51bTogdGhpcy5mb3JtUGxlZGdlLnBsZWRnZU51bSwNCiAgICAgICAgICAgICAgcHJvZHVjdElkOiB0aGlzLnByb2R1Y3RJZCwNCiAgICAgICAgICAgICAgaWQ6IHRoaXMucGxlZGdlbWFpbklkLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHVwZGF0ZVBsZWRnZShwYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gIjIwMCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLorr7nva7miJDlip8iKTsNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5QbGVkZ2UgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1QbGVkZ2UuYXBwVXNlcklkID0gIiI7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtUGxlZGdlLnBsZWRnZU51bSA9IDA7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjYW5jZWwyKCkgew0KICAgICAgdGhpcy5vcGVuUGxlZGdlID0gZmFsc2U7DQogICAgfSwNCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UoKSB7fSwNCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtc1sicHJvZHVjdElkIl0gPSB0aGlzLnByb2R1Y3RJZDsNCiAgICAgIHBsZWRnZUxpc3QodGhpcy5xdWVyeVBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PSAiMjAwIikgew0KICAgICAgICAgIHRoaXMubWluZ0xpc3QgPSByZXMucm93czsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZShpdGVtKSB7DQogICAgICBkZWxQbGVkZ2UoaXRlbS5pZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PSAiMjAwIikgew0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZShpdGVtKSB7DQogICAgICB0aGlzLm9wZW5QbGVkZ2UgPSB0cnVlOw0KICAgICAgLy8gdGhpcy5mb3JtUGxlZGdlPWl0ZW0NCiAgICAgIHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSBpdGVtLmFwcFVzZXJJZDsNCiAgICAgIHRoaXMuZm9ybVBsZWRnZS5wbGVkZ2VOdW0gPSBpdGVtLnBsZWRnZU51bTsNCiAgICAgIHRoaXMudXNlck1zZyA9IGBpZDoke2l0ZW0udGFwcFVzZXIuYXBwVXNlcklkfSDnmbvlvZXlkI3vvJoke2l0ZW0udGFwcFVzZXIubG9naW5OYW1lfWA7DQogICAgICB0aGlzLnNob3dEaXNhYmxlZCA9IHRydWU7DQogICAgICB0aGlzLnBsZWRnZW1haW5JZCA9IGl0ZW0uaWQ7DQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuZm9ybVBsZWRnZS5hcHBVc2VySWQgPSBudWxsOw0KICAgICAgdGhpcy5mb3JtUGxlZGdlLnBsZWRnZU51bSA9IG51bGw7DQogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybVBsZWRnZSIpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["pledgeNum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pledgeNum.vue","sourceRoot":"src/views/pledge/ming","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <SearchFormBox>\r\n      <el-form\r\n        :model=\"queryParams\"\r\n        ref=\"queryForm\"\r\n        size=\"small\"\r\n        :inline=\"true\"\r\n        v-show=\"showSearch\"\r\n        label-width=\"68px\"\r\n      >\r\n        <el-form-item label=\"用户ID\" prop=\"appUserId\">\r\n          <el-input\r\n            v-model=\"queryParams.appUserId\"\r\n            clearable\r\n            @keyup.enter.native=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"handleQuery\"\r\n            >搜索</el-button\r\n          >\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\"\r\n            >重置</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </SearchFormBox>\r\n    <TableContentBox>\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n        <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"primary\"\r\n            plain\r\n            icon=\"el-icon-plus\"\r\n            size=\"mini\"\r\n            @click=\"handleAdd\"\r\n            v-hasPermi=\"[\r\n              'bussiness:productUser:add',\r\n              'bussiness:user:getListByPledge',\r\n            ]\"\r\n            >新增</el-button\r\n          >\r\n        </el-col>\r\n        <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"success\"\r\n            plain\r\n            size=\"mini\"\r\n            @click=\"$router.push(`/pledge/ming`)\"\r\n            >返回</el-button\r\n          >\r\n        </el-col>\r\n        <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\">\r\n        </right-toolbar>\r\n      </el-row>\r\n      <el-table\r\n        height=\"calc(100vh - 400px)\"\r\n        border\r\n        v-loading=\"loading\"\r\n        :data=\"mingList\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n        <el-table-column type=\"index\" width=\"55\" align=\"center\" />\r\n        <el-table-column label=\"ID\" align=\"center\" width=\"80\" prop=\"id\" />\r\n        <el-table-column\r\n          label=\"用户ID\"\r\n          align=\"center\"\r\n          width=\"80\"\r\n          prop=\"appUserId\"\r\n        />\r\n        <el-table-column\r\n          label=\"登录名\"\r\n          align=\"center\"\r\n          prop=\"tappUser.loginName\"\r\n        />\r\n        <el-table-column label=\"测试用户\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              plain\r\n              v-if=\"scope.row.tappUser.isTest == 0\"\r\n              >否</el-tag\r\n            >\r\n            <el-tag\r\n              type=\"info\"\r\n              size=\"mini\"\r\n              plain\r\n              v-else-if=\"scope.row.tappUser.isTest == 1\"\r\n              >是</el-tag\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"限购产品ID\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"productId\"\r\n        />\r\n        <el-table-column\r\n          label=\"限购产品标题\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"title\"\r\n        />\r\n        <el-table-column\r\n          label=\"限购次数\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          prop=\"pledgeNum\"\r\n        />\r\n        <el-table-column\r\n          fixed=\"right\"\r\n          label=\"操作\"\r\n          align=\"center\"\r\n          width=\"220\"\r\n          class-name=\"small-padding fixed-width\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"btns\">\r\n              <el-button\r\n                plain\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"handleUpdate(scope.row)\"\r\n                v-hasPermi=\"['bussiness:productUser:edit']\"\r\n                >修改</el-button\r\n              >\r\n              <el-button\r\n                plain\r\n                size=\"small\"\r\n                type=\"danger\"\r\n                @click=\"handleDelete(scope.row)\"\r\n                v-hasPermi=\"['bussiness:productUser:remove']\"\r\n                >删除</el-button\r\n              >\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <pagination\r\n        v-show=\"total > 0\"\r\n        :total=\"total\"\r\n        :page.sync=\"queryParams.pageNum\"\r\n        :limit.sync=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </TableContentBox>\r\n    <!-- 限购设置 -->\r\n    <el-dialog\r\n      :title=\"titlePledge\"\r\n      :visible.sync=\"openPledge\"\r\n      width=\"800px\"\r\n      append-to-body\r\n      @close=\"close\"\r\n    >\r\n      <el-form\r\n        ref=\"formPledge\"\r\n        :model=\"formPledge\"\r\n        :rules=\"rulesPledge\"\r\n        label-width=\"120px\"\r\n        style=\"min-height: 200px\"\r\n      >\r\n        <el-form-item label=\"限购次数\" prop=\"pledgeNum\">\r\n          <el-input v-model=\"formPledge.pledgeNum\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"用户\" prop=\"id\" v-if=\"showDisabled\">\r\n          <el-input v-model=\"userMsg\" disabled />\r\n        </el-form-item>\r\n        <el-form-item label=\"用户\" prop=\"appUserId\" v-else>\r\n          <el-select\r\n            :default-first-option=\"false\"\r\n            v-model=\"formPledge.appUserId\"\r\n            placeholder=\"请选择用户或搜索用户id/名称\"\r\n            style=\"width: 100%\"\r\n            filterable\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"item in userOptions\"\r\n              :key=\"item.userId\"\r\n              :label=\"`id:${item.userId}   登录名：${item.loginName}`\"\r\n              :value=\"item.userId\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm2\">确 定</el-button>\r\n        <el-button @click=\"cancel2\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  pledgeList,\r\n  listUserAll,\r\n  addPledge,\r\n  updatePledge,\r\n  delPledge,\r\n} from \"@/api/bussiness/ming.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      total: 0,\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        appUserId: \"\",\r\n      },\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      mingList: [],\r\n      userOptions: [],\r\n      productId: this.$route.query.productId,\r\n\r\n      openPledge: false,\r\n      userMsg: {},\r\n      titlePledge: \"\",\r\n      pledgemainId: \"\",\r\n      formPledge: {\r\n        appUserId: \"\",\r\n        pledgeNum: 0,\r\n      },\r\n      rulesPledge: {\r\n        appUserId: [\r\n          { required: true, message: \"请选择用户\", trigger: \"change\" },\r\n        ],\r\n        pledgeNum: [\r\n          { required: true, message: \"限购次数不能为空\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      showDisabled: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    handleAdd() {\r\n      this.openPledge = true;\r\n      this.titlePledge = \"限购设置\";\r\n      this.formPledge.appUserId = \"\";\r\n      this.formPledge.pledgeNum = \"\";\r\n      this.showDisabled = false;\r\n      listUserAll(this.productId).then((res) => {\r\n        this.userOptions = res.rows;\r\n      });\r\n    },\r\n    submitForm2() {\r\n      this.$refs[\"formPledge\"].validate((valid) => {\r\n        if (valid) {\r\n          let params = {};\r\n\r\n          // 新增\r\n          if (!this.showDisabled) {\r\n            params = {\r\n              appUserId: this.formPledge.appUserId,\r\n              pledgeNum: this.formPledge.pledgeNum,\r\n              productId: this.productId,\r\n            };\r\n            addPledge(params).then((res) => {\r\n              if (res.code == \"200\") {\r\n                this.$modal.msgSuccess(\"设置成功\");\r\n                this.openPledge = false;\r\n                this.formPledge.appUserId = \"\";\r\n                this.formPledge.pledgeNum = 0;\r\n                this.getList();\r\n              }\r\n            });\r\n          } else {\r\n            // 修改\r\n            params = {\r\n              appUserId: this.formPledge.appUserId,\r\n              pledgeNum: this.formPledge.pledgeNum,\r\n              productId: this.productId,\r\n              id: this.pledgemainId,\r\n            };\r\n            updatePledge(params).then((res) => {\r\n              if (res.code == \"200\") {\r\n                this.$modal.msgSuccess(\"设置成功\");\r\n                this.openPledge = false;\r\n                this.formPledge.appUserId = \"\";\r\n                this.formPledge.pledgeNum = 0;\r\n                this.getList();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    cancel2() {\r\n      this.openPledge = false;\r\n    },\r\n    handleSelectionChange() {},\r\n    getList() {\r\n      this.queryParams[\"productId\"] = this.productId;\r\n      pledgeList(this.queryParams).then((res) => {\r\n        if (res.code == \"200\") {\r\n          this.mingList = res.rows;\r\n          this.total = res.total;\r\n        }\r\n      });\r\n    },\r\n    handleDelete(item) {\r\n      delPledge(item.id).then((res) => {\r\n        if (res.code == \"200\") {\r\n          this.getList();\r\n        }\r\n      });\r\n    },\r\n    handleUpdate(item) {\r\n      this.openPledge = true;\r\n      // this.formPledge=item\r\n      this.formPledge.appUserId = item.appUserId;\r\n      this.formPledge.pledgeNum = item.pledgeNum;\r\n      this.userMsg = `id:${item.tappUser.appUserId} 登录名：${item.tappUser.loginName}`;\r\n      this.showDisabled = true;\r\n      this.pledgemainId = item.id;\r\n    },\r\n    close() {\r\n      this.formPledge.appUserId = null;\r\n      this.formPledge.pledgeNum = null;\r\n      this.resetForm(\"formPledge\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]}]}