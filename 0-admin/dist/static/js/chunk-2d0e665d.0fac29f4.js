(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0e665d"],{9929:function(e,r,t){"use strict";t.r(r),t("ac1f"),t("00b4"),t("a9e3"),t("d9e2"),t("d81d"),t("4de4"),t("d3b7"),t("14d9"),t("e9c4");var n=t("e876"),i={name:"Config",dicts:["def_status"],data:function(){function e(e,r,t){if(r&&(!/^[1-9]\d*(\.\d{1,6})?$|^0(\.\d{1,6})?$/.test(r)||0===Number(r)))return t(new Error("请输入最多保留6位小数的大于0的数字"));t()}var r=this;return{type:0,currentTypeList:{},index:"",total:0,orderList:[],open:!1,title:"",loading:!0,activeName:"second",form:{coinName:"",coin:"",rechargeMax:"",rechargeMin:"",coinAddress:"",rechargeNum:""},currentType:"",rules:{coinName:[{required:!0,message:"币种名称不能为空",trigger:"blur"}],coin:[{required:!0,message:"币种类型不能为空",trigger:"blur"},{validator:function(e,r,t){if(r&&!/^[a-z]+$/.test(r))return t(new Error("币种类型只能为小写"));t()},trigger:"blur"}],rechargeMax:[{required:!0,message:"请输入充值最大额",trigger:"blur"},{validator:e,trigger:"blur"},{validator:function(e,t,n){if(t&&Number(t)<=Number(r.form.rechargeMin))return n(new Error("充值最大额不能小于充值最低额"));n()},trigger:"blur"}],rechargeMin:[{required:!0,message:"请输入充值最低额",trigger:"blur"},{validator:e,trigger:"blur"},{validator:function(e,t,n){if(t&&Number(t)>=Number(r.form.rechargeMax))return n(new Error("充值最低额不大于充值最大额"));n()},trigger:"blur"}],coinAddress:[{required:!0,message:"请输入Btc充值地址",trigger:"blur"}],rechargeNum:[{required:!0,message:"请输入充值次数",trigger:"blur"},{validator:function(e,r,t){if(r&&!/^\+?[1-9][0-9]*$/.test(r))return t(new Error("只能输入非零的正整数"));t()},trigger:"blur"}]},currencyForm:{currencyList:[]}}},mounted:function(){this.getRecharge()},methods:{reset:function(){this.form={coinName:"",coin:"",rechargeMax:"",rechargeMin:"",coinAddress:"",rechargeNum:""}},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},cancel:function(){this.open=!1,this.reset()},getRecharge:function(){var e=this;Object(n.b)("ASSET_COIN").then((function(r){e.orderList=r.data,e.loading=!1}))},submitForm:function(){var e=this;this.$refs.form.validate((function(r){var t=!0;r&&(null!=e.form.change?(r=[],r=e.orderList.map((function(r,t){return r.coinName==e.currentType?e.form:r})),Object(n.d)("ASSET_COIN",r).then((function(r){200===r.code&&(e.$message({message:"修改成功",type:"success"}),e.getRecharge(),e.open=!1,e.reset())}))):(e.orderList.filter((function(r){r.coinName==e.form.coinName&&(e.$modal.msgSuccess("充值类型不能重复"),t=!1)})),t&&(e.orderList.push(e.form),Object(n.d)("ASSET_COIN",JSON.stringify(e.orderList)).then((function(r){200===r.code&&(e.$message({message:"保存成功",type:"success"}),e.getRecharge(),e.open=!1,e.reset())})))))}))},addBtn:function(){this.type=1,this.open=!0},handleDelete:function(e){var r=this,t=this.orderList.filter((function(r){return r.coinName!=e.coinName}));Object(n.d)("ASSET_COIN",JSON.stringify(t)).then((function(e){200===e.code&&(r.$message({message:"删除成功",type:"success"}),r.getRecharge())}))},handleChange:function(e){this.form=e,this.currentType=e.coinName,this.form.change=!0,this.open=!0,this.type=2,this.title="修改充值通道"}}};t=t("2877"),t=Object(t.a)(i,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("TableContentBox",[t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["bussiness:currency:add"],expression:"['bussiness:currency:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.addBtn}},[e._v("新增")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{height:"calc(100vh - 360px)",border:"",data:e.orderList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{label:"币种名称",align:"center",prop:"coinName"}}),t("el-table-column",{attrs:{label:"币种类型",align:"center",prop:"coin"}}),t("el-table-column",{attrs:{label:"充值最低额",align:"center",prop:"rechargeMin"}}),t("el-table-column",{attrs:{label:"充值最大额",align:"center",prop:"rechargeMax"}}),t("el-table-column",{attrs:{label:"充值地址",align:"center",prop:"coinAddress",width:"200"}}),t("el-table-column",{attrs:{label:"充值次数",align:"center",prop:"rechargeNum"}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["bussiness:user:edit"],expression:"['bussiness:user:edit']"}],attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){return e.handleChange(r.row)}}},[e._v("修改")]),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["bussiness:user:remove"],expression:"['bussiness:user:remove']"}],attrs:{size:"small",plain:"",type:"danger"},on:{click:function(t){return e.handleDelete(r.row)}}},[e._v("删除")])]}}])})],1)],1),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(r){e.open=r}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[1==e.type?t("el-form-item",{attrs:{label:"币种名称",prop:"coinName"}},[t("el-input",{model:{value:e.form.coinName,callback:function(r){e.$set(e.form,"coinName",r)},expression:"form.coinName"}})],1):2===e.type?t("el-form-item",{attrs:{label:"币种名称",prop:"coinName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.coinName,callback:function(r){e.$set(e.form,"coinName",r)},expression:"form.coinName"}})],1):e._e(),1==e.type?t("el-form-item",{attrs:{label:"币种类型",prop:"coin"}},[t("el-input",{model:{value:e.form.coin,callback:function(r){e.$set(e.form,"coin",r)},expression:"form.coin"}})],1):2===e.type?t("el-form-item",{attrs:{label:"币种类型",prop:"coin"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.coin,callback:function(r){e.$set(e.form,"coin",r)},expression:"form.coin"}})],1):e._e(),t("el-form-item",{attrs:{label:"充值最大额",prop:"rechargeMax"}},[t("el-input",{attrs:{type:"number"},model:{value:e.form.rechargeMax,callback:function(r){e.$set(e.form,"rechargeMax",r)},expression:"form.rechargeMax"}})],1),t("el-form-item",{attrs:{label:"充值最低额",prop:"rechargeMin"}},[t("el-input",{model:{value:e.form.rechargeMin,callback:function(r){e.$set(e.form,"rechargeMin",r)},expression:"form.rechargeMin"}})],1),t("el-form-item",{attrs:{label:"充值地址",prop:"coinAddress"}},[t("el-input",{model:{value:e.form.coinAddress,callback:function(r){e.$set(e.form,"coinAddress",r)},expression:"form.coinAddress"}})],1),t("el-form-item",{attrs:{label:"充值次数",prop:"rechargeNum"}},[t("el-input",{model:{value:e.form.rechargeNum,callback:function(r){e.$set(e.form,"rechargeNum",r)},expression:"form.rechargeNum"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),t("router-view")],1)}),[],!1,null,null,null);r.default=t.exports}}]);