import{h as a,r as l,c as e,A as s,a as t,j as u,u as o,k as n,t as d,y as i,q as c,C as r,w as v,F as m,s as p,I as y,aD as f,o as _,p as g,a1 as h,a2 as T}from"./vendor-DNdropHc.js";/* empty css              */import{_ as w,r as x,Z as M,x as U,ar as V,k as b,B as k,t as D,e as I}from"./index-D_GDdZsP.js";import{g as j,a as C}from"./loan-D_2Nqt-Z.js";const F=""+new URL("delete-X7yb1JcD.png",import.meta.url).href,S=a=>(h("data-v-d15a0887"),a=a(),T(),a),L={class:"content"},N={class:"top"},R={class:"tip"},B={class:"type"},q=S((()=>n("span",null,null,-1))),J={class:"form"},O={class:"type"},z=S((()=>n("span",null,"(USDT)",-1))),A={class:"form"},E={class:"formInput"},X=["placeholder"],Z={class:"action"},G=["onClick"],H={class:"selector"},K={class:"type"},P={class:"form"},Q={class:"formInput"},W={class:"loan-detail"},Y={class:"item"},$={class:"left"},aa={class:"right"},la={class:"item"},ea={class:"left"},sa={class:"right"},ta={class:"item"},ua={class:"left"},oa={class:"right"},na={class:"item"},da={class:"left"},ia={class:"right"},ca={class:"bottom"},ra={class:"upload"},va={class:"photo"},ma={class:"hui"},pa={class:"upload-box"},ya={class:"item"},fa=S((()=>n("img",{src:F,alt:"",class:"img"},null,-1))),_a={class:"tit"},ga={class:"item"},ha=S((()=>n("img",{src:F,alt:"",class:"img"},null,-1))),Ta={class:"tit"},wa={class:"item"},xa=S((()=>n("img",{src:F,alt:"",class:"img"},null,-1))),Ma={class:"tit"},Ua=w({__name:"index",setup(h){const{_toast:T}=x(),w=a(),F=l([]),S=l(""),Ua=l({}),Va=l({}),ba=l([]),ka=l([]),Da=l([]),Ia=l([]),ja=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(p(l.msg),ka.value=[])}))},Ca=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(p(l.msg),Da.value=[])}))},Fa=a=>{a.status="uploading";let l=new FormData;l.append("file",a.file),V(l).then((l=>{"200"==(l=l.data).code?(a.res=l.data.url,a.status="success"):(p(l.msg),Ia.value=[])}))},Sa=e((()=>{let a=0;return S.value&&(null==Va?void 0:Va.value.odds)&&(null==Va?void 0:Va.value.cycleType)&&(a=b(k(D(D(S.value,Va.value.odds),Va.value.cycleType),100),2)),a})),La={iconRight:[{iconName:"guize",clickTo:"/loan-rule"},{iconName:"jilu",clickTo:"/loan-record"}]},Na=l(!1);s((async()=>{await Ba(),qa()}));const Ra=l(),Ba=async()=>{const a=await M("t_repay_type");"200"==a.code&&(Ra.value=a.data)},qa=async()=>{const a=await j();"200"==a.code&&(F.value=a.rows,ba.value=a.rows.map(((a,l)=>{var e;return{id:l,name:a.cycleType,value:a.id,amountMin:a.amountMin,amountMax:a.amountMax,repayTypeLabel:null==(e=Ra.value)?void 0:e.filter((l=>parseInt(l.dictValue)==a.repayType))[0].dictLabel}})),Ja(ba.value[0]))},Ja=a=>{Ua.value=a,Va.value=F.value.find((l=>l.id==a.value)),Na.value=!1},Oa=()=>{if(""==S.value||S.value>Va.value.amountMax||S.value<Va.value.amountMin)return void T("loan_amountErr");if(0==ka.value.length)return void T("loan_idcardFront");if(0==Da.value.length)return void T("loan_idcardReverse");if(0==Ia.value.length)return void T("loan_hand");let a=(ka.value[0]||{}).res;let l=(Da.value[0]||{}).res;let e=(Ia.value[0]||{}).res;C({proId:Va.value.id,cycleType:Va.value.cycleType,cardUrl:a,cardBackUrl:l,capitalUrl:e,amount:S.value}).then((a=>{"200"==a.code?(T("loan_applySuccess"),setTimeout((()=>{w.push("/loan-record")}),500)):p(a.msg)}))},za=l(!1),Aa=()=>{(S.value>Va.value.amountMax||S.value<Va.value.amountMin)&&(za.value=!0,T("loan_amountMore"),S.value="")};return(a,l)=>{const e=y,s=f;return _(),t(m,null,[u(U,{currentName:o(I)("asset_loan"),cuttentRight:La,border_bottom:!0},null,8,["currentName"]),n("div",L,[n("div",N,[n("strong",R,d(o(I)("loan_msg")),1),n("div",B,[i(d(o(I)("loan_product"))+" ",1),q]),n("div",J,[n("div",{class:"formInput",onClick:l[0]||(l[0]=a=>Na.value=!0)},[n("p",null,d(Va.value.amountMin)+"-"+d(Va.value.amountMax),1)])]),n("div",O,[i(d(o(I)("loan_amount"))+" ",1),z]),n("div",A,[n("div",E,[c(n("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>S.value=a),class:"form-input",placeholder:o(I)("loan_pleaseInput"),onBlur:Aa},null,40,X),[[r,S.value]])])]),u(e,{show:Na.value,"onUpdate:show":l[2]||(l[2]=a=>Na.value=a),style:{"max-width":"var(--ex-max-width)",left:"50%",translate:"-50%"}},{default:v((()=>[n("ul",Z,[(_(!0),t(m,null,g(ba.value,(a=>(_(),t("li",{key:a.id,onClick:l=>Ja(a)},[n("div",H,[n("span",null,d(a.amountMin)+"-"+d(a.amountMax)+" USDT",1)])],8,G)))),128))])])),_:1},8,["show"]),n("div",K,d(o(I)("loan_cycle")),1),n("div",P,[n("div",Q,[c(n("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>Va.value.cycleType=a),class:"form-input",disabled:""},null,512),[[r,Va.value.cycleType]])])])]),n("div",W,[n("div",Y,[n("div",$,d(o(I)("loan_rateDay")),1),n("div",aa,d(Va.value.odds)+"%",1)]),n("div",la,[n("div",ea,d(o(I)("loan_interest")),1),n("div",sa,d(Sa.value)+" USDT",1)]),n("div",ta,[n("div",ua,d(o(I)("loan_repayType")),1),n("div",oa,d(Ua.value.repayTypeLabel||""),1)]),n("div",na,[n("div",da,d(o(I)("loan_repayOrg")),1),n("div",ia,d(Va.value.repayOrg),1)])]),n("div",ca,[n("div",ra,[n("div",va,[i(d(o(I)("loan_idImg"))+" ",1),n("span",ma,"("+d(o(I)("loan_idMsg"))+")",1)])]),n("div",pa,[n("div",ya,[u(s,{"after-read":ja,modelValue:ka.value,"onUpdate:modelValue":l[4]||(l[4]=a=>ka.value=a)},{default:v((()=>[fa,n("div",_a,d(o(I)("loan_front")),1)])),_:1},8,["modelValue"])]),n("div",ga,[u(s,{"after-read":Ca,modelValue:Da.value,"onUpdate:modelValue":l[5]||(l[5]=a=>Da.value=a)},{default:v((()=>[ha,n("div",Ta,d(o(I)("loan_reverse")),1)])),_:1},8,["modelValue"])]),n("div",wa,[u(s,{"after-read":Fa,modelValue:Ia.value,"onUpdate:modelValue":l[6]||(l[6]=a=>Ia.value=a)},{default:v((()=>[xa,n("div",Ma,d(o(I)("loan_hand")),1)])),_:1},8,["modelValue"])])]),n("div",{class:"btn",onClick:Oa},d(o(I)("loan_require")),1)])])],64)}}},[["__scopeId","data-v-d15a0887"]]);export{Ua as default};
