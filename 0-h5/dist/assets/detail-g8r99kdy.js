import{e,a0 as s,A as a,a6 as i,a5 as t,o as n,a as l,k as o,t as c,u as r,F as d,p as u,q as m,v,l as f,i as p,M as b,r as y,c as _,N as h,j as w,w as C,n as g,S as I,a1 as L,a2 as k}from"./vendor-DNdropHc.js";import{_ as j,e as q,k as F,m as R,B as S,q as H,j as O,a as D,u as E,c as P}from"./index-D_GDdZsP.js";import{C as T}from"./candlestick-BYXOPo4a.js";import{m as x}from"./filters-D_uLiSV_.js";import{P as z}from"./public-CfRUb98k.js";import{L as N}from"./leftSide-C3C9HNAy.js";import"./currencyItem-D92wBTIy.js";const U={class:"dealListHeader"},A={class:"time"},B={class:"direction"},M={class:"price"},G={class:"count"},J={class:"time fw-num"},K={class:"price fw-num"},Q={class:"count fw-num"},V=j({__name:"dealList",props:{rows:{type:Number,default:20},coinInfo:{type:Object,default:()=>{}}},setup(b){const y=b,_=e({}),h=e([]),w=e([]),C=async e=>{let s=t.subscribe(H.TRADE,((s,a)=>{var i,t;if(a.symbol==e.coin&&(null==(t=null==(i=null==a?void 0:a.data)?void 0:i.tick)?void 0:t.data)){let e=a.data.tick.data;e.length>=y.rows?Object.assign(w,e):(w.splice(y.rows-e.length),w.unshift(...e))}}));h.push(s)},g=s.debounce((e=>{let s=e.detail.coinInfo;Object.assign(_,s),C(_),w.length=0}),200);return a((()=>{Object.assign(_,y.coinInfo),C(_),document.addEventListener("event_tradeSymbolChange",g)})),i((()=>{document.removeEventListener("event_tradeSymbolChange",g),h.forEach((e=>{e&&t.unsubscribe(e)}))})),(e,s)=>{const a=O;return n(),l(d,null,[o("div",U,[o("div",A,c(r(q)("k_time")),1),o("div",B,c(r(q)("bb_direction")),1),o("div",M,c(r(q)("price"))+"("+c(y.coinInfo.baseCoinUpperCase)+")",1),o("div",G,c(r(q)("metastaking_bb_count"))+"("+c(2===y.coinInfo.customizeFlag?r(x)(y.coinInfo.showSymbol,"/USDT"):y.coinInfo.coinUpperCase)+") ",1)]),(n(!0),l(d,null,u(w,((s,a)=>(n(),l("div",{class:"dealItem",key:a},[o("div",J,c(e._timeFormat(s.ts,"HH:mm:ss",!0)),1),m(o("div",{class:"fall direction fw-bold"},c(r(q)("bb_sell1")),513),[[v,"sell"==s.direction]]),m(o("div",{class:"rise direction fw-bold"},c(r(q)("purchase")),513),[[v,"buy"==s.direction]]),o("div",K,c(r(F)(s.price)),1),o("div",Q,c(r(R)(r(S)(s.amount,s.price))),1)])))),128)),0===w.length?(n(),f(a,{key:0})):p("",!0)],64)}}},[["__scopeId","data-v-5037218f"]]),W={class:"right"},X={class:"central"},Y={class:"fw-bold"},Z={class:"top"},$={class:"second"},ee={class:"secondLeft"},se={class:"secondRight"},ae={class:"secondItem"},ie={class:"itemL"},te={class:"itemR fw-num"},ne={class:"secondItem"},le={class:"itemL"},oe={class:"itemR fw-num"},ce={class:"secondItem"},re={class:"itemL"},de={class:"itemR fw-num"},ue=(e=>(L("data-v-d82f8327"),e=e(),k(),e))((()=>o("div",{class:"line"},null,-1))),me={class:"entrust"},ve={class:"entrustL"},fe={class:"entrustItem hightItem"},pe=j({__name:"detail",setup(e){const s=D(),t=E(),d=b(),u=y(!1),m=()=>{u.value=!0},v=()=>{u.value=!1};y(!1);const L=_((()=>{let e={};return e=2==Number(d.query.type)?d.query.symbol&&t.contractCoinList.filter((e=>e.coin===d.query.symbol))[0]||t.contractCoinList[0]:d.query.symbol&&t.spotCoinList.filter((e=>e.coin===d.query.symbol))[0]||t.spotCoinList[0],e})),k=_((()=>t.allCoinPriceInfo[L.value.coin]||{})),j=(e,s)=>{d.query.symbol=e,d.query.type=s||d.query.type,u.value=!1};return h((()=>{L.value.coin}),((e,s)=>{t.setCurrentCoinList(s,"remove"),t.setCurrentCoinList(e)})),a((()=>{s.setTradeFlag(s.tradeFlag+s.isOption)})),i((()=>{t.setCurrentCoinList(L.value.coin,"remove")})),(e,s)=>{var a;const i=P,t=I;return n(),l("div",null,[w(t,null,{default:C((()=>[o("header",null,[w(i,{name:"jiantou-z",class:"leftImg",onClick:s[0]||(s[0]=s=>e._back())}),o("div",W,[o("div",X,[w(i,{name:"cebian17x14",class:"firLeftImg",onClick:m}),o("div",Y,c(L.value.showSymbol),1)])])])])),_:1}),o("div",Z,[o("div",$,[o("div",ee,[o("div",{class:g([e._isRFD(k.value.open,k.value.close,"buy","rise")," fw-num"])},c(k.value.close),3),o("div",{class:g([e._isRFD(k.value.openPrice,k.value.close,"buy","rise")," rfd-sign secondLeftB fw-num"])},c(null==(a=k.value)?void 0:a.priceChangePercent)+"% ",3)]),o("div",se,[o("div",ae,[o("div",ie,c(e._t18("k_hight",["ebc"])),1),o("div",te,c(r(F)(k.value.high24)),1)]),o("div",ne,[o("div",le,c(e._t18("k_low",["ebc"])),1),o("div",oe,c(r(F)(k.value.low24)),1)]),o("div",ce,[o("div",re,c(e._t18("k_quantity")),1),o("div",de,c(r(R)(k.value.volume24)),1)])])])]),L.value.coin?(n(),f(T,{key:0,coinInfo:L.value,type:"detail"},null,8,["coinInfo"])):p("",!0),ue,o("div",me,[o("div",ve,[o("div",fe,c(e._t18("real_time_transaction")),1)])]),L.value.coin?(n(),f(V,{key:1,coinInfo:L.value,rows:20},null,8,["coinInfo"])):p("",!0),w(z,{show:r(u),direction:"left",onHandelClose:v,height:"100%",width:"80%",showHeader:!1,empty:!1},{emptyContentCustomize:C((()=>[w(N,{onLinkTo:j,onClose:v})])),_:1},8,["show"])])}}},[["__scopeId","data-v-d82f8327"]]);export{pe as default};
