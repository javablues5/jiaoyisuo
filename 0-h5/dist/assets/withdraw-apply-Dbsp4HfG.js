import{ar as a,M as e,h as l,r as n,c as s,A as o,a as t,j as u,u as i,w as c,K as r,k as d,y as v,t as p,q as m,C as w,i as y,E as _,F as h,I as f,o as b,p as k,s as q}from"./vendor-DNdropHc.js";import{_ as N,a as g,r as C,f as x,e as P,aK as A,ad as $,aF as j,at as U,R as V,aL as T,x as E,c as I,k as B,aM as L,aN as S}from"./index-D_GDdZsP.js";import{u as F}from"./useFreeze-D4J_klo6.js";import{A as R}from"./applyAmount-CYMNhqin.js";const K={class:"sheetBox"},z={class:"title fw-bold"},M=["onClick"],D={class:"bankName"},G={key:0,class:"scl"},H={class:"cardNumber fw-num"},J={class:"content"},O={class:"form"},Q={class:"coin"},W={class:"top coin-top"},X={key:0,class:"scl"},Y={key:1,class:"scl"},Z={key:0,class:"bottom"},aa={class:"left"},ea={class:"title"},la={class:"bankName"},na={class:"cardNumber fw-num"},sa={class:"num"},oa={class:"top"},ta={class:"bottom"},ua=["placeholder"],ia={key:0,class:"address"},ca={class:"top"},ra={class:"bottom"},da=["placeholder"],va={class:"password"},pa={class:"top"},ma={class:"bottom"},wa=["type","placeholder"],ya={key:0,class:"tip"},_a={class:"customer"},ha={key:0},fa={class:"ff-num"},ba={key:1},ka={class:"ff-num"},qa=N({__name:"withdraw-apply",setup(N){var qa,Na,ga;const{_isFreeze:Ca}=F();g();const{_toast:xa}=C(),Pa=x();Pa.getUserInfo();const{userInfo:Aa}=a(Pa),{asset:$a}=a(Pa),ja=e(),Ua=l(),Va=P("withdraw",["latcoin"]),Ta={iconRight:[{iconName:"jilu",clickTo:"/withdraw-order"}]},Ea=n(!1),Ia=n({}),Ba=n(!1),La=s((()=>{var a,e,l,n;let s=0;const o="card"==(null==(a=ja.query)?void 0:a.icon)&&$a.value.findIndex((a=>{var e;return j(a.symbol)==(null==(e=Ia.value.coin)?void 0:e.toLowerCase())}));for(let t=0;t<$a.value.length;t++)"card"==(null==(e=ja.query)?void 0:e.icon)?1==$a.value[t].type&&j($a.value[t].symbol)==(-1!=o?null==(l=Ia.value.coin)?void 0:l.toLowerCase():"usdt")&&(s=$a.value[t].availableAmount,ja.query.type=-1!=o?Ia.value.coin:"USDT"):1==$a.value[t].type&&j($a.value[t].symbol)==(null==(n=ja.query)?void 0:n.icon)&&(s=$a.value[t].availableAmount);return s})),Sa=a=>{let e="";return e=a.substring(0,4)+" *** *** "+a.substring(a.length-4,a.length),e},Fa=n([]);o((()=>{var a;"card"==(null==(a=ja.query)?void 0:a.icon)&&(async()=>{const a=await U();"200"==a.code&&(a.data.length>0?(Fa.value=a.data,Ia.value=Fa.value[0]):(xa("Unbound_bank_card"),setTimeout((()=>{Ua.push("/bind-card")}),1e3)))})()}));const Ra=n(""),Ka=n(null==(Na=null==(qa=Aa.value)?void 0:qa.user)?void 0:Na.address),za=n("");let Ma=()=>{Ra.value=La.value};const Da=n(null==(ga=Aa.value.detail)?void 0:ga.auditStatusAdvanced),Ga=()=>{var a,e,l,n,s,o;Pa.getUserInfo();let t=!0;if(""==Ra.value||Ra.value>La.value||Ra.value<=0)return void xa("withdraw_please_num");if("card"!=(null==(a=ja.query)?void 0:a.icon)&&""==Ka.value)return void xa("withdraw_please_address");if(""==za.value)return void xa("withdraw_please_pwd");null==(null==(e=Aa.value.detail)?void 0:e.userTardPwd)&&(t=!1,xa("withdraw_please_fundPwd"),setTimeout((()=>{Ua.push("/fund-password")}),800)),["paxpay"].includes(__config._APP_ENV)&&Ra.value>500&&(t=!1,"1"!==Da.value?(xa("please_advanced"),setTimeout((()=>{Ua.push("/certification-advanced")}),1e3)):t=!0);let u="";u="card"==(null==(l=ja.query)?void 0:l.icon)?"amount=".concat(B(Ra.value),"&coinType=BANK&pwd=").concat(za.value,"&adress=").concat(Ia.value.cardNumber,"&coin=").concat(null==(n=ja.query)?void 0:n.type.toLowerCase(),"&bankName=").concat(Ia.value.bankName,"&bankUserName=").concat(Ia.value.userName,"&bankBranch=").concat(Ia.value.bankBranch):"amount=".concat(B(Ra.value),"&coinType=").concat(null==(s=ja.query)?void 0:s.type,"&pwd=").concat(za.value,"&adress=").concat(Ka.value,"&coin=").concat(null==(o=ja.query)?void 0:o.icon),t&&(A.includes(__config._APP_ENV)?L().then((a=>{a.data?xa("last_order_info"):Ha(u)})):Ja(u))},Ha=a=>{var e;let l={coin:null==(e=ja.query)?void 0:e.type,address:Ka.value};T(l).then((e=>{"200"==e.code&&Ja(a)}))},Ja=a=>{S(a).then((a=>{"200"==a.code?(xa("withdraw_success"),setTimeout((()=>{Ua.push("/withdraw")}),500)):q(a.msg)}))},Oa=()=>{V.includes(__config._APP_ENV)?Ca(V)&&Ga():Ga()};return o((()=>{var a;A.includes(__config._APP_ENV)&&"card"!=(null==(a=ja.query)?void 0:a.icon)&&(async()=>{var a;let e={coin:null==(a=ja.query)?void 0:a.type};const l=await T(e);"200"==l.code&&l.msg&&(Ka.value=l.msg)})()})),(a,e)=>{var l,n,s,o,q;const N=E,g=I,C=f;return b(),t(h,null,[u(N,{currentName:i(Va),cuttentRight:Ta},null,8,["currentName"]),u(R,{amount:i(La),coin:null==(l=a.$route.query.type)?void 0:l.toUpperCase()},null,8,["amount","coin"]),u(C,{show:i(Ba),"onUpdate:show":e[0]||(e[0]=a=>r(Ba)?Ba.value=a:null),onSelect:a.onSelect,closeable:!1,style:{"max-width":"var(--ex-max-width)",left:"50%",translate:"-50%"}},{default:c((()=>[d("div",K,[d("div",z,p(i(P)("withdraw_select_card")),1),(b(!0),t(h,null,k(i(Fa),((e,l)=>(b(),t("div",{key:l,class:"sheetContent",onClick:a=>(a=>{Ba.value=!1,Ia.value=a})(e)},[u(g,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),d("div",null,[d("p",D,[v(p(null==e?void 0:e.bankName)+" ",1),(null==e?void 0:e.coin)?(b(),t("span",G,"（"+p(null==e?void 0:e.coin)+"）",1)):y("",!0)]),d("p",H,p(Sa(null==e?void 0:e.cardNumber)),1)])],8,M)))),128))])])),_:1},8,["show","onSelect"]),d("div",J,[d("div",O,[d("div",Q,[d("div",W,[v(p(i(P)("withdraw_coin",["bitmake"]))+" ",1),"card"==a.$route.query.icon&&(null==(n=i(Ia))?void 0:n.coin)?(b(),t("span",X,"（"+p(null==(s=i(Ia))?void 0:s.coin)+"）",1)):(b(),t("span",Y,"（"+p(a.$route.query.type)+"）",1))]),"card"!=a.$route.query.icon?(b(),t("div",Z,[d("div",aa,[u(g,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),d("div",ea,p(a.$route.query.type),1)])])):(b(),t("div",{key:1,class:"bottom2",onClick:e[1]||(e[1]=a=>Ba.value=!0)},[u(g,{name:a.$route.query.icon,class:"coin"},null,8,["name"]),d("div",null,[d("p",la,p(null==(o=i(Ia))?void 0:o.bankName),1),d("p",na,[v(p(Sa((null==(q=i(Ia))?void 0:q.cardNumber)||""))+" ",1),u(g,{name:"jiantou",class:"jiantou"})])])]))]),d("div",sa,[d("div",oa,p(i(P)("withdraw_num",["bitmake"])),1),d("div",ta,[m(d("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>r(Ra)?Ra.value=a:null),placeholder:i(P)("withdraw_input"),class:"ff-num"},null,8,ua),[[w,i(Ra)]]),d("p",{onClick:e[3]||(e[3]=a=>i(Ma)())},p(i(P)("swap_all")),1)])]),"card"!=a.$route.query.icon?(b(),t("div",ia,[d("div",ca,p(i(P)("withdraw_address")),1),d("div",ra,[m(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>r(Ka)?Ka.value=a:null),placeholder:i(P)("withdraw_input")},null,8,da),[[w,i(Ka)]])])])):y("",!0),d("div",va,[d("div",pa,p(i(P)("withdraw_pwd",["rxce"])),1),d("div",ma,[m(d("input",{type:i(Ea)?"text":"password","onUpdate:modelValue":e[5]||(e[5]=a=>r(za)?za.value=a:null),placeholder:i(P)("withdraw_input")},null,8,wa),[[_,i(za)]]),u(g,{name:i(Ea)?"yanjin-k":"yanjin-g",class:"yanjing",onClick:e[6]||(e[6]=a=>Ea.value=!i(Ea))},null,8,["name"])])])]),["aams"].includes(a._getConfig("_APP_ENV"))?y("",!0):(b(),t("div",ya,[d("div",null,[v(p(i(P)("withdraw_tip")),1),d("span",_a,p(i(P)("custorm_service")),1)]),["coinsexpto"].includes(a._getConfig("_APP_ENV"))?(b(),t("div",ha,[v(p(i(P)("withdraw_commission"))+"：",1),d("span",fa,p(a.$route.query.fee||"")+" "+p(a.$route.query.icon.toLocaleUpperCase()),1)])):(b(),t("div",ba,[v(p(i(P)("withdraw_commission"))+"：",1),d("span",ka,p(a.$route.query.ratio)+"%",1)]))]))]),d("div",{class:"btnBox",onClick:Oa},[u($,{btnValue:i(P)("withdraw_require")},null,8,["btnValue"])])],64)}}},[["__scopeId","data-v-ad0b3ecf"]]);export{qa as default};
