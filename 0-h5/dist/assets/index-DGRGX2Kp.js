import{r as e,A as a,N as t,c as s,o as l,a as i,k as n,j as o,t as u,n as c,u as r,al as v,i as d,a1 as m,a2 as h,a6 as p,F as f,p as y,x as b,am as w,an as g,w as _,y as I,ao as C,M as k,a5 as S,l as H,ap as T,Q as x,f as L,aq as P,ar as U,s as D,q as A,C as R,v as N,as as E,J as M,S as F,K as j,T as B,L as q}from"./vendor-DNdropHc.js";import{_ as z,a as O,u as V,e as Y,k as Q,m as J,c as K,o as W,H as X,f as G,s as Z,q as $,j as ee,r as ae,t as te,v as se,w as le}from"./index-D_GDdZsP.js";import{C as ie}from"./candlestick-BYXOPo4a.js";import{p as ne,c as oe,d as ue,e as ce,g as re,h as ve,m as de,i as me}from"./filters-D_uLiSV_.js";import{S as he,U as pe,a as fe}from"./index-m4MTI5ON.js";import{P as ye}from"./public-CfRUb98k.js";import{O as be}from"./overlayPulic-BMwhUI6-.js";import{L as we}from"./leftSide-C3C9HNAy.js";import{B as ge,a as _e}from"./index-BoB8_I5y.js";import"./handicap-DJuiE7Tf.js";/* empty css              */import"./useFreeze-D4J_klo6.js";/* empty css              */import"./index-BhMz3Nth.js";import"./currencyItem-D92wBTIy.js";const Ie={class:"top"},Ce={class:"first"},ke={class:"firLeft"},Se={class:"fw-bold"},He={class:"first"},Te={class:"second"},xe={class:"secondLeft"},Le={class:"secondRight"},Pe={class:"secondItem"},Ue={class:"itemL"},De={key:0,class:"itemR fw-num"},Ae={key:1,class:"itemR fw-num"},Re={class:"secondItem"},Ne={class:"itemL"},Ee={key:0,class:"itemR fw-num"},Me={key:1,class:"itemR fw-num"},Fe={class:"secondItem"},je={class:"itemL"},Be={key:0,class:"itemR fw-num"},qe={key:1,class:"itemR fw-num"},ze=z({__name:"index",props:{coinInfo:{type:Object,default:()=>{}}},emits:["showSidePopup"],setup(v,{emit:d}){O();const m=v,h=e();a((()=>{h.value=2!==m.coinInfo.isCollect})),t((()=>m.coinInfo.coin),(()=>{h.value=2!==m.coinInfo.isCollect}),{deep:!0});const p=V(),f=s((()=>p.allCoinPriceInfo[m.coinInfo.coin]||{})),y=d;return(e,a)=>{var t,s,d,m;const h=K;return l(),i("div",null,[n("div",Ie,[n("div",Ce,[n("div",ke,[o(h,{name:"cebian17x14",class:"firLeftImg",onClick:a[0]||(a[0]=e=>y("showSidePopup"))}),n("div",Se,u(v.coinInfo.showSymbol),1)]),n("div",He,[o(h,{name:"guize",class:"senLeftImg",onClick:a[1]||(a[1]=a=>e._toView("/tradingRules?type=0"))})])]),n("div",Te,[n("div",xe,[n("div",{class:c([e._isRFD(r(f).open,r(f).close,"buy","rise")," fw-num"])},u(r(f).close||"0.00"),3),n("div",{class:c([e._isRFD(r(f).openPrice,r(f).close,"buy","rise")," rfd-sign secondLeftB fw-num"])},u(null==(t=r(f))?void 0:t.priceChangePercent)+"% ",3)]),n("div",Le,[n("div",Pe,[n("div",Ue,u(r(Y)("k_hight",["ebc"])),1),(null==(s=r(f))?void 0:s.high24)?(l(),i("div",De,u(r(Q)(r(f).high24)),1)):(l(),i("div",Ae,u(r(Q)(r(p).klineTicker.highPrice||0)),1))]),n("div",Re,[n("div",Ne,u(r(Y)("k_low",["ebc"])),1),(null==(d=r(f))?void 0:d.low24)?(l(),i("div",Ee,u(r(Q)(r(f).low24)),1)):(l(),i("div",Me,u(r(Q)(r(p).klineTicker.lowPrice||0)),1))]),n("div",Fe,[n("div",je,u(r(Y)("k_quantity")),1),(null==(m=r(f))?void 0:m.volume24)?(l(),i("div",Be,u(r(J)(r(f).volume24)),1)):(l(),i("div",qe,u(r(J)(r(p).klineTicker.volume||0)),1))])])])])])}}},[["__scopeId","data-v-7466a7be"]]),Oe={class:"historyItem"},Ve={class:"header"},Ye={class:"fw-num"},Qe={class:"list"},Je={class:"item"},Ke={class:"fw-num numItem"},We={class:"item"},Xe={class:"fw-num numItem"},Ge={key:0,class:"item"},Ze={class:"fw-num numItem"},$e={class:"item"},ea={class:"fw-num numItem"},aa={key:1,class:"item"},ta={class:"fw-num numItem"},sa={key:2,class:"item"},la={class:"fw-num numItem"},ia={class:"item"},na={key:3,class:"item"},oa={class:"fw-num numItem"},ua={key:4,class:"item"},ca=(e=>(m("data-v-5d4ba72f"),e=e(),h(),e))((()=>n("div",null,null,-1))),ra={class:"fw-num numItem"},va=z({__name:"contractHistory",props:{itemHistroy:{type:Object,default:{}},currentEntruset:{type:Number,default:()=>0}},emits:["recombine","updateRecord"],setup(t,{emit:s}){const o=V(),m=e(-1),h=t,p=e(!1),f=e(!1);a((()=>{m.value=h.itemHistroy.time?h.itemHistroy.time:0,p.value=!0}));const y=s;v((()=>{m.value>=0?(f.value=!0,setTimeout((()=>{m.value--}),1e3)):!h.currentEntruset&&0!==m.value&&p.value&&(y("recombine",h.itemHistroy,m.value),f.value&&(f.value=!1,y("updateRecord")))}));return(e,a)=>{var s;return l(),i("div",Oe,[n("div",Ve,[n("div",{class:c(["name",Number(t.itemHistroy.betContent)?"":"hightOther"])},u(Number(t.itemHistroy.betContent)?r(Y)("exchange_bullish",["bitmake"]):r(Y)("exchange_bearish",["bitmake"])),3),n("div",Ye,u(r(W)(null==(s=t.itemHistroy.params)?void 0:s.createTime,"DD/MM/YYYY HH:mm",!0)),1)]),n("div",Qe,[n("div",Je,[n("div",null,u(t.itemHistroy.showCoin?t.itemHistroy.showCoin:t.itemHistroy.coinSymbol.toUpperCase()+"/"+t.itemHistroy.baseSymbol.toUpperCase()),1),n("div",Ke,u(t.itemHistroy.openPrice),1)]),n("div",We,[n("div",null,u(r(Y)("metastaking_bb_count")),1),n("div",Xe,u(t.itemHistroy.betAmount),1)]),t.currentEntruset?d("",!0):(l(),i("div",Ge,[n("div",null,u(r(Y)("option_now_price")),1),n("div",Ze,u(r(o).allCoinPriceInfo[t.itemHistroy.coinSymbol].close)+" "+u(t.itemHistroy.baseSymbol?t.itemHistroy.baseSymbol.toUpperCase():""),1)])),n("div",$e,[n("div",null,u(r(Y)("k_time")),1),n("div",ea,u(t.itemHistroy.type)+"s",1)]),t.currentEntruset?(l(),i("div",aa,[n("div",null,u(r(Y)("exchange.finashTime")),1),n("div",ta,u(r(W)(t.itemHistroy.closeTime,"DD/MM/YYYY HH:mm:ss",!0)),1)])):d("",!0),t.currentEntruset?(l(),i("div",sa,[n("div",null,u(r(Y)("exchange.close")),1),n("div",la,u(t.itemHistroy.closePrice)+" "+u(t.itemHistroy.baseSymbol?t.itemHistroy.baseSymbol.toUpperCase():""),1)])):d("",!0),n("div",ia,[n("div",null,u(r(Y)("option_profit_loss_1")),1),t.currentEntruset?(l(),i("div",{key:0,class:c(["fw-num numItem",r(ne)(t.itemHistroy.betAmount,t.itemHistroy.rewardAmount)])},u(r(oe)(t.itemHistroy.betAmount,t.itemHistroy.rewardAmount))+" "+u(t.itemHistroy.baseSymbol?t.itemHistroy.baseSymbol.toUpperCase():""),3)):d("",!0),t.currentEntruset?d("",!0):(l(),i("div",{key:1,class:c(["fw-num numItem",r(ue)(Number(t.itemHistroy.betContent),t.itemHistroy.openPrice,r(o).allCoinPriceInfo[t.itemHistroy.coinSymbol].close)])},u(r(ce)(Number(t.itemHistroy.betContent),t.itemHistroy.openPrice,r(o).allCoinPriceInfo[t.itemHistroy.coinSymbol].close,t.itemHistroy.betAmount,t.itemHistroy.rate))+" "+u(t.itemHistroy.baseSymbol?t.itemHistroy.baseSymbol.toUpperCase():""),3))]),t.currentEntruset?d("",!0):(l(),i("div",na,[n("div",null,u(r(Y)("option_countdown")),1),n("div",oa,u(r(re)(r(m))),1)])),t.currentEntruset&&r(X).includes(e._getConfig("_APP_ENV"))?(l(),i("div",ua,[ca,n("div",ra,[n("p",{class:"share-button",onClick:a[0]||(a[0]=e=>{return a=t.itemHistroy,void y("shareRevenue",a);var a})},u(r(Y)("trade_share")),1)])])):d("",!0)])])}}},[["__scopeId","data-v-5d4ba72f"]]),da={class:"order-book"},ma={class:"order-book-header"},ha={class:"header-item"},pa={class:"header-item"},fa=(e=>(m("data-v-580fa69a"),e=e(),h(),e))((()=>n("div",{class:"header-item"},"累计",-1))),ya={class:"sell-orders"},ba={class:"price sell-price"},wa={class:"amount"},ga={class:"total"},_a={class:"price-value"},Ia={class:"price-change"},Ca={class:"buy-orders"},ka={class:"price buy-price"},Sa={class:"amount"},Ha={class:"total"},Ta=z({__name:"orderBook",props:{coinInfo:{type:Object,default:()=>({})}},setup(o){const r=o;V();const v=e([]),d=e([]),m=e(0),h=e(0),w=s((()=>h.value>0?"price-up":h.value<0?"price-down":"")),g=e=>parseFloat(e).toFixed(4),_=e=>parseFloat(e).toFixed(2),I=()=>{m.value=1e4*Math.random()+45e3,h.value=1e3*(Math.random()-.5),(()=>{const e=m.value||5e4,a=[],t=[];for(let i=0;i<10;i++){const t=e-(i+1)*(1e-4*e),s=10*Math.random()+.1,l=a.reduce(((e,a)=>e+a.amount),0)+s;a.push({price:t,amount:s,total:l})}for(let i=0;i<10;i++){const a=e+(i+1)*(1e-4*e),s=10*Math.random()+.1,l=t.reduce(((e,a)=>e+a.amount),0)+s;t.push({price:a,amount:s,total:l})}const s=Math.max(...a.map((e=>e.total))),l=Math.max(...t.map((e=>e.total)));v.value=a.map((e=>({...e,percentage:e.total/s*100}))),d.value=t.map((e=>({...e,percentage:e.total/l*100})))})()};let C=null;return a((()=>{I(),C=setInterval(I,2e3)})),p((()=>{C&&clearInterval(C)})),t((()=>r.coinInfo),(()=>{I()}),{deep:!0}),(e,a)=>{var t,s;return l(),i("div",da,[n("div",ma,[n("div",ha,"价格("+u((null==(t=o.coinInfo.baseCoin)?void 0:t.toUpperCase())||"USDT")+")",1),n("div",pa,"数量("+u((null==(s=o.coinInfo.coin)?void 0:s.toUpperCase())||"BTC")+")",1),fa]),n("div",ya,[(l(!0),i(f,null,y(d.value,((e,a)=>(l(),i("div",{key:"sell-"+a,class:"order-item sell-item",style:b({background:"linear-gradient(to left, rgba(239, 68, 68, 0.1) ".concat(e.percentage,"%, transparent ").concat(e.percentage,"%)")})},[n("div",ba,u(g(e.price)),1),n("div",wa,u(_(e.amount)),1),n("div",ga,u(_(e.total)),1)],4)))),128))]),n("div",{class:c(["current-price",w.value])},[n("div",_a,u(g(m.value)),1),n("div",Ia,u(h.value>0?"+":"")+u(g(h.value)),1)],2),n("div",Ca,[(l(!0),i(f,null,y(v.value,((e,a)=>(l(),i("div",{key:"buy-"+a,class:"order-item buy-item",style:b({background:"linear-gradient(to left, rgba(34, 197, 94, 0.1) ".concat(e.percentage,"%, transparent ").concat(e.percentage,"%)")})},[n("div",ka,u(g(e.price)),1),n("div",Sa,u(_(e.amount)),1),n("div",Ha,u(_(e.total)),1)],4)))),128))])])}}},[["__scopeId","data-v-580fa69a"]]),xa=e=>(m("data-v-bf227609"),e=e(),h(),e),La={class:"depth-chart"},Pa={class:"depth-header"},Ua={class:"depth-info"},Da={class:"info-item"},Aa=xa((()=>n("span",{class:"label"},"最新价:",-1))),Ra={class:"info-item"},Na=xa((()=>n("span",{class:"label"},"24h涨跌:",-1))),Ea=["width","height"],Ma={class:"info-box"},Fa=w('<div class="chart-legend" data-v-bf227609><div class="legend-item" data-v-bf227609><span class="legend-color buy-color" data-v-bf227609></span><span class="legend-text" data-v-bf227609>买单深度</span></div><div class="legend-item" data-v-bf227609><span class="legend-color sell-color" data-v-bf227609></span><span class="legend-text" data-v-bf227609>卖单深度</span></div></div>',1),ja=z({__name:"depthChart",props:{coinInfo:{type:Object,default:()=>({})}},setup(o){const r=o,v=e(null),m=e(null),h=e(350),f=e(200),y=e(5e4),w=e(0),_=e(0),I=e([]),C=e([]),k=e(null),S=e({}),H=s((()=>w.value>0?"price-up":w.value<0?"price-down":"")),T=e=>parseFloat(e).toFixed(2),x=()=>{const e=m.value;if(!e)return;const a=e.getContext("2d"),{width:t,height:s}=e;a.clearRect(0,0,t,s),a.lineWidth=2;const l=20,i=t-40,n=s-40,o=[...I.value,...C.value];if(0===o.length)return;const u=Math.min(...o.map((e=>e.price))),c=Math.max(...o.map((e=>e.price))),r=Math.max(...o.map((e=>e.cumulative))),v=e=>l+(e-u)/(c-u)*i,d=e=>s-l-e/r*n;if(I.value.length>0){a.strokeStyle="#22c55e",a.fillStyle="rgba(34, 197, 94, 0.2)",a.beginPath(),a.moveTo(v(I.value[0].price),d(0)),I.value.forEach(((e,t)=>{const s=v(e.price),l=d(e.cumulative);if(0===t)a.lineTo(s,l);else{const e=v(I.value[t-1].price);a.lineTo(e,l),a.lineTo(s,l)}}));const e=I.value[I.value.length-1];a.lineTo(v(e.price),d(0)),a.closePath(),a.fill(),a.stroke()}if(C.value.length>0){a.strokeStyle="#ef4444",a.fillStyle="rgba(239, 68, 68, 0.2)",a.beginPath(),a.moveTo(v(C.value[0].price),d(0)),C.value.forEach(((e,t)=>{const s=v(e.price),l=d(e.cumulative);if(0===t)a.lineTo(s,l);else{const e=v(C.value[t-1].price);a.lineTo(e,l),a.lineTo(s,l)}}));const e=C.value[C.value.length-1];a.lineTo(v(e.price),d(0)),a.closePath(),a.fill(),a.stroke()}a.strokeStyle="#6b7280",a.setLineDash([5,5]),a.beginPath();const h=v(y.value);a.moveTo(h,l),a.lineTo(h,s-l),a.stroke(),a.setLineDash([])},L=e=>{e.preventDefault(),D(e.touches[0])},P=e=>{e.preventDefault(),D(e.touches[0])},U=()=>{k.value=null},D=e=>{const a=m.value;if(!a)return;const t=a.getBoundingClientRect(),s=e.clientX-t.left,l=e.clientY-t.top,i=a.width-40,n=a.height-40,o=[...I.value,...C.value];if(0===o.length)return;const u=Math.min(...o.map((e=>e.price))),c=u+(s-20)/i*(Math.max(...o.map((e=>e.price)))-u),r=Math.max(...o.map((e=>e.cumulative)))*(1-(l-20)/n);k.value={price:c,depth:r},S.value={left:"".concat(s,"px"),top:"".concat(l,"px")}},A=()=>{y.value=1e4*Math.random()+45e3,w.value=1e3*(Math.random()-.5),_.value=w.value/y.value*100,(()=>{const e=y.value,a=[],t=[];let s=0;for(let i=50;i>=1;i--){const t=e-i*e*1e-4,l=100*Math.random()+10;s+=l,a.push({price:t,volume:l,cumulative:s})}let l=0;for(let i=1;i<=50;i++){const a=e+i*e*1e-4,s=100*Math.random()+10;l+=s,t.push({price:a,volume:s,cumulative:l})}I.value=a,C.value=t})(),x()};let R=null;return a((()=>{g((()=>{if(v.value){const e=v.value.getBoundingClientRect();h.value=e.width,f.value=200,g((()=>{x()}))}})),A(),R=setInterval(A,3e3)})),p((()=>{R&&clearInterval(R)})),t((()=>r.coinInfo),(()=>{A()}),{deep:!0}),(e,a)=>{return l(),i("div",La,[n("div",Pa,[n("div",Ua,[n("div",Da,[Aa,n("span",{class:c(["value",H.value])},u(T(y.value)),3)]),n("div",Ra,[Na,n("span",{class:c(["value",H.value])},u(w.value>0?"+":"")+u((s=_.value,parseFloat(s).toFixed(2)))+"%",3)])])]),n("div",{class:"chart-container",ref_key:"chartContainer",ref:v},[n("canvas",{ref_key:"chartCanvas",ref:m,width:h.value,height:f.value,onTouchstart:L,onTouchmove:P,onTouchend:U},null,40,Ea),k.value?(l(),i("div",{key:0,class:"crosshair-info",style:b(S.value)},[n("div",Ma,[n("div",null,"价格: "+u(T(k.value.price)),1),n("div",null,"深度: "+u((t=k.value.depth,parseFloat(t).toFixed(4))),1)])],4)):d("",!0)],512),Fa]);var t,s}}},[["__scopeId","data-v-bf227609"]]),Ba=e=>(m("data-v-5d294879"),e=e(),h(),e),qa={class:"trade-history"},za={class:"history-header"},Oa=Ba((()=>n("div",{class:"header-item"},"时间",-1))),Va={class:"header-item"},Ya={class:"header-item"},Qa=Ba((()=>n("div",{class:"header-item"},"方向",-1))),Ja={class:"time"},Ka={class:"amount"},Wa={class:"stats-info"},Xa={class:"stats-item"},Ga=Ba((()=>n("span",{class:"label"},"24h成交量:",-1))),Za={class:"value"},$a={class:"stats-item"},et=Ba((()=>n("span",{class:"label"},"24h成交额:",-1))),at={class:"value"},tt={key:0,class:"loading"},st={key:1,class:"no-more"},lt=z({__name:"tradeHistory",props:{coinInfo:{type:Object,default:()=>({})}},setup(s){const r=s,v=e([]),m=e(!1),h=e(!0),b=e(null),w=e({volume24h:0,turnover24h:0}),g=e=>{const a=new Date(e),t=a.getHours().toString().padStart(2,"0"),s=a.getMinutes().toString().padStart(2,"0"),l=a.getSeconds().toString().padStart(2,"0");return"".concat(t,":").concat(s,":").concat(l)},k=e=>parseFloat(e).toFixed(2),S=e=>e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(2)+"K":parseFloat(e).toFixed(4),H=(e=20)=>{const a=1e4*Math.random()+45e3,t=Date.now(),s=[];for(let l=0;l<e;l++){const e=Math.random()>.5?"buy":"sell",i=a+(Math.random()-.5)*a*.01,n=10*Math.random()+.01,o=t-l*Math.random()*6e4;s.push({timestamp:o,price:i,amount:n,side:e,value:i*n})}return s.sort(((e,a)=>a.timestamp-e.timestamp))},T=async(e=!1)=>{if(!m.value){m.value=!0;try{await new Promise((e=>setTimeout(e,500)));const a=H();v.value=e?a:[...v.value,...a],v.value.length>=100&&(h.value=!1),x()}catch(a){}finally{m.value=!1}}},x=()=>{const e=Date.now()-864e5,a=v.value.filter((a=>a.timestamp>e));w.value.volume24h=a.reduce(((e,a)=>e+a.amount),0),w.value.turnover24h=a.reduce(((e,a)=>e+a.value),0)},L=()=>{if(!b.value||m.value||!h.value)return;const{scrollTop:e,scrollHeight:a,clientHeight:t}=b.value;e+t>=a-50&&T()},P=()=>{const e=H(1)[0];e.timestamp=Date.now(),v.value.unshift(e),v.value.length>200&&(v.value=v.value.slice(0,200)),x()};let U=null;return a((async()=>{await T(!0),b.value&&b.value.addEventListener("scroll",L),U=setInterval(P,3e3*Math.random()+2e3)})),p((()=>{b.value&&b.value.removeEventListener("scroll",L),U&&clearInterval(U)})),t((()=>r.coinInfo),(()=>{T(!0)}),{deep:!0}),(e,a)=>{var t,r;const p=C;return l(),i("div",qa,[n("div",za,[Oa,n("div",Va,"价格("+u((null==(t=s.coinInfo.baseCoin)?void 0:t.toUpperCase())||"USDT")+")",1),n("div",Ya,"数量("+u((null==(r=s.coinInfo.coin)?void 0:r.toUpperCase())||"BTC")+")",1),Qa]),n("div",{class:"history-list",ref_key:"historyList",ref:b},[(l(!0),i(f,null,y(v.value,((e,a)=>(l(),i("div",{key:a,class:c(["trade-item","buy"===e.side?"buy-item":"sell-item"])},[n("div",Ja,u(g(e.timestamp)),1),n("div",{class:c(["price","buy"===e.side?"buy-price":"sell-price"])},u(k(e.price)),3),n("div",Ka,u(S(e.amount)),1),n("div",{class:c(["side","buy"===e.side?"buy-side":"sell-side"])},u("buy"===e.side?"买":"卖"),3)],2)))),128))],512),n("div",Wa,[n("div",Xa,[Ga,n("span",Za,u(S(w.value.volume24h)),1)]),n("div",$a,[et,n("span",at,u(k(w.value.turnover24h)),1)])]),m.value?(l(),i("div",tt,[o(p,{size:"16px"},{default:_((()=>[I("加载中...")])),_:1})])):d("",!0),!h.value&&v.value.length>0?(l(),i("div",st," 没有更多数据了 ")):d("",!0)])}}},[["__scopeId","data-v-5d294879"]]),it=e=>(m("data-v-cf8d4d2b"),e=e(),h(),e),nt=it((()=>n("div",{class:"line"},null,-1))),ot={class:"entrust"},ut={class:"entrustL"},ct={class:"entrustR"},rt={key:0},vt={key:0},dt={key:1},mt={key:2},ht={key:3},pt=it((()=>n("div",{class:"placeholder"},null,-1))),ft=z({__name:"index",props:{coinInfo:{type:Object,default:()=>{}}},setup(s,{expose:v}){const m=s,h=k(),b=e(0),w=e(!0),g=e([]),I=e([]),C=e=>{b.value=e,I.value=[],j(e)},U=()=>{w.value=!w.value,D()},D=()=>{w.value?I.value=g.value:I.value=ve(g.value,m.coinInfo.symbol)},A=()=>{x({forbidClick:!0,duration:0}),R()},R=()=>{I.value=[],j(b.value)};v({updateList:R}),t((()=>h.query),(()=>{D()})),t((()=>w.value),(e=>{e&&(I.value=g.value)}));const N=(e,a)=>{a<0&&I.value.forEach(((a,t)=>{a.userId===e.userId&&I.value.splice(t,1)}))},E=()=>{B(0),B(1),j(b.value)},M=e(0),F=e(0),j=async e=>{try{const t=await Z({status:e});if(200===t.code){const s=t.data;e?F.value=s.length:M.value=s.length,g.value=(a=s).length>0?(b.value||a.forEach(((e,t)=>{e.time<=0&&a.splice(t,1)})),a):a,I.value=g.value,D(),L()}else L()}catch(t){L()}var a},B=async e=>{try{const a=await Z({status:e});if(200===a.code){const t=a.data;e?F.value=t.length:M.value=t.length}}catch(a){}};a((()=>{j(0),B(1)}));const q=e(!1),z=e({}),O=Y("Close_position"),V=e=>{var a;let t=oe(e.betAmount,e.rewardAmount);const s=G().userInfo;null==(a=null==s?void 0:s.user)||a.activeCode,z.value={profitAndLossAmount:t>0?t.toString():t,TransactionType:e.coinSymbol.toUpperCase()+"/"+e.baseSymbol.toUpperCase(),CurrencyName:O,OpeningPrice:e.openPrice.toString(),ClosingPrice:e.closePrice.toString(),type:e.type,QrCode:location.origin,bgType:"1",currencyUnit:e.baseSymbol.toUpperCase()},q.value=!q.value},Q=G(),J=e("");return J.value=S.subscribe($.SETTLEMENT,((e,a)=>{const{type:t}=JSON.parse(a.date.message);3==t&&(j(0),j(1),Q.getUserInfo())})),p((()=>{J&&S.unsubscribe(J)})),(e,a)=>{const t=K,v=ee,m=P;return l(),i(f,null,[o(ie,{coinInfo:s.coinInfo,type:"secondContract"},null,8,["coinInfo"]),nt,n("div",ot,[n("div",ut,[n("div",{class:c(0===b.value?"entrustItem hightItem":"entrustItem"),onClick:a[0]||(a[0]=e=>C(0))},u(r(Y)("exchange_curentrust",["bitmake","ebc"]))+u(M.value?"(".concat(M.value,")"):""),3),n("div",{class:c(1===b.value?"entrustItem hightItem":"entrustItem"),onClick:a[1]||(a[1]=e=>C(1))},u(r(Y)("exchange_hisentrust",["bitmake","ebc"]))+u(F.value?"(".concat(F.value,")"):""),3),n("div",{class:c(2===b.value?"entrustItem hightItem":"entrustItem"),onClick:a[2]||(a[2]=e=>C(2))}," 订单簿 ",2),n("div",{class:c(3===b.value?"entrustItem hightItem":"entrustItem"),onClick:a[3]||(a[3]=e=>C(3))}," 深度图 ",2),n("div",{class:c(4===b.value?"entrustItem hightItem":"entrustItem"),onClick:a[4]||(a[4]=e=>C(4))}," 成交记录 ",2)]),n("div",ct,[w.value?(l(),H(t,{key:0,name:"yanjin-k",class:"entrustRImg",onClick:U})):d("",!0),w.value?d("",!0):(l(),H(t,{key:1,name:"yanjin-g",class:"entrustRImg",onClick:U})),o(t,{name:"shuaxin",class:"entrustRUpdateImg",onClick:A})])]),b.value<=1?(l(),i("div",rt,[I.value.length>0?(l(),i("div",vt,[(l(!0),i(f,null,y(I.value,(e=>(l(),H(va,{currentEntruset:b.value,itemHistroy:e,key:e.userId,onRecombine:N,onUpdateRecord:E,onShareRevenue:V},null,8,["currentEntruset","itemHistroy"])))),128))])):d("",!0),0===I.value.length?(l(),H(v,{key:1})):d("",!0)])):d("",!0),2===b.value?(l(),i("div",dt,[o(Ta,{coinInfo:s.coinInfo},null,8,["coinInfo"])])):d("",!0),3===b.value?(l(),i("div",mt,[o(ja,{coinInfo:s.coinInfo},null,8,["coinInfo"])])):d("",!0),4===b.value?(l(),i("div",ht,[o(lt,{coinInfo:s.coinInfo},null,8,["coinInfo"])])):d("",!0),pt,o(m,{show:q.value,class:"share-revenue-box",onClick:a[6]||(a[6]=e=>q.value=!1)},{default:_((()=>[n("div",{class:"share-revenue",onClick:a[5]||(a[5]=T((()=>{}),["stop"]))},[o(he,{"historical-data":z.value},null,8,["historical-data"])])])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-cf8d4d2b"]]),yt=e=>(m("data-v-3ee4251d"),e=e(),h(),e),bt={class:"upsAndDowns"},wt={class:"titleLeft"},gt={class:"fw-bold"},_t={class:"popupContain"},It={class:"item"},Ct={class:"firstHeader fw-bold"},kt={class:"firstList"},St=["onClick"],Ht={class:"firstItemTop"},Tt={class:"item"},xt={class:"firstHeader fw-bold"},Lt=["placeholder"],Pt={class:"quantityList"},Ut=["onClick"],Dt={class:"balance"},At={class:"fw-num"},Rt={class:"okButton"},Nt={class:"countdown"},Et={class:"fw-bold closeBtn"},Mt={class:"circle"},Ft={class:"countList margin20"},jt={class:"item"},Bt={class:"itemRight fw-num"},qt={class:"item"},zt={class:"itemRight fw-num"},Ot={class:"item"},Vt={class:"item"},Yt={class:"itemRight fw-num"},Qt={class:"item"},Jt={class:"itemRight fw-num"},Kt={key:0,class:"item"},Wt={class:"countFooter"},Xt=yt((()=>n("div",{class:"countdown"},null,-1))),Gt={class:"countdown"},Zt={class:"fw-bold closeBtn"},$t={class:"countdownHeader"},es=yt((()=>n("div",{class:"countdownHeaderName"},"USDT",-1))),as={class:"countdownOver"},ts={class:"countList"},ss={class:"item"},ls={class:"itemRight fw-num"},is={class:"item"},ns={class:"itemRight fw-num"},os={class:"item"},us={class:"item"},cs={class:"itemRight fw-num"},rs={class:"item"},vs={class:"itemRight fw-num"},ds={class:"countFooter"},ms=z({__name:"upsAndDowns",props:{coinInfo:{type:Object,default:()=>{}}},emits:["eventBusBrother"],setup(t,{emit:m}){const{_toast:h,_showName:p}=ae(),b=V(),w=t,g=G(),{asset:I}=U(g),C=e(!1),k=e(!1);document.addEventListener("visibilitychange",(function(){}));const S=e(""),H=e(""),T=e(!1),x=e(1),L=e(0),P=e({}),M=e(0),F=e([]),j=e(Y("all",["ebc"])),B=e([{name:"10",show:!0},{name:"20",show:!0},{name:"50",show:!0},{name:"100",show:!0},{name:"500",show:!0},{name:"1000",show:!0},{name:"2000",show:!0},{name:j.value}]);a((()=>{["gmdoin"].includes(__config._APP_ENV)?B.value=[{name:"100",show:!0},{name:"5000",show:!0},{name:"20000",show:!0},{name:"50000",show:!0},{name:"100000",show:!0},{name:"200000",show:!0},{show:!1},{name:j.value,show:!0}]:["gmtoin"].includes(__config._APP_ENV)?B.value=[{name:"100",show:!0},{name:"5000",show:!0},{name:"20000",show:!0},{name:"50000",show:!0},{name:"100000",show:!0},{name:"200000",show:!0},{name:"500000",show:!0},{name:j.value,show:!0}]:["bitfly"].includes(__config._APP_ENV)?B.value=[{name:"200",show:!0},{name:"500",show:!0},{name:"1000",show:!0},{name:"5000",show:!0},{name:"10000",show:!0},{name:"50000",show:!0},{name:"100000",show:!0},{name:j.value,show:!0}]:["rxce"].includes(__config._APP_ENV)?B.value=[{name:"100",show:!0},{name:"300",show:!0},{name:"500",show:!0},{name:"1000",show:!0},{name:"2000",show:!0},{name:"3000",show:!0},{name:"5000",show:!0},{name:"10000",show:!0},{name:j.value,show:!0}]:["trustwallet","gatedefi"].includes(__config._APP_ENV)?B.value=[{name:"500",show:!0},{name:"1000",show:!0},{name:"1500",show:!0},{name:"2000",show:!0},{name:"3000",show:!0},{name:"4000",show:!0},{name:"5000",show:!0},{name:j.value,show:!0}]:["hfm2"].includes(__config._APP_ENV)&&(B.value=[{name:"100",show:!0},{name:"500",show:!0},{name:"1000",show:!0},{name:"2000",show:!0},{name:"8000",show:!0},{name:"10000",show:!0},{name:"15000",show:!0},{name:j.value,show:!0}])}));const q=s((()=>b.allCoinPriceInfo[w.coinInfo.coin])),z=e(0),O=e(!1),Q=e(!1),J=e(null);v((()=>{if(Q.value){if(z.value>0?setTimeout((()=>{z.value--}),1e3):(k.value=!1,g.getUserInfo()),1===z.value){let a={status:1,id:X.value};try{setTimeout((()=>{Z(a).then((e=>{200===e.code?J.value=e.data[0]:D(e.msg)}))}),500)}catch(e){}}O.value&&z.value<=0&&(ie.value=!0)}}));const W=e(0),X=e(""),$=async()=>{if(Number(S.value)<P.value.minAmount)return D("".concat(p("minimum_input")," ").concat(P.value.minAmount," USDT"));if(Number(S.value)>P.value.maxAmount)return D("".concat(p("Maximum_input")," ").concat(P.value.maxAmount," USDT"));if(Number(S.value)>H.value)return h("Input_amount_exceeds");let e={betContent:x.value,betAmount:S.value,openPrice:q.close,openTime:(new Date).getTime(),symbol:w.coinInfo.symbol,coinSymbol:w.coinInfo.coin,baseSymbol:"usdt",periodId:P.value.id};try{const a=await se(e);200===a.code?(X.value=a.data.id,fe(),setTimeout((()=>{k.value=!0,W.value=a.data.openPrice,z.value=Number(P.value.period),O.value=!0,Q.value=!0}),1e3)):D(a.msg)}catch(a){}},ee=()=>{k.value=!1,Q.value=!1,pe("eventBusBrother")},ie=e(!1),re=()=>{ie.value=!1,pe("eventBusBrother")},ve=e=>{H.value=I.value.filter((e=>"usdt"===e.symbol))[0].availableAmount+"",S.value="",x.value=e,C.value=!0,L.value=0,M.value=0,T.value=!1,he()},he=async()=>{try{const e=await le({secondId:w.coinInfo.id});200===e.code&&(F.value=e.data,P.value=F.value[0])}catch(e){}},pe=m,fe=()=>{C.value=!1};return(e,a)=>{const s=K,v=E;return l(),i(f,null,[n("div",null,[n("div",bt,[n("div",{class:"ups item",onClick:a[0]||(a[0]=e=>ve(1))},u(r(Y)("exchange_bullish",["bitmake","bityc","aams","math"])),1),n("div",{class:"downs item",onClick:a[1]||(a[1]=e=>ve(0))},u(r(Y)("exchange_bearish",["bitmake","bityc","aams","math"])),1)])]),o(ye,{show:C.value,direction:"bottom",onHandelClose:fe},{titleCustomize:_((()=>[n("div",wt,[n("div",gt,u(2===t.coinInfo.customizeFlag?r(de)(t.coinInfo.showSymbol,"/USDT"):t.coinInfo.coin.toUpperCase()),1),n("div",{class:c(["titleName",x.value?"":"titleColor"])},u(x.value?r(Y)("option_buy_up",["bityc"]):r(Y)("option_buy_short",["bityc"])),3)])])),contentCustomize:_((()=>[n("div",_t,[n("div",It,[n("div",Ct,u(r(Y)("select_cycle",["ebc"])),1),n("div",kt,[(l(!0),i(f,null,y(F.value,((e,a)=>(l(),i("div",{style:{display:"inline-block"},class:c(["firstItem fw-num",L.value===a?"hightColor":""]),key:a,onClick:t=>((e,a)=>{L.value=e,P.value=a})(a,e)},[n("div",Ht,u(e.period)+"s",1),n("div",null,u(r(te)(e.odds,100))+"%",1)],10,St)))),128))])]),n("div",Tt,[n("div",xt,u(r(Y)("buying_volume",["ebc"])),1),A(n("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),type:"number",placeholder:"".concat(r(Y)("least",["ebc","aams"])," ").concat(["aams"].includes(e._getConfig("_APP_ENV"))?100:P.value&&P.value.minAmount?P.value.minAmount:0," ").concat(["aams"].includes(e._getConfig("_APP_ENV"))?"USD":"USDT"),"label-width":"0",class:"inputQuantity"},null,8,Lt),[[R,S.value]]),n("div",Pt,[(l(!0),i(f,null,y(B.value,((e,a)=>A((l(),i("div",{class:c(["item fw-num",T.value?e.name===j.value?"hightColor":"":Number(S.value)===Number(e.name)?"hightColor":""]),key:a,onClick:a=>{var t;(t=e.name)===j.value?(S.value=H.value,T.value=!0):(S.value=t,T.value=!1)}},u(e.name),11,Ut)),[[N,e.show]]))),128))]),n("div",Dt,[n("div",null,u(r(Y)("exchange_balance",["ebc"]))+"：",1),n("div",At,u(H.value)+" USDT",1)]),n("div",Rt,[n("div",{class:"button",onClick:$},u(r(Y)("btnConfirm",["bitmake","ebc"])),1)])])])])),_:1},8,["show"]),o(be,{show:k.value,"z-index":999},{contentCustomize:_((()=>[n("div",Nt,[n("div",Et,[n("div",null,u(r(de)(t.coinInfo.showSymbol,"/USDT")),1),o(s,{class:"closeSvg",name:"guanbi",onClick:ee})]),n("div",Mt,[o(v,{"current-rate":M.value,"onUpdate:currentRate":a[3]||(a[3]=e=>M.value=e),rate:100*(1-z.value/Number(P.value.period)),speed:100,"stroke-width":"100",size:"150px","layer-color":"#D9D9D9",color:"#138A5D",text:r(me)(z.value)},null,8,["current-rate","rate","text"])]),n("div",Ft,[n("div",jt,[n("div",null,u(r(Y)("quick_label_2")),1),n("div",Bt,u(q.value.close),1)]),n("div",qt,[n("div",null,u(r(Y)("quick_label_3")),1),n("div",zt,u(P.value.period)+"s",1)]),n("div",Ot,[n("div",null,u(r(Y)("bb_direction")),1),n("div",{class:c(["itemRight fw-num",x.value?"hightUp":"hightDown"])},u(x.value?r(Y)("option_buy_up",["bityc"]):r(Y)("option_buy_short",["bityc"])),3)]),n("div",Vt,[n("div",null,u(r(Y)("metastaking_bb_count")),1),n("div",Yt,u(S.value)+" USDT",1)]),n("div",Qt,[n("div",null,u(r(Y)("price")),1),n("div",Jt,u(W.value)+" USDT",1)]),["bitmake"].includes(e._getConfig("_APP_ENV"))?d("",!0):(l(),i("div",Kt,[n("div",null,u(r(Y)("quick_label_7")),1),n("div",{class:c(["itemRight fw-num",r(ue)(x.value,W.value,q.value.close)])},u(r(ce)(x.value,W.value,q.value.close,S.value,P.value.odds,P.value.flag))+" USDT ",3)]))]),n("div",Wt,u(r(Y)("option_profit_loss_3")),1)])])),_:1},8,["show"]),o(be,{show:ie.value,"z-index":999},{contentCustomize:_((()=>[n("div",Gt,[n("div",Zt,[n("div",null,u(r(de)(t.coinInfo.showSymbol,"/USDT")),1),o(s,{class:"closeSvg",name:"guanbi",onClick:re})]),n("div",$t,[n("div",{class:c([r(ne)(J.value.betAmount,J.value.rewardAmount),"ff-num"])},u(r(oe)(J.value.betAmount,J.value.rewardAmount)),3),es]),n("div",as,u(r(Y)("quick_label_1")),1),n("div",ts,[n("div",ss,[n("div",null,u(r(Y)("quick_label_2")),1),n("div",ls,u(J.value.closePrice),1)]),n("div",is,[n("div",null,u(r(Y)("quick_label_3")),1),n("div",ns,u(P.value.period)+"s",1)]),n("div",os,[n("div",null,u(r(Y)("bb_direction")),1),n("div",{class:c(["itemRight fw-num",x.value?"hightUp":"hightDown"])},u(x.value?r(Y)("option_buy_up",["bityc"]):r(Y)("option_buy_short",["bityc"])),3)]),n("div",us,[n("div",null,u(r(Y)("metastaking_bb_count")),1),n("div",cs,u(S.value)+" USDT",1)]),n("div",rs,[n("div",null,u(r(Y)("price")),1),n("div",vs,u(W.value)+" USDT",1)])]),n("div",ds,u(r(Y)("option_profit_loss_3")),1)])])),default:_((()=>[Xt])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-3ee4251d"]]),hs={__name:"tradeSecondContract",props:{headerList:{type:Array}},setup(s){const n=V(),u=G(),c=k(),v=e({});t((()=>c.query.symbol),(e=>{v.value=n.secondContractCoinList.filter(((a,t)=>a.coin===e))[0]}),{deep:!0});a((()=>{c.query.symbol?(v.value=n.secondContractCoinList.filter(((e,a)=>e.coin===c.query.symbol))[0],v.value||(v.value=n.secondContractCoinList[0])):v.value=n.secondContractCoinList[0]}));const d=e(!1),m=()=>{d.value=!0},h=e(null),p=()=>{u.getUserInfo(),h.value.updateList()};return(e,a)=>(l(),i("div",null,[o(ze,{coinInfo:r(v),onShowSidePopup:m},null,8,["coinInfo"]),o(ft,{coinInfo:r(v),ref_key:"childComp",ref:h},null,8,["coinInfo"]),o(ms,{coinInfo:r(v),onEventBusBrother:p},null,8,["coinInfo"]),o(ye,{show:r(d),onHandelClose:a[1]||(a[1]=e=>d.value=!1),direction:"left",height:"100%",width:"80%",showHeader:!1,empty:!1},{emptyContentCustomize:_((()=>[o(we,{onClose:a[0]||(a[0]=e=>d.value=!1),headerList:s.headerList},null,8,["headerList"])])),_:1},8,["show"])]))}},ps=z({__name:"tradeBBTrading",props:{headerList:{type:Array}},setup(s){const n=V(),u=k(),c=e({});t((()=>u.query.symbol),(e=>{c.value=n.spotCoinList.filter(((a,t)=>a.coin===e))[0]}),{deep:!0});a((()=>{u.query.symbol?(c.value=n.spotCoinList.filter(((e,a)=>e.coin===u.query.symbol))[0],c.value||(c.value=n.spotCoinList[0])):c.value=n.spotCoinList[0]}));const v=e(!1),d=()=>{v.value=!0};return(e,a)=>(l(),i("div",null,[o(ge,{coinInfo:r(c),onShowSidePopup:d},null,8,["coinInfo"]),o(_e,{coinInfo:r(c)},null,8,["coinInfo"]),o(ye,{show:r(v),onHandelClose:a[1]||(a[1]=e=>v.value=!1),direction:"left",height:"100%",width:"80%",showHeader:!1,empty:!1},{emptyContentCustomize:_((()=>[o(we,{onClose:a[0]||(a[0]=e=>v.value=!1),headerList:s.headerList},null,8,["headerList"])])),_:1},8,["show"])]))}},[["__scopeId","data-v-208ef65b"]]),fs={__name:"tradeUstandard",props:{headerList:{type:Array}},setup(s){const n=V(),u=k(),c=e({});t((()=>u.query.symbol),(e=>{c.value=n.contractCoinList.filter(((a,t)=>a.coin===e))[0]}),{deep:!0});a((()=>{u.query.symbol?(c.value=n.contractCoinList.filter(((e,a)=>e.coin===u.query.symbol))[0],c.value||(c.value=n.contractCoinList[0])):c.value=n.contractCoinList[0]}));const v=e(!1),d=()=>{v.value=!0};return(e,a)=>(l(),i("div",null,[o(pe,{coinInfo:r(c),onShowSidePopup:d},null,8,["coinInfo"]),o(fe,{coinInfo:r(c)},null,8,["coinInfo"]),o(ye,{show:r(v),onHandelClose:a[1]||(a[1]=e=>v.value=!1),direction:"left",height:"100%",width:"80%",showHeader:!1,empty:!1},{emptyContentCustomize:_((()=>[o(we,{onClose:a[0]||(a[0]=e=>v.value=!1),headerList:s.headerList},null,8,["headerList"])])),_:1},8,["show"])]))}},ys={class:"headerList"},bs={class:"left"},ws={class:"headerChoose"},gs=z({__name:"index",setup(u){const c=O(),v=V();k();const d=s((()=>c.getTradeHeaderList.filter(((e,a)=>"Optional"!=e.componentName)))),m=e(c.tradeFlag-c.isOption<0?0:c.tradeFlag-c.isOption),h=s((()=>{let e="";return"SecondContract"==d.value[m.value].componentName?e=hs:"BBTrading"==d.value[m.value].componentName?e=ps:"Ustandard"==d.value[m.value].componentName&&(e=fs),e}));return t(m,(e=>{c.setTradeFlag(e),v.getCoinList()}),{immediate:!0}),a((()=>{v.getCoinList()})),(e,a)=>{const t=K,s=B,u=q,c=F;return l(),i("div",null,[o(c,null,{default:_((()=>[n("div",ys,[n("div",bs,[o(t,{name:"jiantou-z",class:"leftImg",onClick:a[0]||(a[0]=a=>e._back())})]),n("div",ws,[o(u,{swipeable:"",shrink:"","swipe-threshold":2,active:r(m),"onUpdate:active":a[1]||(a[1]=e=>j(m)?m.value=e:null),"line-width":"20","line-height":"2",color:"#4936DF","title-active-color":"#4936DF","title-inactive-color":"#5d626d"},{default:_((()=>[(l(!0),i(f,null,y(d.value,((e,a)=>(l(),H(s,{key:a,title:e.title},null,8,["title"])))),128))])),_:1},8,["active"])])])])),_:1}),(l(),H(M(h.value),{headerList:d.value},null,8,["headerList"]))])}}},[["__scopeId","data-v-9f2a43a3"]]);export{gs as default};
