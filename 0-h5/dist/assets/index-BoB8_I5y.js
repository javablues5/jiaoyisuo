import{_ as e,a,u as l,c as t,r as n,e as s,T as o,f as i,U as c,j as u,k as r,B as d,V as v,t as p,A as m,q as y}from"./index-D_GDdZsP.js";import{c as g,o as f,a as b,k as h,j as _,t as I,n as k,u as C,r as T,i as x,s as w,A as N,w as P,F as S,p as U,l as j,K as V,au as A,av as L,T as E,L as F,ar as O,N as R,e as B,a6 as D,a5 as z,q,C as H,x as M,y as J,aw as K,at as $,a1 as G,a2 as Q}from"./vendor-DNdropHc.js";import{H as W}from"./handicap-DJuiE7Tf.js";/* empty css              *//* empty css              */import{h as X}from"./filters-D_uLiSV_.js";const Y={class:"top"},Z={class:"first"},ee={class:"firLeft"},ae={class:"fw-bold"},le={class:"first"},te=e({__name:"index",props:{coinInfo:{type:Object,default:()=>{}}},emits:["showSidePopup"],setup(e,{emit:n}){a();const s=e,o=l(),i=g((()=>o.allCoinPriceInfo[s.coinInfo.coin]||{})),c=n;return(a,l)=>{var n;const s=t;return f(),b("div",null,[h("div",Y,[h("div",Z,[h("div",ee,[_(s,{name:"cebian17x14",class:"firLeftImg",onClick:l[0]||(l[0]=e=>c("showSidePopup"))}),h("div",ae,I(e.coinInfo.showSymbol),1),h("div",{class:k([a._isRFD(C(i).openPrice,C(i).close,"buy","rise")," rfd-sign firNum fw-num"])},I(null==(n=C(i))?void 0:n.priceChangePercent)+"% ",3)]),h("div",le,[_(s,{name:"k-xian",class:"senLeftImg",onClick:l[1]||(l[1]=l=>a.$router.push("/detail?symbol=".concat(e.coinInfo.coin,"&type=1")))}),_(s,{name:"guize",class:"senLeftImg",onClick:l[2]||(l[2]=e=>a._toView("/tradingRules?type=1"))})])])])])}}},[["__scopeId","data-v-b4d5a8f7"]]),ne={key:0,class:"hisToryList"},se={class:"header"},oe={class:"headerLeft"},ie={key:0,class:"name"},ce={key:1,class:"name name2"},ue={class:"fw-bold"},re={class:"list"},de={class:"item"},ve={key:0,class:"fw-num numItem"},pe={class:"item"},me={class:"fw-num numItem"},ye={key:0,class:"item"},ge={class:"fw-num numItem"},fe={class:"item"},be={class:"fw-num numItem"},he={key:1,class:"item"},_e={class:"fw-num numItem"},Ie={key:2,class:"item"},ke={class:"fw-num numItem"},Ce=e({__name:"EntrustOrderItem",props:{data:{type:Object,default:()=>{}},coinInfo:{type:Object,default:()=>{}}},emits:["reduceOrderNum"],setup(e,{emit:a}){n();const t=l(),i=g((()=>{var e;return null==(e=t.allCoinPriceInfo[c.data.symbol])?void 0:e.close})),c=e,u=T(!1),r=T(!0),d=a,v=async()=>{const e=await o(c.data.id);200==e.code?(w(e.msg),r.value=!1,u.value=!0,d("reduceOrderNum")):w(e.msg)};return(a,l)=>{var t,n,o;return C(u)?x("",!0):(f(),b("div",ne,[h("p",null,I(e.data.index),1),h("div",se,[h("div",oe,[0==e.data.type?(f(),b("div",ie,I(C(s)("buy")),1)):x("",!0),1==e.data.type?(f(),b("div",ce,I(C(s)("sell")),1)):x("",!0),h("div",ue,I(e.data.showCoin?e.data.showCoin:(null==(t=e.data.symbol)?void 0:t.toUpperCase())+"/"+(null==(n=e.data.coin)?void 0:n.toUpperCase())),1)]),C(r)&&0==e.data.status?(f(),b("div",{key:0,class:"headerRight",onClick:v},I(C(s)("bb_Cancellation")),1)):x("",!0)]),h("div",re,[h("div",de,[h("div",null,I(C(s)("k_time")),1),e.data.delegateTime?(f(),b("div",ve,I(a._timeFormat(null==(o=e.data.params)?void 0:o.delegateTime,"HH:mm MM/DD",!0)),1)):x("",!0)]),h("div",pe,[h("div",null,I(C(s)("bb_commission_price")),1),h("div",me,I(e.data.delegatePrice||0),1)]),["rxce"].includes(a._getConfig("_APP_ENV"))?x("",!0):(f(),b("div",ye,[h("div",null,I(C(s)("bb_commission_amount")),1),h("div",ge,I(e.data.delegateTotal||0),1)])),h("div",fe,[h("div",null,I(C(s)("metastaking_bb_count")),1),h("div",be,I(e.data.dealNum||0),1)]),["rxce"].includes(a._getConfig("_APP_ENV"))&&0===e.data.type?(f(),b("div",he,[h("div",null,I(C(s)("home_newPrice")),1),h("div",_e,I(i.value||0),1)])):(f(),b("div",Ie,[h("div",null,I(C(s)("home_turnover")),1),h("div",ke,I(e.data.dealPrice||0),1)]))])]))}}},[["__scopeId","data-v-71d69ea1"]]),Te={class:"orderBox"},xe={class:"listBox"},we={key:0},Ne={class:"tab_right"},Pe=e({__name:"OrderListBox",props:{coinInfo:{type:Object,default:()=>{}}},setup(e,{expose:a}){const l=i(),n=e,o=T([{label:s("exchange_curentrust",["bitmake","ebc"]),value:0,num:0},{label:s("exchange_hisentrust",["bitmake","ebc","rxce"]),value:1,num:0}]),r=T(!0),d=T(!1),v=T(!1),p=T(0),m=T(10),y=T(1),g=T([]),I=T([]),k=()=>{d.value=!0,w(R.value)},w=async e=>{d.value=!0,v.value=!1;let a="isAsc=desc&orderByColumn=updateTime&status=".concat(e,"&pageSize=").concat(m.value,"&pageNum=").concat(y.value);const l=await c(a);"200"==l.code&&(setTimeout((()=>{d.value=!1,l.rows&&g.value.push(...l.rows),H(n.coinInfo.coin),p.value=l.total,g.value.length>=p.value&&(v.value=!0),y.value++}),500),0==e?o.value[0].num=l.total:1==e&&(o.value[1].num=l.total))},O=async e=>{let a="isAsc=desc&orderByColumn=updateTime&status=".concat(e,"&pageSize=").concat(m.value,"&pageNum=").concat(y.value);const l=await c(a);"200"==l.code&&(0==e?o.value[0].num=l.total:1==e&&(o.value[1].num=l.total))},R=T(0),B=e=>{g.value=[],I.value=[],y.value=1,R.value=e.name,w(R.value)};N((()=>{w(0),O(1)}));const D=()=>{g.value=[],I.value=[],y.value=1,0==R.value&&(w(0),O(1)),1==R.value&&(w(1),O(0))},z=()=>{D(),l.getUserInfo()},q=()=>{r.value=!r.value,H(n.coinInfo.coin)},H=e=>{r.value?I.value=g.value:I.value=X(g.value,e)};return a({refresh:D}),(e,a)=>{const l=A,n=L,i=u,c=E,p=F,m=t;return f(),b("div",Te,[_(p,{shrink:"",color:"transparent","title-active-color":"#17AC74","title-inactive-color":"#5d626d",onClickTab:B},{default:P((()=>[(f(!0),b(S,null,U(C(o),((e,t)=>(f(),j(c,{key:t,title:e.num>0?e.label+"("+e.num+")":e.label},{default:P((()=>{var e,t;return[h("div",xe,[(null==(e=C(I))?void 0:e.length)>0?(f(),b("div",we,[_(n,{finished:C(v),"finished-text":C(s)("no_more_data"),"loading-text":C(s)("loading"),onLoad:k,loading:C(d),"onUpdate:loading":a[0]||(a[0]=e=>V(d)?d.value=e:null)},{default:P((()=>[(f(!0),b(S,null,U(C(I),((e,a)=>(f(),j(l,{key:a,border:!1},{default:P((()=>[_(Ce,{data:e,onReduceOrderNum:z},null,8,["data"])])),_:2},1024)))),128))])),_:2},1032,["finished","finished-text","loading-text","loading"])])):x("",!0),0==C(d)&&(null==(t=C(I))?void 0:t.length)<=0?(f(),j(i,{key:1})):x("",!0)])]})),_:2},1032,["title"])))),128))])),_:1}),h("div",Ne,[_(m,{name:C(r)?"yanjin-k":"yanjin-g",class:"entrustRImg",onClick:q},null,8,["name"]),_(m,{name:"shuaxin",class:"entrustRImg",onClick:D})])])}}},[["__scopeId","data-v-79c0fc39"]]),Se=e=>(G("data-v-73a4be54"),e=e(),Q(),e),Ue={class:"content"},je={class:"content_left"},Ve={class:"content_right"},Ae={class:"rightFirst"},Le=["onClick"],Ee={key:0,class:"rightScond"},Fe={class:"rightScondList"},Oe=["onClick"],Re={class:"entrustSelect"},Be={key:1,class:"rightThird"},De={key:2,class:"rightFifth"},ze=["placeholder"],qe={key:3,class:"rightFifth"},He=["placeholder"],Me={class:"rightFourth"},Je={class:"slider-t"},Ke={class:"slider-name ff-num"},$e=["onClick"],Ge=Se((()=>h("div",{class:"rightLine"},null,-1))),Qe=Se((()=>h("div",{class:"rightLine"},null,-1))),We={key:4,class:"rightFifth"},Xe=["placeholder"],Ye={key:5,class:"rightSix"},Ze={class:"number fw-num"},ea={class:"rightSix"},aa={key:0,class:"number fw-num"},la={key:1,class:"number fw-num"},ta={key:6,class:"rightSeat"},na=Se((()=>h("div",{class:"line"},null,-1))),sa=e({__name:"index",props:{coinInfo:{type:Object}},setup(e){const{_toast:a,_showName:o}=n(),c=l(),u=e,N=i(),{asset:j}=O(N),A=g((()=>{var e,a;let l=0;return j.value.length&&(l="0"==E.type?(null==(e=j.value.filter((e=>"usdt"===e.symbol))[0])?void 0:e.availableAmount)||0:(null==(a=j.value.filter((e=>e.symbol===u.coinInfo.coin))[0])?void 0:a.availableAmount)||0),l})),L=g((()=>c.allCoinPriceInfo[u.coinInfo.coin]||{}));R((()=>{u.coinInfo}),(e=>{F()}),{deep:!0});const E=B({type:"0",delegateType:null}),F=()=>{let e={...E,price:"",count:"",turnover:"",slider:0};Object.assign(E,e)},G=[{label:s("purchase"),value:"0"},{label:s("bb_sell1"),value:"1"}],Q=[{label:s("bb_market_order"),placeholder:s("market_price"),value:"1"},{label:s("bb_Limit_order"),placeholder:s("limit_price"),value:"0"}],X=T({}),Y=T(!1),Z=e=>{e.value!==E.delegateType&&(E.delegateType=e.value,X.value=e),F(),Y.value=!1};Z(Q[0]);const ee=T(null),ae=async()=>{let e=!1;if(1==E.delegateType&&1==E.type?E.count?E.count>A.value&&(e=o("Insufficient_funds_available")):e=o("please_enter_quantity"):0==E.delegateType&&1==E.type?E.price?E.count?E.count>A.value&&(e=o("Insufficient_funds_available")):e=o("please_enter_quantity"):e=o("enter_the_amount"):E.turnover?E.turnover<=0?e=o("amount_incorrect"):E.turnover>A.value&&(e=o("Insufficient_funds_available")):e=o("enter_the_amount"),e)return void w(e);let a={symbol:u.coinInfo.coin,coin:u.coinInfo.baseCoin,delegateTotal:E.count,delegatePrice:E.price,delegateValue:E.turnover,delegateType:E.delegateType,type:E.type};const l=await v(a);200==l.code?(N.getUserInfo(),w(l.msg),F(),ee.value.refresh()):w(l.msg)},le=e=>{e/=100;let a=0;0==E.delegateType?a=E.price:1==E.delegateType&&(a=L.value.close),Number(a)&&(1==E.delegateType&&1==E.type?E.count=p(A.value,e):0==E.delegateType&&1==E.type?(E.count=p(A.value,e),E.turnover=m(p(E.count,a))):(E.count=p(d(A.value,a),e),E.turnover=m(p(E.count,a))))},te=()=>{let e=E.turnover;Number(e)>Number(A.value)&&(E.turnover=A.value,e=A.value);let a=0;0==E.delegateType?a=E.price:1==E.delegateType&&(a=L.value.close),Number(a)&&(E.count=d(e,a),E.slider=parseInt(p(d(e,A.value),100)))},ne=()=>{let e=E.count;1==E.delegateType&&1==E.type?E.slider=parseInt(p(d(e,A.value),100)):0==E.delegateType?Number(E.price)&&Number(e)&&(E.turnover=m(p(E.price,e))):1==E.delegateType&&Number(e)&&Number(L.value.close)&&(E.turnover=m(p(L.value.close,e)))},se=()=>{let e=E.price;0==E.delegateType&&Number(E.count)&&Number(e)&&(E.turnover=m(p(E.count,e)))},oe=e=>{0==E.delegateType&&(E.price=r(e),se(E.price))},ie=T("");return ie.value=z.subscribe(y.SETTLEMENT,((e,a)=>{const{type:l}=JSON.parse(a.date.message);1==l&&(ee.value.refresh(),N.getUserInfo())})),D((()=>{ie&&z.unsubscribe(ie)})),(a,l)=>{var n,o;const i=t,c=K,v=$;return f(),b("div",null,[h("div",Ue,[h("div",je,[_(W,{coinInfo:e.coinInfo,onSetTradePrice:oe},null,8,["coinInfo"])]),h("div",Ve,[h("div",Ae,[(f(),b(S,null,U(G,((e,a)=>h("div",{key:e.label,class:k({hightColor:C(E).type==e.value&&0==a,hightColorRed:C(E).type==e.value&&1==a,name:!0}),onClick:a=>(e=>{e.value!==E.type&&(E.type=e.value,["rxce"].includes(__config._APP_ENV)&&"1"==e.value&&Z(Q[0])),F()})(e)},I(e.label),11,Le))),64))]),!["rxce"].includes(a._getConfig("_APP_ENV"))||["rxce"].includes(a._getConfig("_APP_ENV"))&&0==C(E).type?(f(),b("div",Ee,[_(c,{show:C(Y),"onUpdate:show":l[0]||(l[0]=e=>V(Y)?Y.value=e:null),"show-arrow":!1},{reference:P((()=>[h("div",Re,[h("div",null,I(C(X).label),1),_(i,{name:C(Y)?"jiantou10x5-s":"jiantou10x5-x",class:"img"},null,8,["name"])])])),default:P((()=>[h("div",Fe,[(f(),b(S,null,U(Q,(e=>h("div",{class:k(["rightScondListItem",{hightBlue:C(E).delegateType==e.value}]),key:e.label,onClick:a=>Z(e)},I(e.label),11,Oe))),64))])])),_:1},8,["show"])])):x("",!0),1==C(E).delegateType?(f(),b("div",Be,I(C(X).placeholder),1)):x("",!0),0==C(E).delegateType?(f(),b("div",De,[q(h("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>C(E).price=e),onInput:se,type:"number",class:"amount",placeholder:"".concat(C(s)("price")," (").concat(u.coinInfo.baseCoinUpperCase,")")},null,40,ze),[[H,C(E).price]])])):x("",!0),0==C(E).delegateType||1==C(E).type&&1==C(E).delegateType?(f(),b("div",qe,[q(h("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>C(E).count=e),onInput:ne,type:"number",class:"amount",placeholder:"".concat(C(s)("metastaking_bb_count")," (").concat(2===u.coinInfo.customizeFlag?a.matchText(u.coinInfo.showSymbol,"/USDT"):u.coinInfo.coin.toUpperCase(),")")},null,40,He),[[H,C(E).count]])])):x("",!0),h("div",Me,[h("div",Je,[(f(),b(S,null,U(4,((e,a)=>h("div",{class:"item",key:a},[h("div",{class:k(["hightItem",{hightColorRed:1==C(E).type}]),style:M({width:"".concat(C(E).slider>=25*(a+1)?"100%":C(E).slider<25*(a+1)&&C(E).slider>=25*a?100*(C(E).slider/25-a)+"%":"0%")})},null,6)]))),64))]),h("div",Ke,[(f(),b(S,null,U(4,((e,l)=>h("div",{class:k(["item",C(E).slider>=25*(l+1)?"itemHight":""]),key:l,onClick:e=>a.onChange2(l)},I(25*(l+1)),11,$e))),64))]),Ge,_(v,{modelValue:C(E).slider,"onUpdate:modelValue":l[3]||(l[3]=e=>C(E).slider=e),onChange:le,"active-color":"var(--ex-div-bgColor1)","inactive-color":"var(--ex-div-bgColor)","button-size":"16"},null,8,["modelValue"]),Qe]),1!=C(E).type||"1"!=C(E).delegateType?(f(),b("div",We,[q(h("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>C(E).turnover=e),onInput:te,type:"number",class:"amount",placeholder:"".concat(C(s)(["rxce"].includes(a._getConfig("_APP_ENV"))?"pledge_purchasing_price":"bb_turnover")," (").concat(u.coinInfo.baseCoinUpperCase,")")},null,40,Xe),[[H,C(E).turnover]])])):x("",!0),["rxce"].includes(a._getConfig("_APP_ENV"))&&0==C(E).type?(f(),b("div",Ye,[h("div",null,I(C(s)("buy_bb_count")),1),h("div",Ze,I(C(r)(C(d)(C(E).turnover,C(L).close)))+" "+I(2===u.coinInfo.customizeFlag?a.matchText(u.coinInfo.showSymbol,"/USDT"):null==(n=u.coinInfo.coin)?void 0:n.toUpperCase()),1)])):x("",!0),h("div",ea,[h("div",null,I(C(s)("account_available")),1),0==C(E).type?(f(),b("div",aa,I(C(A))+" USDT",1)):(f(),b("div",la,I(C(A))+" "+I(2===u.coinInfo.customizeFlag?a.matchText(u.coinInfo.showSymbol,"/USDT"):null==(o=u.coinInfo.coin)?void 0:o.toUpperCase()),1))]),1!=C(E).delegateType||["rxce"].includes(a._getConfig("_APP_ENV"))?x("",!0):(f(),b("div",ta)),2==u.coinInfo.customizeFlag?(f(),b("div",{key:7,class:"rightSeven",onClick:ae},[h("div",{class:k(["maybutton",{hightColorRed:1==C(E).type}])},[0==C(E).type?(f(),b(S,{key:0},[J(I(C(s)("purchase"))+" "+I(u.coinInfo.showSymbol.replace("/USDT","")),1)],64)):(f(),b(S,{key:1},[J(I(C(s)("bb_sell1"))+" "+I(u.coinInfo.showSymbol.replace("/USDT","")),1)],64))],2)])):(f(),b("div",{key:8,class:"rightSeven",onClick:ae},[h("div",{class:k(["maybutton",{hightColorRed:1==C(E).type}])},[0==C(E).type?(f(),b(S,{key:0},[J(I(C(s)("purchase"))+" "+I(u.coinInfo.coinUpperCase),1)],64)):(f(),b(S,{key:1},[J(I(C(s)("bb_sell1"))+" "+I(u.coinInfo.coinUpperCase),1)],64))],2)]))])]),na,_(Pe,{ref_key:"orderListBoxRef",ref:ee,coinInfo:e.coinInfo},null,8,["coinInfo"])])}}},[["__scopeId","data-v-73a4be54"]]);export{te as B,sa as a};
