import{_ as l,e,u as a,q as s,k as i,m as o,A as n,t,B as c,C as u,z as r,c as v}from"./index-D_GDdZsP.js";import{r as m,c as d,e as b,N as p,ac as f,a5 as h,a6 as w,o as g,a as C,k,t as y,u as _,q as j,v as I,F as M,p as x,x as O,n as L,j as T,w as H}from"./vendor-DNdropHc.js";import{P}from"./public-CfRUb98k.js";import{m as N}from"./filters-D_uLiSV_.js";const z={class:"handicapBox"},S={class:"title"},B={class:"title_left"},D={class:"name"},F={class:"unit"},U={class:"title_right"},q={class:"name"},A={class:"unit"},R={class:"leftList"},E={class:"itemList asks"},$=["onClick"],G={class:"fall fw-num"},J={class:"itemName fw-num"},K={class:"itemCenter"},Q={class:""},V={class:"itemList"},W=["onClick"],X={class:"rise fw-num"},Y={class:"itemName fw-num"},Z={class:"leftBottom"},ll={class:"fw-num"},el={class:"bbList"},al=["onClick"],sl={class:"bbList"},il=["onClick"],ol=l({__name:"handicap",props:{coinInfo:{type:Object},rows:{type:Number,default:4}},emits:["setTradePrice"],setup(l,{emit:ol}){const nl=ol,tl=l,cl=[{label:e("bb_default"),value:0,icon:"morenpan"},{label:e("bb_sell_order"),value:1,icon:"maichupan"},{label:e("bb_buy_order"),value:2,icon:"mairupan"}],ul=m(cl[0]),rl=m(!1),vl=d((()=>0!=ul.value.value?2*tl.rows:tl.rows)),ml=[{label:"0.00000001",value:0,min:1e-8},{label:"0.0000001",value:1,min:1e-7},{label:"0.000001",value:2,min:1e-6},{label:"0.00001",value:3,min:1e-5},{label:"0.0001",value:4,min:1e-4},{label:"0.001",value:5,min:.001},{label:"0.01",value:6,min:.01},{label:"0.1",value:7,min:.1},{label:"1",value:8,min:10},{label:"10",value:9,min:100},{label:"100",value:10,min:1e3}],dl=m([]),bl=b({}),pl=m(!1),fl=m(0),hl=m(0),wl=b([]),gl=b([]);const Cl=()=>{var l,e,a;setTimeout(_l,(e=900,a=1600,Math.floor(Math.random()*(a-e+1))+e));let s=null==(l=kl.value)?void 0:l.close,i=1/function(l){var e,a=Math.floor(l);let s=Math.pow(10,a.toString().length-1);return a<10&&(s=Math.pow(10,5-(null==(e=l.toString().split(".")[1])?void 0:e.length))),s}(s),o=null==bl?void 0:bl.min,n=1e3*o;if(s<1e3&&(n=o*10**("".concat(s).length-1)),!s||!Number(o))return fl.value=0,hl.value=0,Object.assign(gl,gl.map((l=>(l.close=0,l.count=0,l)))),void Object.assign(wl,gl.map((l=>(l.price=0,l.count=0,l))));let c=[],v=[],m=t(t(Math.random(),i),n);s<10&&(m=t(t(Math.random(),i),n));for(let r=1;r<=2*tl.rows;r++){let l=t(Math.random(),m)+t(Math.random(),i),e={price:u(u(s,r*o),0),count:l};c.push(e),c=c.sort(((l,e)=>l.price-e.price))}for(let u=1;u<=2*tl.rows;u++){let l=t(Math.random(),m)+t(Math.random(),i),e={price:r(r(s,u*o),0),count:l};v.push(e),v=v.sort(((l,e)=>e.price-l.price))}fl.value=Math.max(...c.filter(((l,e)=>e<tl.rows)).map((l=>l.count))),hl.value=Math.max(...v.filter(((l,e)=>e<tl.rows)).map((l=>l.count))),Object.assign(gl,c),Object.assign(wl,v)},kl=d((()=>{var l;return yl.allCoinPriceInfo[null==(l=tl.coinInfo)?void 0:l.coin]})),yl=a();p((()=>{var l;return null==(l=tl.coinInfo)?void 0:l.coin}),(()=>{var l;(null==(l=kl.value)?void 0:l.close)>0&&(dl.value=ml.filter((l=>30*l.min<kl.value.close)).slice(-4),Object.assign(bl,dl.value[0]),_l())}));const _l=f.throttle((()=>{Cl()}),1e3),jl=h.subscribe(s.DETAIL,((l,e)=>{e.symbol&&e.symbol==tl.coinInfo.coin&&(kl.value.close&&dl.value.length?_l():(dl.value=ml.filter((l=>30*l.min<kl.value.close)).slice(-4),Object.assign(bl,dl.value[0]),Cl()))}));return w((()=>{jl&&h.unsubscribe(jl)})),(a,s)=>{var u,r,m,d;const b=v;return g(),C("div",z,[k("div",S,[k("div",B,[k("div",D,y(_(e)("price")),1),k("div",F,"("+y(l.coinInfo.baseCoinUpperCase)+")",1)]),k("div",U,[k("div",q,y(_(e)("vol")),1),k("div",A," ("+y(2===l.coinInfo.customizeFlag?_(N)(l.coinInfo.showSymbol,"/USDT"):l.coinInfo.coinUpperCase)+") ",1)])]),k("div",R,[j(k("div",E,[(g(!0),C(M,null,x(vl.value,((l,e)=>{var a,s,u;return g(),C("div",{class:"item",onClick:l=>{var a;return nl("setTradePrice",null==(a=gl[e])?void 0:a.price)},key:"asks".concat(e)},[k("div",G,y(_(i)(null==(a=gl[e])?void 0:a.price)),1),k("div",J,y(_(o)(null==(s=gl[e])?void 0:s.count)),1),k("div",{class:"hightItem fall rfd-bg",style:O("width:".concat(_(n)(_(t)(_(c)((null==(u=gl[e])?void 0:u.count)||0,_(fl)),100),2),"%;"))},null,4)],8,$)})),128))],512),[[I,2!=_(ul).value]]),k("div",K,[k("div",{class:L([a._isRFD(null==(u=kl.value)?void 0:u.open,null==(r=kl.value)?void 0:r.close,"buy","rise"),"fw-num centername"]),onClick:s[0]||(s[0]=l=>{var e;return nl("setTradePrice",null==(e=kl.value)?void 0:e.close)})},y(_(i)(null==(m=kl.value)?void 0:m.close)),3),k("div",Q,"â‰ˆ$"+y(null==(d=kl.value)?void 0:d.close),1)]),j(k("div",V,[(g(!0),C(M,null,x(vl.value,((l,e)=>{var a,s,u;return g(),C("div",{class:"item itemHight",key:"bids".concat(e),onClick:l=>{var a;return nl("setTradePrice",null==(a=wl[e])?void 0:a.price)}},[k("div",X,y(_(i)(null==(a=wl[e])?void 0:a.price)),1),k("div",Y,y(_(o)(null==(s=wl[e])?void 0:s.count)),1),k("div",{class:"hightItem rise rfd-bg",style:O("width:".concat(_(n)(_(t)(_(c)((null==(u=wl[e])?void 0:u.count)||0,_(hl)),100),2),"%;"))},null,4)],8,W)})),128))],512),[[I,1!=_(ul).value]])]),k("div",Z,[k("div",{class:"bottomLeft",onClick:s[1]||(s[1]=l=>pl.value=!0)},[k("div",ll,y(null==bl?void 0:bl.label),1),T(b,{name:"jiantou10x5-x",class:"img"})]),k("div",{class:"bottomRight",onClick:s[2]||(s[2]=l=>rl.value=!0)},[T(b,{name:_(ul).icon,class:"img"},null,8,["name"])])]),T(P,{show:_(pl),onHandelClose:s[3]||(s[3]=l=>pl.value=!1),direction:"bottom",showHeader:!1,empty:!1},{emptyContentCustomize:H((()=>[k("div",el,[(g(!0),C(M,null,x(_(dl),(l=>(g(),C("div",{class:"item",key:l.value,style:O(bl.label===l.label?"color:var(--ex-font-color2)":""),onClick:e=>(l=>{l.value!=bl.value&&Object.assign(bl,l),pl.value=!1})(l)},y(l.label),13,al)))),128))])])),_:1},8,["show"]),T(P,{show:_(rl),onHandelClose:s[4]||(s[4]=l=>rl.value=!1),direction:"bottom",showHeader:!1,empty:!1},{emptyContentCustomize:H((()=>[k("div",sl,[(g(),C(M,null,x(cl,(l=>k("div",{class:"item",key:l.value,style:O(_(ul).value===l.value?"color:var(--ex-font-color2)":""),onClick:e=>(l=>{l.value!=ul.value.value&&(ul.value=l),rl.value=!1})(l)},y(l.label),13,il))),64))])])),_:1},8,["show"])])}}},[["__scopeId","data-v-f1217816"]]);export{ol as H};
