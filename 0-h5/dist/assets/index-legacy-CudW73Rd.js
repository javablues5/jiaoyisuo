System.register(["./vendor-legacy-xPeUPSmM.js","./index-legacy-DeCpTJ6v.js","./useFreeze-legacy-C0c0El3t.js","./applyAmount-legacy-CilUnnRo.js"],(function(e,a){"use strict";var t,l,n,o,i,c,v,u,r,d,s,m,b,f,g,p,h,x,y,I,_,k,w,C,z,E,P,U,L,j,A,N,S,V,F,R,$;return{setters:[e=>{t=e.ar,l=e.r,n=e.c,o=e.N,i=e.A,c=e.a0,v=e.s,u=e.a,r=e.j,d=e.u,s=e.k,m=e.q,b=e.C,f=e.t,g=e.y,p=e.l,h=e.w,x=e.F,y=e.I,I=e.o,_=e.p,k=e.a1,w=e.a2},e=>{C=e._,z=e.r,E=e.aQ,P=e.f,U=e.aR,L=e.R,j=e.x,A=e.b,N=e.c,S=e.e,V=e.k,F=e.aS},e=>{R=e.u},e=>{$=e.A}],execute:function(){var a=document.createElement("style");a.textContent="[data-v-11b3b0e7]{font-size:.373333rem;color:var(--ex-default-font-color)}.content[data-v-11b3b0e7]{padding:.8rem .4rem}.content .from[data-v-11b3b0e7],.content .to[data-v-11b3b0e7]{display:flex;justify-content:space-between;padding:.4rem .266667rem;border:.026667rem solid var(--ex-border-color1);border-radius:.08rem}.content .from>div[data-v-11b3b0e7],.content .to>div[data-v-11b3b0e7]{display:flex;justify-content:space-around;align-items:center}.content .from>div .left[data-v-11b3b0e7],.content .to>div .left[data-v-11b3b0e7]{color:var(--ex-font-color9)}.content .from>div span[data-v-11b3b0e7],.content .to>div span[data-v-11b3b0e7]{margin:0 .4rem;font-size:.32rem;color:var(--ex-passive-font-color)}.content .from>div .right[data-v-11b3b0e7],.content .to>div .right[data-v-11b3b0e7]{display:flex;align-items:center}.content .from>div .right .svgImg[data-v-11b3b0e7],.content .to>div .right .svgImg[data-v-11b3b0e7]{margin-left:.266667rem;width:.533333rem;height:.533333rem}.content .from>div .right .svgImg .icon[data-v-11b3b0e7],.content .to>div .right .svgImg .icon[data-v-11b3b0e7]{font-size:.533333rem}.content .from>div .right .svgImg .iconImg[data-v-11b3b0e7],.content .to>div .right .svgImg .iconImg[data-v-11b3b0e7]{width:100%}.content .from input[data-v-11b3b0e7],.content .to input[data-v-11b3b0e7]{flex:1;color:var(--ex-font-color20);background:var(--ex-default-background-color)}.content .from input[data-v-11b3b0e7]::-moz-placeholder,.content .to input[data-v-11b3b0e7]::-moz-placeholder{color:var(--ex-font-color20)}.content .from input[data-v-11b3b0e7]::placeholder,.content .to input[data-v-11b3b0e7]::placeholder{color:var(--ex-font-color20)}.content .exchange_btn[data-v-11b3b0e7]{padding:1.066667rem 0;text-align:center}.content .exchange_btn .dui[data-v-11b3b0e7]{font-size:1.066667rem}.content .rate[data-v-11b3b0e7]{display:flex;margin-top:.533333rem}.content .rate p[data-v-11b3b0e7]{color:var(--ex-passive-font-color)}.btn[data-v-11b3b0e7]{padding:.533333rem .4rem 1.333333rem}.btn p[data-v-11b3b0e7]{padding:.373333rem 0;font-size:.426667rem;color:var(--ex-font-color);background-color:var(--ex-div-bgColor1);border-radius:.08rem;text-align:center}.coinList[data-v-11b3b0e7]{max-height:6.666667rem}.coinItem[data-v-11b3b0e7]{display:flex;align-items:center;padding:.4rem 0;flex:1;background:var(--ex-default-background-color)}.coinItem div[data-v-11b3b0e7]{flex:1}.coinItem .svgImg[data-v-11b3b0e7]{text-align:right}.coinItem .svgImg .icon[data-v-11b3b0e7]{text-align:right;font-size:.8rem}.coinItem .svgImg .iconImg[data-v-11b3b0e7]{width:.8rem}.coinItem p[data-v-11b3b0e7]{font-size:.426667rem;color:var(--ex-passive-font-color)}.coinItem>div[data-v-11b3b0e7]:first-child{text-align:end;margin-right:.133333rem}.coinItem>div[data-v-11b3b0e7]:last-child{text-align:start;margin-left:.133333rem}input[data-v-11b3b0e7]:disabled{background-color:var(--ex-default-background-color)}\n",document.head.appendChild(a);const q={class:"content"},D={class:"from"},Q=["placeholder"],T=(e=>(k("data-v-11b3b0e7"),e=e(),w(),e))((()=>s("span",null,"|",-1))),B={class:"svgImg"},G={class:"exchange_btn"},H={class:"to"},J=["placeholder"],K={class:"svgImg"},M={class:"rate ff-num"},O={class:"btn"},W={class:"coinList"},X=["onClick"],Y={class:"svgImg"};e("default",C({__name:"index",setup(e){const{_isFreeze:a}=R(),{_toast:k}=z(),w=E(),C=P();C.getUserInfo();const{asset:Z}=t(C),{swapCoinList:ee}=t(w),ae=l(!0),te=l([]),le=l([]),ne=l({}),oe=l({}),ie=l(0),ce=l(0),ve=n((()=>{let e="";return Z.value.forEach(((a,t)=>{a.symbol==ne.value.coin&&1==a.type&&(e=a.availableAmount)})),e})),ue=l(0);o([ie],(([e],[a])=>{ae.value?(te.value.forEach(((a,t)=>{a.coin==e&&(ne.value=a)})),le.value=ee.value.filter(((e,a)=>e.coin!=ne.value.coin)),e==ce.value&&(oe.value=ee.value.filter(((e,a)=>e.coin!=ne.value.coin))[0],ce.value=oe.value.coin)):te.value.forEach(((a,t)=>{a.coin==e&&(ne.value=a)}))})),o([ce],(([e],[a])=>{ae.value?le.value.forEach(((a,t)=>{a.coin==e&&(oe.value=a)})):(le.value.forEach(((a,t)=>{a.coin==e&&(oe.value=a)})),te.value=ee.value.filter(((e,a)=>e.coin!=oe.value.coin)),e==ce.value&&(ne.value=ee.value.filter(((e,a)=>e.coin!=oe.value.coin))[0],ie.value=oe.value.coin))})),o([ne,oe],((e,a)=>{var t,l;t=e[0]?.coin,l=e[1]?.coin,t=me(t),l=me(l),F(t,l).then((e=>{if("200"==e.code){let a=e.data[`${t}`],n=e.data[`${l}`];null==a&&(a=1),null==n&&(n=1),ue.value=V(a/n,8)}}))}),{deep:!0});const re=l(!1),de=l({}),se=l("from"),me=e=>e,be=l(""),fe=l();o([be,ue],(()=>{fe.value=V(be.value*ue.value,8)})),i((()=>{(async()=>{await w.getSwapCoinList();let e=[];Z.value.forEach(((a,t)=>{let l={};"1"==a.type&&(l.id,l.amount=a.availableAmount,"usdt"==a.symbol&&(l.coin="usdt",l.icon="usdt",e.unshift(l)),"usdt"!=a.symbol&&(l.coin=a.symbol?.replace("usdt","").trim(),l.icon=a.loge,e.push(l)))})),ee.value.forEach(((a,t)=>{e.forEach(((e,t)=>{e.coin==a.coin&&(a.amount=e.amount)}))})),te.value=e,["gmtoin2"].includes(__config._APP_ENV)?ne.value=e.find(((e,a)=>"btc"===e.coin)):ne.value=e[0],ie.value=ne.value?.coin,le.value=ee.value?.filter(((e,a)=>e.coin!=ne.value?.coin)),oe.value=ee.value?.filter(((e,a)=>e.coin!=ne.value?.coin))[0],ce.value=oe.value?.coin})()}));const ge=e=>{"from"==e?de.value=te.value:"to"==e&&(de.value=le.value),se.value=e,re.value=!0},pe=c.debounce((()=>{if(be.value<=0)return void k("swap_minNum");if(be.value>ve.value)return void k("swap_maxNum");let e={fromSymbol:me(ne.value?.coin),toSymbol:me(oe.value?.coin),total:be.value};U(e).then((e=>{"200"==e.code?(k("swap_success",["aams"]),setTimeout((()=>{C.getUserInfo()}),1e3)):v(e.msg)}))}),500),he=()=>{L.includes(__config._APP_ENV)?a(L)&&pe():pe()};return(e,a)=>{const t=j,l=A,n=N,o=y;return I(),u(x,null,[r(t,{currentName:d(S)("swap")},null,8,["currentName"]),r($,{amount:ve.value||0,coin:ne.value?.coin?.toLocaleUpperCase()},null,8,["amount","coin"]),s("div",q,[s("div",D,[m(s("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=e=>be.value=e),placeholder:d(S)("swap_input"),class:"ff-num"},null,8,Q),[[b,be.value]]),s("div",null,[s("div",{class:"left",onClick:a[1]||(a[1]=e=>be.value=ne.value?.amount||"0")},f(d(S)("swap_all")),1),T,s("div",{class:"right",onClick:a[2]||(a[2]=e=>ge("from"))},[g(f(ne.value?.coin?.toLocaleUpperCase())+" ",1),s("div",B,[ne.value?.icon?.length>10?(I(),p(l,{key:0,filePath:ne.value?.icon,alt:"",class:"iconImg"},null,8,["filePath"])):(I(),p(n,{key:1,name:ne.value?.icon,class:"icon"},null,8,["name"]))])])])]),s("div",G,[r(n,{name:"duihuan40x40",class:"dui",onClick:a[3]||(a[3]=e=>(()=>{ae.value=!ae.value;let e=te.value;te.value=le.value,le.value=e;let a=ne.value;ne.value=oe.value,oe.value=a})())})]),s("div",H,[m(s("input",{type:"number",disabled:"",class:"ff-num","onUpdate:modelValue":a[4]||(a[4]=e=>fe.value=e),placeholder:d(S)("swap_number")},null,8,J),[[b,fe.value]]),s("div",null,[s("div",{class:"right",onClick:a[5]||(a[5]=e=>ge("to"))},[g(f(oe.value?.coin?.toLocaleUpperCase())+" ",1),s("div",K,[oe.value?.icon?.length>10?(I(),p(l,{key:0,filePath:oe.value?.icon,class:"iconImg"},null,8,["filePath"])):(I(),p(n,{key:1,name:oe.value?.icon,class:"icon"},null,8,["name"]))])])])]),s("div",M,[s("p",null,f(d(S)("swap_rateDay"))+"：",1),g(" 1 "),s("span",null,f(ne.value.coin?.toLocaleUpperCase()),1),g(" ≈ "),s("span",null,f(ue.value),1),s("span",null,f(oe.value.coin?.toLocaleUpperCase()),1)])]),s("div",O,[s("p",{onClick:he},f(d(S)("btnConfirm",["bitmake"])),1)]),r(o,{show:re.value,"onUpdate:show":a[6]||(a[6]=e=>re.value=e),title:"",id:"sheetPopup",style:{"max-width":"var(--ex-max-width)",left:"50%",translate:"-50%"}},{default:h((()=>[s("div",W,[(I(!0),u(x,null,_(de.value,((e,a)=>(I(),u("div",{key:e.id,class:"coinItem",onClick:a=>((e,a)=>{re.value=!1,"from"==se.value?ie.value=e.coin:"to"==se.value&&(ce.value=e.coin)})(e)},[s("div",Y,[e?.icon?.length>10?(I(),p(l,{key:0,filePath:e.icon,alt:"",class:"iconImg"},null,8,["filePath"])):(I(),p(n,{key:1,name:e.icon,class:"icon"},null,8,["name"]))]),s("div",null,[s("p",null,f(e.coin?.toLocaleUpperCase()),1)])],8,X)))),128))])])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-11b3b0e7"]]))}}}));
