System.register(["./vendor-legacy-xPeUPSmM.js","./index-legacy-DeCpTJ6v.js"],(function(e,r){"use strict";var t,o,i,l,a,s,n,d,m,c,u,p,b,h,y,v,g,f,_,C,S,k,w,P,L,D,E;return{setters:[e=>{t=e.c,o=e.r,i=e.e,l=e.a0,a=e.A,s=e.an,n=e.ax,d=e.a5,m=e.o,c=e.a,u=e.k,p=e.F,b=e.p,h=e.n,y=e.u,v=e.t,g=e.ap,f=e.i},e=>{_=e.d,C=e.e,S=e._,k=e.a,w=e.u,P=e.ag,L=e.ah,D=e.q,E=e.k}],execute:function(){var r=document.createElement("style");r.textContent=".candlestick[data-v-2f583be3]{height:9.28rem;background-color:var(--ex-candlestick-bg)}.hightItem[data-v-2f583be3]{color:var(--ex-font-color9)!important}.third[data-v-2f583be3]{margin-top:.266667rem;padding:0px .4rem .266667rem;border-bottom:.026667rem solid var(--ex-border-color)}.third .list[data-v-2f583be3]{background-color:#000;display:flex;justify-content:space-between;align-items:center}.third .list .thirdLeft[data-v-2f583be3]{flex:1;background-color:var(--ex-default-background-color);display:flex;font-size:.373333rem;color:var(--ex-default-font-color)}.third .list .thirdLeft .item[data-v-2f583be3]{flex:1;margin-right:.8rem}.third .list .thirdLeft .item[data-v-2f583be3]:last-child{margin-right:0}.third .list .thirdRight[data-v-2f583be3]{display:flex;align-items:center;font-size:.373333rem;color:var(--ex-font-color9)}.third .list .thirdRight .thirdRightImg[data-v-2f583be3]{width:.266667rem;height:.16rem;margin-left:.133333rem}.selectTimes[data-v-2f583be3]{position:absolute;height:100vh;width:var(--ex-max-width);background:rgba(0,0,0,.6);z-index:10}.selectTimes .times[data-v-2f583be3]{background-color:var(--ex-default-background-color);position:absolute;width:100%;height:2.24rem;display:flex;align-items:center;border-radius:0px 0px .4rem .4rem}.selectTimes .times .item[data-v-2f583be3]{display:flex;align-items:center;justify-content:center;margin:0 .4rem;width:.986667rem;height:.613333rem;background:var(--ex-div-bgColor12);border-radius:.053333rem;font-size:.32rem;color:var(--ex-default-font-color)}.studyList[data-v-2f583be3]{display:flex;padding:.266667rem .4rem}.studyList .studyItem[data-v-2f583be3]{font-size:.373333rem;color:var(--ex-default-font-color);margin-right:.8rem}\n",document.head.appendChild(r);class I{self=null;subscribers={};requestsPending=!1;barList=[];constructor(e){this.self=e}onReady(e){this.self.getConfig(e)}async getBars(e,r,t,o,i,l,a){if(this.requestsPending)return;a&&(this.barList=[],t=""),this.requestsPending=!0;const s=await this.self.getBars({symbolInfo:e,resolution:r,from:t,to:o,onHistoryCallback:i,onErrorCallback:l,firstDataRequest:a});this.requestsPending=!1,s&&s.length?(this.barList=s.concat(this.barList),this.barList.length?i(this.barList,{noData:!1,nextTime:this.barList[0].time}):i([],{noData:!0})):i([],{noData:!0})}subscribeBars(e,r,t,o,i){this.subscribers[o]||(this.subscribers[o]={lastBarTime:null,resolution:r,onRealtimeCallback:t,onResetCacheNeededCallback:i})}unsubscribeBars(e){this.subscribers[e]&&delete this.subscribers[e]}async resolveSymbol(e,r,t){return r(await this.self.resolveSymbol())}updateData(e){let r=Object.keys(this.subscribers)[0]||"",t=this.subscribers[r]||{};if(t.lastBarTime<e.time)this.barList.push(e),t.lastBarTime=e.time,t?.onRealtimeCallback&&t?.onRealtimeCallback(e);else if(t.lastBarTime==e.time){let r=this.barList.slice(-1);Object.keys(r).forEach((t=>{r[t]=e[t]})),t?.onRealtimeCallback&&t?.onRealtimeCallback(e)}}getMarks(){}getTimescaleMarks(){}calculateHistoryDepth(e,r,t){}}const x=["adaptive_logo","dont_show_boolean_study_arguments","hide_left_toolbar_by_defaul","side_toolbar_in_fullscreen_mode","disable_resolution_rebuild","seconds_resolution","hide_last_na_study_output"],A=["widget_logo","symbol_info","go_to_date","compare_symbol","header_compare","symbol_search_hot_key","left_toolbar","volume_force_overlay","header_saveload","contextmenu","display_market_status","pane_context_menu","timeframes_toolbar","snapshot_trading_drawings","use_localstorage_for_settings","header_symbol_search","header_undo_redo","header_screenshot","property_pages","header_resolutions","lock_visible_time_range_on_resize","source_selection_markers","header_widget","edit_buttons_in_legend","show_hide_button_in_legend","format_button_in_legend","study_buttons_in_legend","delete_button_in_legend","main_series_scale_menu","---show_interval_dialog_on_key_press","adaptive_logo"],B={"volume.volume.color.0":"#d62548","volume.volume.color.1":"#4bbd83","volume.volume transparency":70,"volume.options.showStudyArguments":!0,"volume.volume ma.color":"#FF0000","volume.volume ma.transparency":100,"volume.volume ma.linewidth":2,"volume.show ma":!0,"MACD.MACD.color":"#2196F3","MACD.MACD.linewidth":2,"MACD.Signal.color":"#FF6D00","MACD.Signal.linewidth":2,"MACD.Histogram.plottype":"columns","MACD.Histogram.color":"#22AB94","bollinger bands.transparency":0,"bollinger bands.background":"rgba(0,0,0,0)","bollinger bands.median.color":"#FF6D00","bollinger bands.upper.color":"#2196F3","bollinger bands.upper.linewidth":2,"bollinger bands.lower.color":"#2196F3","bollinger bands.lower.linewidth":2},M=e=>{var r={light:{up:"#4BBD83",down:"#D62548",bg:"#ffffff",grid:"#F2F4F7",cross:"#333",border:"#f7f8fa",text:"#7D8AA3",line:"#ECECEC"},dark:{up:"#4BBD83",down:"#D62548",bg:"#202329",grid:"#35393E",cross:"#999",border:"#35393E",text:"#999",line:"#35393E"}}[e];return{volumePaneSize:"medium","paneProperties.legendProperties.showSeriesTitle":!0,"paneProperties.legendProperties.showSeriesOHLC":!1,"paneProperties.legendProperties.showLegend":!0,"paneProperties.legendProperties.showBarChange":!1,"paneProperties.legendProperties.showOnlyPriceSource":!1,"mainSeriesProperties.priceAxisProperties.autoScale":!0,"mainSeriesProperties.style":1,"mainSeriesProperties.priceLineWidth":2,"mainSeriesProperties.areaStyle.color1":"rgba(75, 189, 131, 1)","mainSeriesProperties.areaStyle.color2":"rgba(255, 255, 255, 1)","mainSeriesProperties.areaStyle.linecolor":"#4BBD83","mainSeriesProperties.areaStyle.linewidth":4,"paneProperties.topMargin":30,"paneProperties.bottomMargin":5,"mainSeriesProperties.statusViewStyle.symbolTextSource":"name","scalesProperties.lineColor":r.line,"scalesProperties.textColor":r.text,"scalesProperties.fontSize":12,"paneProperties.background":r.bg,"paneProperties.vertGridProperties.color":r.grid,"paneProperties.horzGridProperties.color":r.grid,"paneProperties.crossHairProperties.color":r.cross,"paneProperties.crossHairProperties.style":2,"mainSeriesProperties.candleStyle.upColor":r.up,"mainSeriesProperties.candleStyle.downColor":r.down,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.borderColor":r.border,"mainSeriesProperties.candleStyle.borderUpColor":r.up,"mainSeriesProperties.candleStyle.borderDownColor":r.down,"mainSeriesProperties.candleStyle.wickUpColor":r.up,"mainSeriesProperties.candleStyle.wickDownColor":r.down,"mainSeriesProperties.candleStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.hollowCandleStyle.upColor":r.up,"mainSeriesProperties.hollowCandleStyle.downColor":r.down,"mainSeriesProperties.hollowCandleStyle.drawWick":!0,"mainSeriesProperties.hollowCandleStyle.drawBorder":!0,"mainSeriesProperties.hollowCandleStyle.borderColor":r.border,"mainSeriesProperties.hollowCandleStyle.borderUpColor":r.up,"mainSeriesProperties.hollowCandleStyle.borderDownColor":r.down,"mainSeriesProperties.hollowCandleStyle.wickColor":r.line,"mainSeriesProperties.haStyle.upColor":r.up,"mainSeriesProperties.haStyle.downColor":r.down,"mainSeriesProperties.haStyle.drawWick":!0,"mainSeriesProperties.haStyle.drawBorder":!0,"mainSeriesProperties.haStyle.borderColor":r.border,"mainSeriesProperties.haStyle.borderUpColor":r.up,"mainSeriesProperties.haStyle.borderDownColor":r.down,"mainSeriesProperties.haStyle.wickColor":r.border,"mainSeriesProperties.haStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.upColor":r.up,"mainSeriesProperties.barStyle.downColor":r.down,"mainSeriesProperties.barStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.dontDrawOpen":!1,"mainSeriesProperties.lineStyle.color":r.border,"mainSeriesProperties.lineStyle.linewidth":2,"mainSeriesProperties.lineStyle.priceSource":"close"}},F=e=>({light:{backgroundColor:"#ffffff",foregroundColor:"#4BBD83"},dark:{backgroundColor:"#252834",foregroundColor:"#4BBD83"}}[e]),T=e=>({enabled_features:x,disabled_features:A,studies_overrides:B,overrides:M(e),loading_screen:F(e)}),O={class:"third"},R={class:"list"},N={class:"thirdLeft"},U=["onClick"],j={class:"times"},H=["onClick"],z=["id"],$={class:"studyList"},q=["onClick"],W={__name:"candlestick",props:{type:{type:String,default:"detail"},coinInfo:{type:Object,default:()=>{}}},setup(e){const r=e,S=t((()=>{let e=1e4;return r.coinInfo?.amount>100?e=100:r.coinInfo?.amount<.1?e=1e6:r.coinInfo?.amount<100&&(e=1e4),e})),x={time:"",amount:"",open:"",high:"",low:"",close:"",volume:"",lastClose:"",intervention:!1},A=o(""),B=[{label:`1${C("minute")}`,value:"1m",interval:"1",key:"ONE_MIN"},{label:`5${C("minute")}`,value:"5m",interval:"5",key:"FIVE_MIN",market:"mt5"},{label:`15${C("minute")}`,value:"15m",interval:"15",key:"FIFTEEN_MIN",market:"mt5"},{label:`30${C("minute")}`,value:"30m",interval:"30",key:"THIRTY_MIN",market:"mt5"},{label:`1${C("hour")}`,value:"1h",interval:"60",key:"ONE_HOUR",market:"mt5"},{label:`2${C("hour")}`,value:"2h",interval:"120",key:"TWO_HOUR"},{label:`6${C("hour")}`,value:"6h",interval:"360",key:"SIX_HOUR",isMore:!0},{label:`1${C("day")}`,value:"1d",interval:"1d",key:"ONE_DAY",isMore:!0,market:"mt5"},{label:`3${C("day")}`,value:"3d",interval:"3d",key:"ONE_DAY",isMore:!0},{label:C("weekly"),value:"1w",interval:"W",key:"ONE_WEEK",isMore:!0,market:"mt5"},{label:C("month"),value:"1M",interval:"M",key:"ONE_MON",isMore:!0}],M=[{label:"MA",name:"Moving Average",colorList:["#E5BF39","#7CC7BA","#C5A0E0"],cycleList:[5,10,30],studyList:[]},{label:"EMA",name:"Moving Average Exponential",colorList:["#E5BF39","#7CC7BA","#C5A0E0"],cycleList:[5,10,30],studyList:[]},{label:"BOLL",name:"Bollinger Bands",colorList:["#E5BF39","#7CC7BA","#C5A0E0"],cycleList:[14],studyList:[]},{label:"MACD",name:"MACD",colorList:["#E5BF39","#7CC7BA","#C5A0E0"],cycleList:[12],studyList:[]},{label:"RSI",name:"Relative Strength Index",colorList:["#7B2B8C","#5FABAC","#886024"],cycleList:[6],studyList:[]},{label:"WR",name:"Williams %R",colorList:["#886024"],cycleList:[14],studyList:[]}],F=i([]),W=B.filter((e=>e?.isMore));let Y=[],K=null,G=i([]),V=i({}),X=i({});const J=t((()=>`kline_${r.type}`));let Q=null;const Z=k(),ee=w(),re=l.debounce((e=>{let t=e.detail.symbol,o=e.detail.coinInfo,i=oe(o);i.map((e=>e.value)).join()!=F.map((e=>e.value)).join()&&(Y=te(),F.splice(0,F.length,...i),Object.assign(X,F[0])),ue.value=!1,ie(t,X.interval,(()=>{Object.assign(V,r.coinInfo)}))}),200),te=(e=V)=>{let r=B.map((e=>e.interval));return"mt5"==e?.market&&(r=B.filter((e=>"mt5"==e.market)).map((e=>e.interval))),r},oe=(e=V)=>{let r=B.filter((e=>!e?.isMore));return"mt5"!=e?.market&&3!==e?.coinType||(r=B.filter((e=>"mt5"==e.market))),r};a((async()=>{Object.assign(V,r.coinInfo),Y=te(),F.splice(0,F.length,...oe()),Object.assign(X,F[0]),document.addEventListener("event_tradeSymbolChange",re),s((()=>{ae()}))})),n((()=>{document.removeEventListener("event_tradeSymbolChange",re),de(!0),Q.remove()}));const ie=async(e,r,t)=>{V.symbol==e&&r==X.interval||Q?.setSymbol(e,r,(()=>{Object.assign(X,B.find((e=>e.interval==r))),t&&t()}))},le={getConfig:async e=>{setTimeout((()=>{e({supported_resolutions:Y,supports_marks:!1,supports_timescale_marks:!0,supports_time:!0})}),0)},getServerTime:async e=>{let r=+new Date;e&&e(r)},getBars:async({symbolInfo:e,resolution:r,from:t,firstDataRequest:o})=>{let i=B.find((e=>e.interval==r));try{if(i&&(""==t||t>0)){let r={symbol:e.coinUpperCase,interval:i.key,limit:1e3};t&&(r.end=t);const{data:a}=await(l={...r,interval:i.key,symbol:e.coinUpperCase,market:e.market},_("/kline",l));let s=[];if(a&&(ee.setKlineTicker(a.ticker),s=a.historyKline),s=s.map((e=>({open:parseFloat(e.o),high:parseFloat(e.h),low:parseFloat(e.l),close:parseFloat(E(e.c)),amount:parseFloat(E(e.c)),volume:parseFloat(e.v),time:e.T}))).sort(((e,r)=>e.time-r.time)),o){let r=s.slice(-1)[0];x.amount=r.amount,x.open=r.open,x.close=r.close,x.high=r.high,x.low=r.low,x.volume=r.volume,x.time=r.time,x.lastClose=r.close,x.intervention=!1,A.value=Math.abs(x.time-s.slice(-2,-1)[0].time),ce(x),me({coin:e.coin,symbol:e.symbol,interval:i.key,firstDataRequest:o})}return s}}catch(a){return de(!0),[]}var l;return[]},resolveSymbol:async()=>({name:r.coinInfo.symbolUpperCase,coin:r.coinInfo.coin,coinUpperCase:r.coinInfo.coin,symbol:r.coinInfo.symbol,symbolUpperCase:r.coinInfo.symbolUpperCase,market:r.coinInfo.market,fractional:!1,session:"24x7",has_intraday:!0,has_weekly_and_monthly:!0,exchange:__config._APP_EXCHANGE_NAME,description:r.coinInfo.symbolUpperCase,pricescale:S.value,minmov:1/S.value,supported_resolutions:Y})},ae=()=>{K=new I(le);let e=window.__theme;Q=new TradingView.widget({symbol:r.coinInfo.symbolUpperCase,theme:e,debug:!1,autosize:!0,interval:X.interval,container_id:J.value,datafeed:K,library_path:"/charting_library/",custom_css_url:`../tradingview_${e}.css`,locale:"en",timezone:Z.timezone,customFormatters:{dateFormatter:{format:e=>P(e.getTime(),"DD/MM/YYYY",!0)},timeFormatter:{format:e=>P(e.getTime(),"HH:mm:ss",!0)}},preset:"mobile",...T(e)}),Q.onChartReady((()=>{se()}))},se=()=>{let e=he(M[0].name);G.push(e)},ne=[],de=(e=!1)=>{V.coin&&(L.send({op:D.unsubscribe,type:D.KLINE,symbol:V.coin,interval:X.key}),e&&(ne.forEach((e=>{e&&d.unsubscribe(e)})),ne.length=0,L.send({op:D.unsubscribe,type:D.TRADE,symbol:V.coin})))},me=async e=>{de(e.firstDataRequest),L.send({op:D.subscribe,type:D.KLINE,symbol:e.coin,interval:e.interval}),e.firstDataRequest&&L.send({op:D.subscribe,type:D.TRADE,symbol:e.coin});let r=d.subscribe(D.KLINE,((r,t)=>{let o=t.data.tick;if(t.symbol==e.coin){x.intervention!=o?.intervention&&(o.open=x.lastClose,x.intervention=o?.intervention);let e=parseInt(o.id/A.value)*A.value;x.time<e&&(x.time=e,x.open=o.open),x.high=o.high,x.low=o.low,x.close=Number(E(o.close)),x.volume=o.vol,ce(x)}}));ne.push(r)},ce=e=>{e?.close&&(K.updateData(e),d.publish(D.DETAIL,{data:{...e,vol:e.volume},origin:"kline",symbol:V.coin,type:D.DETAIL}))};l.throttle((function(e){ce(e)}),300);const ue=o(!1),pe=(e,t="")=>{e.interval!=X.interval&&ie(r.coinInfo.symbol,e.interval),ue.value=!!t},be=o(""),he=e=>{if(be.value==e)return;const r=Q.activeChart();be.value&&M.filter((e=>e.name==be.value))[0].list.forEach((e=>{r.removeEntity(e)})),be.value=e;let t=M.filter((e=>e.name==be.value))[0],o=[];t.cycleList.forEach((async(i,l)=>{let a="";a="MACD"==e||"Bollinger Bands"==e?await r.createStudy(be.value,!1,!1,[],{}):await r.createStudy(be.value,!1,!1,[i],{"plot.color":t.colorList[l],"plot.linewidth":2}),o.push(a)})),t.list=o};return(e,r)=>(m(),c(p,null,[u("div",null,[u("div",O,[u("div",R,[u("div",N,[(m(!0),c(p,null,b(y(F),((e,r)=>(m(),c("div",{class:h({"hightItem item ff-num":e.interval===y(X).interval,"item ff-num":!0}),key:r,onClick:r=>pe(e)},v(e.value),11,U)))),128))])])]),y(ue)?(m(),c("div",{key:0,class:"selectTimes",onTouchmove:r[0]||(r[0]=g((()=>{}),["prevent"])),onMousewheel:r[1]||(r[1]=g((()=>{}),["prevent"])),onClick:r[2]||(r[2]=e=>ue.value=!1)},[u("div",j,[(m(!0),c(p,null,b(y(W),((e,r)=>(m(),c("div",{key:r,class:h({hightItem:e.interval===y(X).interval,"item ff-num":!0}),onClick:r=>pe(e,"menu")},v(e.value),11,H)))),128))])],32)):f("",!0)]),u("div",{id:J.value,class:"candlestick"},null,8,z),u("div",$,[(m(!0),c(p,null,b(y(M),((e,r)=>(m(),c("div",{class:h(e.name===y(be)?"hightItem studyItem":"studyItem"),key:r,onClick:r=>he(e.name)},v(e.label),11,q)))),128))])],64))}};e("C",S(W,[["__scopeId","data-v-2f583be3"]]))}}}));
